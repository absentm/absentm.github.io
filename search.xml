<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>告别</title>
      <link href="/2022/01/27/%E5%91%8A%E5%88%AB/"/>
      <url>/2022/01/27/%E5%91%8A%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><p>康宁街地铁站到了，再见了浪潮的小伙伴们。</p><p>感谢一路陪伴的你们，感谢分给我烟抽的你，感谢陪我喝酒侃大山的你，感谢峡谷里一直默默给我当辅助的你，感谢嚷嚷着一块按摩却从来没带我玩的你，感谢总是一言不发却处处补刀还有小迷妹的你…</p><p>江上几人在，天涯孤棹还。何当重相见，樽酒慰离颜。期待，期待山花烂漫时与子同游，期待代码世界里高谈阔论，期待久别重逢后大醉一场。</p><p>愿诸君戮力，诗酒趁年华！</p><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Packaged python project and published to PyPI</title>
      <link href="/2022/01/01/Packaged-python-project-and-published-to-PyPI/"/>
      <url>/2022/01/01/Packaged-python-project-and-published-to-PyPI/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h1 id="Preface"><a class="header-anchor" href="#Preface">¶</a><em>Preface</em></h1><p>In Python, we often install various third-party libraries by pip cmd from PyPI, so how can we build a standard python library from scratch? Then, Let’s find it out.</p><p><img src="https://gitee.com/absentm/gitRes/raw/2bb8194e7766a7b7351767f72b732f86ee9b2264/NotePics/PyPI-akparse.png" alt="PyPI-akparse.png"></p><h1 id="Project-packaging"><a class="header-anchor" href="#Project-packaging">¶</a><em>Project packaging</em></h1><p>We need to define a standard Python project structure, and then start packaging step by step according to the following steps. <a href="https://packaging.python.org/en/latest/tutorials/packaging-projects/">[1]</a></p><h2 id="Project-structure"><a class="header-anchor" href="#Project-structure">¶</a><em>Project structure</em></h2><p>Start by creating a code folder to publish, organizing the project structure and adding a few necessary files, such as Project Name, LICENSE, <a href="http://README.md">README.md</a>, <a href="http://setup.py">setup.py</a> and so on. <a href="https://pythonguidecn.readthedocs.io/zh/latest/writing/structure.html">[2]</a></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">packaging</span><br><span class="line">├── my_project</span><br><span class="line">│   ├── module1</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   └── hello.py</span><br><span class="line">│   ├── module2</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   └── bye.py</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">├── LICENSE</span><br><span class="line">├── README.md</span><br><span class="line">└── setup.py  # also setup.cfg</span><br></pre></td></tr></tbody></table></figure><p>The example project is simple, all of them are empty files, and the other files are as follows:</p><p>1/ <a href="http://hello.py">hello.py</a></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"hello world!"</span>)</span><br></pre></td></tr></tbody></table></figure><p>2/ <a href="http://bye.py">bye.py</a></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">goodbye</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"goodbye!"</span>)</span><br></pre></td></tr></tbody></table></figure><p>3/ <a href="http://utils.py">utils.py</a></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"A demo project for packaging."</span>)</span><br></pre></td></tr></tbody></table></figure><h2 id="Add-LICENSE"><a class="header-anchor" href="#Add-LICENSE">¶</a><em>Add LICENSE</em></h2><p>PyPI requires that all uploaded packages must contain a license, take advantage of <a href="https://choosealicense.com/">[3]</a> help select a license, and then copy the license content into a file LICENSE.</p><p><strong><em>Note that some licenses require a year ([year]) and owner ([fullname] or [name of copyright owner])</em></strong></p><p>FOR EXAMPLE, AN MIT LICENSE:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">MIT License</span><br><span class="line"></span><br><span class="line">Copyright (c) [2022] [my_project]</span><br><span class="line"></span><br><span class="line">Permission is hereby granted, free of charge, to any person obtaining a copy</span><br><span class="line">of this software and associated documentation files (the "Software"), to deal</span><br><span class="line">in the Software without restriction, including without limitation the rights</span><br><span class="line">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span><br><span class="line">copies of the Software, and to permit persons to whom the Software is</span><br><span class="line">furnished to do so, subject to the following conditions:</span><br><span class="line"></span><br><span class="line">The above copyright notice and this permission notice shall be included in all</span><br><span class="line">copies or substantial portions of the Software.</span><br><span class="line"></span><br><span class="line">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><br><span class="line">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><br><span class="line">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><br><span class="line">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><br><span class="line">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span><br><span class="line">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span><br><span class="line">SOFTWARE.</span><br></pre></td></tr></tbody></table></figure><h2 id="Add-description"><a class="header-anchor" href="#Add-description">¶</a><em>Add description</em></h2><p>Write a detailed description of the project according to the markdown syntax, which can then be used as an entry in <a href="http://setup.py">setup.py</a> 「long_description」</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Example Package</span></span><br><span class="line">This is a simple example package. You can use [Github-flavored Markdown](https://guides.github.com/features/mastering-markdown/) to write your content.</span><br></pre></td></tr></tbody></table></figure><h2 id="Configure-setup-metadata"><a class="header-anchor" href="#Configure-setup-metadata">¶</a><em>Configure setup metadata</em></h2><p>There are two types of setup metadata types:</p><ul><li>static setup metadata</li><li>dynamic setup metadata</li></ul><p><strong>The official recommendation is preferred for static metadata setup.cfg or <a href="http://setup.py">setup.py</a>.</strong></p><h3 id="Static-setup-metadata"><a class="header-anchor" href="#Static-setup-metadata">¶</a><em>Static setup metadata</em></h3><p>The following is an official example setup.cfg.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[metadata]</span><br><span class="line">name = example-pkg-YOUR-USERNAME-HERE</span><br><span class="line">version = <span class="number">0.0</span><span class="number">.1</span></span><br><span class="line">author = Example Author</span><br><span class="line">author_email = author@example.com</span><br><span class="line">description = A small example package</span><br><span class="line">long_description = file: README.md</span><br><span class="line">long_description_content_type = text/markdown</span><br><span class="line">url = https://github.com/pypa/sampleproject</span><br><span class="line">project_urls =</span><br><span class="line">    Bug Tracker = https://github.com/pypa/sampleproject/issues</span><br><span class="line">classifiers =</span><br><span class="line">    Programming Language :: Python :: <span class="number">3</span></span><br><span class="line">    License :: OSI Approved :: MIT License</span><br><span class="line">    Operating System :: OS Independent</span><br><span class="line"></span><br><span class="line">[options]</span><br><span class="line">package_dir = src</span><br><span class="line">packages = find:</span><br><span class="line">python_requires = &gt;=<span class="number">3.6</span></span><br><span class="line"></span><br><span class="line">[options.packages.find]</span><br><span class="line">where = src</span><br></pre></td></tr></tbody></table></figure><table><thead><tr><th>field</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>if you are publishing on <a href="http://pypi.org">pypi.org</a>, the name must be unique and can consist only of english letters, ,_-</td></tr><tr><td>author/email</td><td>Identifies the author</td></tr><tr><td>description</td><td>A short introduction to the package</td></tr><tr><td>long_description</td><td>A detailed description of the package, which can specify a description file</td></tr><tr><td>url</td><td>The project home page</td></tr><tr><td>project_urls</td><td>Additional links related to the project</td></tr><tr><td>classifiers</td><td>additional metadata, such as license, compatibility. see <a href="https://pypi.org/classifiers/">https://pypi.org/classifiers/</a> for a full list</td></tr></tbody></table><h3 id="Dynamic-setup-metadata"><a class="header-anchor" href="#Dynamic-setup-metadata">¶</a><em>Dynamic setup metadata</em></h3><p>The official example, as can be seen, is essentially the same and can also be written using a ready-made template <a href="http://setup.py">setup.py</a> as <a href="https://github.com/absentm/akparse/blob/main/setup.py">[4]</a></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> setuptools</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"README.md"</span>, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> fh:</span><br><span class="line">    long_description = fh.read()</span><br><span class="line"></span><br><span class="line">setuptools.setup(</span><br><span class="line">    name=<span class="string">"example-pkg-YOUR-USERNAME-HERE"</span>,</span><br><span class="line">    version=<span class="string">"0.0.1"</span>,</span><br><span class="line">    author=<span class="string">"Example Author"</span>,</span><br><span class="line">    author_email=<span class="string">"author@example.com"</span>,</span><br><span class="line">    description=<span class="string">"A small example package"</span>,</span><br><span class="line">    long_description=long_description,</span><br><span class="line">    long_description_content_type=<span class="string">"text/markdown"</span>,</span><br><span class="line">    url=<span class="string">"https://github.com/pypa/sampleproject"</span>,</span><br><span class="line">    project_urls={</span><br><span class="line">        <span class="string">"Bug Tracker"</span>: <span class="string">"https://github.com/pypa/sampleproject/issues"</span>,</span><br><span class="line">    },</span><br><span class="line">    classifiers=[</span><br><span class="line">        <span class="string">"Programming Language :: Python :: 3"</span>,</span><br><span class="line">        <span class="string">"License :: OSI Approved :: MIT License"</span>,</span><br><span class="line">        <span class="string">"Operating System :: OS Independent"</span>,</span><br><span class="line">    ],</span><br><span class="line">    package_dir={<span class="string">""</span>: <span class="string">"src"</span>},</span><br><span class="line">    packages=setuptools.find_packages(where=<span class="string">"src"</span>),</span><br><span class="line">    python_requires=<span class="string">"&gt;=3.6"</span>,</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure><p>In fact, it can be understood as an ini file that contains the default options of the command with setup.cfg or <a href="http://setup.py">setup.py</a></p><h2 id="Prepare-venv"><a class="header-anchor" href="#Prepare-venv">¶</a><em>Prepare venv</em></h2><p>We also have Ubuntu 20.04 Server (Python 3.8.10) in Win10 WSL-2, creates and uses virtual environments 「venv」</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install venv</span></span><br><span class="line">sudo apt install python3-venv -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create venv</span></span><br><span class="line">mkdir code</span><br><span class="line">python -m venv /home/xxx/code</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">activate</span></span><br><span class="line">source /home/xxx/code/bin/activate</span><br></pre></td></tr></tbody></table></figure><h2 id="Build-package"><a class="header-anchor" href="#Build-package">¶</a><em>Build package</em></h2><p>Use the following configuration file <a href="http://setup.py">setup.py</a></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> setuptools</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"README.md"</span>, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> fh:</span><br><span class="line">    long_description = fh.read()</span><br><span class="line"></span><br><span class="line">setuptools.setup(</span><br><span class="line">    name=<span class="string">"my_project"</span>,</span><br><span class="line">    version=<span class="string">"0.0.1"</span>,</span><br><span class="line">    author=<span class="string">"xxxx"</span>,</span><br><span class="line">    author_email=<span class="string">"xxxxx@xxx.com"</span>,</span><br><span class="line">    description=<span class="string">"A small example package"</span>,</span><br><span class="line">    long_description=long_description,</span><br><span class="line">    long_description_content_type=<span class="string">"text/markdown"</span>,</span><br><span class="line">    url=<span class="string">"https://github.com/xxxx"</span>,</span><br><span class="line">    classifiers=[</span><br><span class="line">        <span class="string">"Programming Language :: Python :: 3"</span>,</span><br><span class="line">        <span class="string">"License :: OSI Approved :: MIT License"</span>,</span><br><span class="line">        <span class="string">"Operating System :: OS Independent"</span>,</span><br><span class="line">    ],</span><br><span class="line">    packages=setuptools.find_packages(),</span><br><span class="line">    python_requires=<span class="string">"&gt;=3.6"</span>,</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure><p>Install setuptools and wheel which support building packages from source code. <a href="https://packaging.python.org/en/latest/guides/distributing-packages-using-setuptools/">[5]</a></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install setuptools</span><br><span class="line">pip install wheel</span><br></pre></td></tr></tbody></table></figure><p>Go to the packaging folder, check <a href="http://setup.py">setup.py</a>, and if there is an error, a prompt message will be printed.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">running check</span></span><br><span class="line">python setup.py check</span><br></pre></td></tr></tbody></table></figure><p>Packaging to .tar.gz or wheel, automatic creation of directories, and corresponding file sdist. <a href="https://zhuanlan.zhihu.com/p/161930778">[6]</a></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">build to .tar.gz</span></span><br><span class="line">python setup.py sdist build</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or build to wheel</span></span><br><span class="line">python setup.py sdist bdist_wheel </span><br></pre></td></tr></tbody></table></figure><h1 id="PyPI-Published"><a class="header-anchor" href="#PyPI-Published">¶</a><em>PyPI Published</em></h1><p>So far, we have completed the packaging of the project. Next, we need to publish the packaging module to pypi or our own private server.</p><h2 id="Official-PyPI-server"><a class="header-anchor" href="#Official-PyPI-server">¶</a><em>Official PyPI server</em></h2><p>When we use official PyPI server, We need to register an account first in <a href="https://pypi.org/account/register/">[7]</a></p><p>Then to install twine to upload packages.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install twine</span><br></pre></td></tr></tbody></table></figure><p>Next to input account info and finish upload.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">twine upload dist/*</span><br></pre></td></tr></tbody></table></figure><h2 id="Local-PyPI-server"><a class="header-anchor" href="#Local-PyPI-server">¶</a><em>Local PyPI server</em></h2><p>Install and create a folder to place the published package pypiserver packages. <a href="https://github.com/pypiserver/pypiserver">[8]</a></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install pypiserver</span><br><span class="line">mkdir ~/packages</span><br></pre></td></tr></tbody></table></figure><p>Upload to directory, mv operate directly on the same virtual machine my_project-0.0.1.tar.gz to ~/packages.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv dist/my_project-0.0.1.tar.gz ~/packages</span><br></pre></td></tr></tbody></table></figure><p>Run the server, the port specified as 8080, listens to all ip addresses by default 8080.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pypi-server -p 8080 ~/packages &amp;</span><br></pre></td></tr></tbody></table></figure><h1 id="Test"><a class="header-anchor" href="#Test">¶</a><em>Test</em></h1><p>Search for packages on the local server my_project or PyPI</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">official server</span></span><br><span class="line">pip search my_project</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">local</span> server</span></span><br><span class="line">pip search --index http://localhost:8080 my_project</span><br></pre></td></tr></tbody></table></figure><p>Install and use the package my_project.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install from official server</span></span><br><span class="line">pip install my_project</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install from <span class="built_in">local</span> server</span></span><br><span class="line">pip install --extra-index-url http://localhost:8080 my_project</span><br></pre></td></tr></tbody></table></figure><h1 id="Reference"><a class="header-anchor" href="#Reference">¶</a><em>Reference</em></h1><p>[1] <a href="https://packaging.python.org/en/latest/tutorials/packaging-projects/">https://packaging.python.org/en/latest/tutorials/packaging-projects/</a><br>[2] <a href="https://pythonguidecn.readthedocs.io/zh/latest/writing/structure.html">https://pythonguidecn.readthedocs.io/zh/latest/writing/structure.html</a><br>[3] <a href="https://choosealicense.com/">https://choosealicense.com/</a><br>[4] <a href="https://github.com/absentm/akparse/blob/main/setup.py">https://github.com/absentm/akparse/blob/main/setup.py</a><br>[5] <a href="https://packaging.python.org/en/latest/guides/distributing-packages-using-setuptools/">https://packaging.python.org/en/latest/guides/distributing-packages-using-setuptools/</a><br>[6] <a href="https://zhuanlan.zhihu.com/p/161930778">https://zhuanlan.zhihu.com/p/161930778</a><br>[7] <a href="https://pypi.org/account/register/">https://pypi.org/account/register/</a><br>[8] <a href="https://github.com/pypiserver/pypiserver">https://github.com/pypiserver/pypiserver</a></p><h1 id="END"><a class="header-anchor" href="#END">¶</a><em>END</em></h1><hr>]]></content>
      
      
      <categories>
          
          <category> Python Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Growth</title>
      <link href="/2021/12/31/Growth/"/>
      <url>/2021/12/31/Growth/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><blockquote><p>Yesterday, bye! In the next decade, we will move forward bravely!<br>– 2021.12.31 于 INSPUR 跨年夜前夕</p></blockquote><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Growth-uer.png" alt="Growth"></p><!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=403710395&auto=1&height=66"></iframe> --><audio src="/images/Growth-xin-mbc.mp3" controls="controls" preload="preload" autoplay="autoplay">Your browser does not support the audio element.</audio><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to config maven in windows?</title>
      <link href="/2021/06/23/How-to-config-maven-in-windows/"/>
      <url>/2021/06/23/How-to-config-maven-in-windows/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h1 id="Preface"><a class="header-anchor" href="#Preface">¶</a>Preface</h1><hr><p><strong>Funeral Blues</strong></p><blockquote><p>He was my North, my South, my East and West.</p><p>My working week and my Sunday rest, My noon, my midnight, my talk, my song;</p><p>I thought that love would last forever;</p><p>I was wrong.</p></blockquote><p><strong>忧郁的赞礼</strong></p><blockquote><p>他曾是我的四面八方</p><p>我的工作日，我的礼拜天</p><p>我的正午，我的半夜，我的呢喃，我的歌唱</p><p>我以为爱都能恒久流长</p><p>现在看来多么荒唐</p></blockquote><p>Recently, I got a new PROBOOK, and the development environment had to be reconfigured. To facilitate querying, the Maven configuration under Windows 10 is recorded here.</p><p>In the flowing you can know:</p><ul><li>how to config maven in a local machine.</li><li>how to fast maven download.</li></ul><h1 id="Install"><a class="header-anchor" href="#Install">¶</a>Install</h1><hr><p>You can download it from the following URL <a href="https://maven.apache.org/download.cgi">Maven</a> and unzip it to your local directory.</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/maven-path.png" alt="Maven Path"></p><h1 id="System-Path"><a class="header-anchor" href="#System-Path">¶</a>System Path</h1><hr><p>Then, we should config system path with MAVEN_HOME and system path, just looks like this:</p><ul><li>MAVEN_HOME</li></ul><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Maven-home.png" alt="Maven_home"></p><ul><li>System Path</li></ul><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Maven-system-path.png" alt="Maven system_path"></p><h1 id="Test"><a class="header-anchor" href="#Test">¶</a>Test</h1><hr><p>key in mvn -version of CMD shell, and see the result.</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/maven-test.png" alt="Maven test"></p><h1 id="Accelerate"><a class="header-anchor" href="#Accelerate">¶</a>Accelerate</h1><hr><p>We can modify the configuration of maven, specify the jar download location, configure the local warehouse, and use Alibaba cloud image to accelerate the download speed.</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Maven-conf.png" alt="Maven conf"></p><h2 id="Specify-download-location"><a class="header-anchor" href="#Specify-download-location">¶</a>Specify download location</h2><hr><p>Write this code into maven configuration settings to specify the jar download location.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;localRepository&gt;D:\DevEnvs\repository&lt;/localRepository&gt;`</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Maven-location.png" alt="Maven location"></p><h2 id="Alibaba-cloud-image"><a class="header-anchor" href="#Alibaba-cloud-image">¶</a>Alibaba cloud image</h2><hr><p>Write this code into maven configuration settings mirrors tag to accelerate the download speed with Alibaba cloud image.</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">    &lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">    &lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central/&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Maven-ali.png" alt="Maven ali"></p><h1 id="Others"><a class="header-anchor" href="#Others">¶</a>Others</h1><hr><p><strong>If the settings.xml is not existed, please create o new one.</strong></p><p>The content example just as follows:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">distributed with this work for additional information</span></span><br><span class="line"><span class="comment">regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">"License"); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">under the License.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> | This is the configuration file for Maven. It can be specified at two levels:</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |  1. User Level. This settings.xml file provides configuration for a single user,</span></span><br><span class="line"><span class="comment"> |                 and is normally provided in ${user.home}/.m2/settings.xml.</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 <span class="doctag">NOTE:</span> This location can be overridden with the CLI option:</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 -s /path/to/user/settings.xml</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |  2. Global Level. This settings.xml file provides configuration for all Maven</span></span><br><span class="line"><span class="comment"> |                 users on a machine (assuming they're all using the same Maven</span></span><br><span class="line"><span class="comment"> |                 installation). It's normally provided in</span></span><br><span class="line"><span class="comment"> |                 ${maven.conf}/settings.xml.</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 <span class="doctag">NOTE:</span> This location can be overridden with the CLI option:</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |                 -gs /path/to/global/settings.xml</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> | The sections in this sample file are intended to give you a running start at</span></span><br><span class="line"><span class="comment"> | getting the most out of your Maven installation. Where appropriate, the default</span></span><br><span class="line"><span class="comment"> | values (values used when the setting is not specified) are provided.</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> |--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/SETTINGS/1.2.0"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- localRepository</span></span><br><span class="line"><span class="comment">   | The path to the local repository maven will use to store artifacts.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | Default: ${user.home}/.m2/repository</span></span><br><span class="line"><span class="comment">  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:\DevEnvs\repository<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- interactiveMode</span></span><br><span class="line"><span class="comment">   | This will determine whether maven prompts you when it needs input. If set to false,</span></span><br><span class="line"><span class="comment">   | maven will use a sensible default value, perhaps based on some other setting, for</span></span><br><span class="line"><span class="comment">   | the parameter in question.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | Default: true</span></span><br><span class="line"><span class="comment">  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- offline</span></span><br><span class="line"><span class="comment">   | Determines whether maven should attempt to connect to the network when executing a build.</span></span><br><span class="line"><span class="comment">   | This will have an effect on artifact downloads, artifact deployment, and others.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | Default: false</span></span><br><span class="line"><span class="comment">  &lt;offline&gt;false&lt;/offline&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- pluginGroups</span></span><br><span class="line"><span class="comment">   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.</span></span><br><span class="line"><span class="comment">   | when invoking a command line like "mvn prefix:goal". Maven will automatically add the group identifiers</span></span><br><span class="line"><span class="comment">   | "org.apache.maven.plugins" and "org.codehaus.mojo" if these are not already contained in the list.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pluginGroups</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- pluginGroup</span></span><br><span class="line"><span class="comment">     | Specifies a further group identifier to use for plugin lookup.</span></span><br><span class="line"><span class="comment">    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">pluginGroups</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- proxies</span></span><br><span class="line"><span class="comment">   | This is a list of proxies which can be used on this machine to connect to the network.</span></span><br><span class="line"><span class="comment">   | Unless otherwise specified (by system property or command-line switch), the first proxy</span></span><br><span class="line"><span class="comment">   | specification in this list marked as active will be used.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">proxies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- proxy</span></span><br><span class="line"><span class="comment">     | Specification for one proxy, to be used in connecting to the network.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;proxy&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;optional&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;active&gt;true&lt;/active&gt;</span></span><br><span class="line"><span class="comment">      &lt;protocol&gt;http&lt;/protocol&gt;</span></span><br><span class="line"><span class="comment">      &lt;username&gt;proxyuser&lt;/username&gt;</span></span><br><span class="line"><span class="comment">      &lt;password&gt;proxypass&lt;/password&gt;</span></span><br><span class="line"><span class="comment">      &lt;host&gt;proxy.host.net&lt;/host&gt;</span></span><br><span class="line"><span class="comment">      &lt;port&gt;80&lt;/port&gt;</span></span><br><span class="line"><span class="comment">      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;</span></span><br><span class="line"><span class="comment">    &lt;/proxy&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">proxies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- servers</span></span><br><span class="line"><span class="comment">   | This is a list of authentication profiles, keyed by the server-id used within the system.</span></span><br><span class="line"><span class="comment">   | Authentication profiles can be used whenever maven must make a connection to a remote server.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- server</span></span><br><span class="line"><span class="comment">     | Specifies the authentication information to use when connecting to a particular server, identified by</span></span><br><span class="line"><span class="comment">     | a unique name within the system (referred to by the 'id' attribute below).</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | <span class="doctag">NOTE:</span> You should either specify username/password OR privateKey/passphrase, since these pairings are</span></span><br><span class="line"><span class="comment">     |       used together.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;server&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;deploymentRepo&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;username&gt;repouser&lt;/username&gt;</span></span><br><span class="line"><span class="comment">      &lt;password&gt;repopwd&lt;/password&gt;</span></span><br><span class="line"><span class="comment">    &lt;/server&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Another sample, using keys to authenticate.</span></span><br><span class="line"><span class="comment">    &lt;server&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;siteServer&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;privateKey&gt;/path/to/private/key&lt;/privateKey&gt;</span></span><br><span class="line"><span class="comment">      &lt;passphrase&gt;optional; leave empty if not used.&lt;/passphrase&gt;</span></span><br><span class="line"><span class="comment">    &lt;/server&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- mirrors</span></span><br><span class="line"><span class="comment">   | This is a list of mirrors to be used in downloading artifacts from remote repositories.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | It works like this: a POM may declare a repository to use in resolving certain artifacts.</span></span><br><span class="line"><span class="comment">   | However, this repository may have problems with heavy traffic at times, so people have mirrored</span></span><br><span class="line"><span class="comment">   | it to several places.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | That repository definition will have a unique id, so we can create a mirror reference for that</span></span><br><span class="line"><span class="comment">   | repository, to be used as an alternate download site. The mirror site will be the preferred</span></span><br><span class="line"><span class="comment">   | server for that repository.</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mirror</span></span><br><span class="line"><span class="comment">     | Specifies a repository mirror site to use instead of a given repository. The repository that</span></span><br><span class="line"><span class="comment">     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used</span></span><br><span class="line"><span class="comment">     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;mirror&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;mirrorId&lt;/id&gt;</span></span><br><span class="line"><span class="comment">      &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;</span></span><br><span class="line"><span class="comment">      &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span></span><br><span class="line"><span class="comment">      &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;</span></span><br><span class="line"><span class="comment">    &lt;/mirror&gt;</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- profiles</span></span><br><span class="line"><span class="comment">   | This is a list of profiles which can be activated in a variety of ways, and which can modify</span></span><br><span class="line"><span class="comment">   | the build process. Profiles provided in the settings.xml are intended to provide local machine-</span></span><br><span class="line"><span class="comment">   | specific paths and repository locations which allow the build to work in the local environment.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | For example, if you have an integration testing plugin - like cactus - that needs to know where</span></span><br><span class="line"><span class="comment">   | your Tomcat instance is installed, you can provide a variable here such that the variable is</span></span><br><span class="line"><span class="comment">   | dereferenced during the build process to configure the cactus plugin.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles</span></span><br><span class="line"><span class="comment">   | section of this document (settings.xml) - will be discussed later. Another way essentially</span></span><br><span class="line"><span class="comment">   | relies on the detection of a system property, either matching a particular value for the property,</span></span><br><span class="line"><span class="comment">   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a</span></span><br><span class="line"><span class="comment">   | value of '1.4' might activate a profile when the build is executed on a JDK version of '1.4.2_07'.</span></span><br><span class="line"><span class="comment">   | Finally, the list of active profiles can be specified directly from the command line.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | <span class="doctag">NOTE:</span> For profiles defined in the settings.xml, you are restricted to specifying only artifact</span></span><br><span class="line"><span class="comment">   |       repositories, plugin repositories, and free-form properties to be used as configuration</span></span><br><span class="line"><span class="comment">   |       variables for plugins in the POM.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   |--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- profile</span></span><br><span class="line"><span class="comment">     | Specifies a set of introductions to the build process, to be activated using one or more of the</span></span><br><span class="line"><span class="comment">     | mechanisms described above. For inheritance purposes, and to activate profiles via &lt;activatedProfiles/&gt;</span></span><br><span class="line"><span class="comment">     | or the command line, profiles have to have an ID that is unique.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | An encouraged best practice for profile identification is to use a consistent naming convention</span></span><br><span class="line"><span class="comment">     | for profiles, such as 'env-dev', 'env-test', 'env-production', 'user-jdcasey', 'user-brett', etc.</span></span><br><span class="line"><span class="comment">     | This will make it more intuitive to understand what the set of introduced profiles is attempting</span></span><br><span class="line"><span class="comment">     | to accomplish, particularly when you only have a list of profile id's for debug.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.</span></span><br><span class="line"><span class="comment">    &lt;profile&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;jdk-1.4&lt;/id&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;activation&gt;</span></span><br><span class="line"><span class="comment">        &lt;jdk&gt;1.4&lt;/jdk&gt;</span></span><br><span class="line"><span class="comment">      &lt;/activation&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;repositories&gt;</span></span><br><span class="line"><span class="comment">        &lt;repository&gt;</span></span><br><span class="line"><span class="comment">          &lt;id&gt;jdk14&lt;/id&gt;</span></span><br><span class="line"><span class="comment">          &lt;name&gt;Repository for JDK 1.4 builds&lt;/name&gt;</span></span><br><span class="line"><span class="comment">          &lt;url&gt;http://www.myhost.com/maven/jdk14&lt;/url&gt;</span></span><br><span class="line"><span class="comment">          &lt;layout&gt;default&lt;/layout&gt;</span></span><br><span class="line"><span class="comment">          &lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt;</span></span><br><span class="line"><span class="comment">        &lt;/repository&gt;</span></span><br><span class="line"><span class="comment">      &lt;/repositories&gt;</span></span><br><span class="line"><span class="comment">    &lt;/profile&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     | Here is another profile, activated by the system property 'target-env' with a value of 'dev',</span></span><br><span class="line"><span class="comment">     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration</span></span><br><span class="line"><span class="comment">     | might hypothetically look like:</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | ...</span></span><br><span class="line"><span class="comment">     | &lt;plugin&gt;</span></span><br><span class="line"><span class="comment">     |   &lt;groupId&gt;org.myco.myplugins&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">     |   &lt;artifactId&gt;myplugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     |   &lt;configuration&gt;</span></span><br><span class="line"><span class="comment">     |     &lt;tomcatLocation&gt;${tomcatPath}&lt;/tomcatLocation&gt;</span></span><br><span class="line"><span class="comment">     |   &lt;/configuration&gt;</span></span><br><span class="line"><span class="comment">     | &lt;/plugin&gt;</span></span><br><span class="line"><span class="comment">     | ...</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">     | <span class="doctag">NOTE:</span> If you just wanted to inject this configuration whenever someone set 'target-env' to</span></span><br><span class="line"><span class="comment">     |       anything, you could just leave off the &lt;value/&gt; inside the activation-property.</span></span><br><span class="line"><span class="comment">     |</span></span><br><span class="line"><span class="comment">    &lt;profile&gt;</span></span><br><span class="line"><span class="comment">      &lt;id&gt;env-dev&lt;/id&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;activation&gt;</span></span><br><span class="line"><span class="comment">        &lt;property&gt;</span></span><br><span class="line"><span class="comment">          &lt;name&gt;target-env&lt;/name&gt;</span></span><br><span class="line"><span class="comment">          &lt;value&gt;dev&lt;/value&gt;</span></span><br><span class="line"><span class="comment">        &lt;/property&gt;</span></span><br><span class="line"><span class="comment">      &lt;/activation&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      &lt;properties&gt;</span></span><br><span class="line"><span class="comment">        &lt;tomcatPath&gt;/path/to/tomcat/instance&lt;/tomcatPath&gt;</span></span><br><span class="line"><span class="comment">      &lt;/properties&gt;</span></span><br><span class="line"><span class="comment">    &lt;/profile&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- activeProfiles</span></span><br><span class="line"><span class="comment">   | List of profiles that are active for all builds.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">  &lt;activeProfiles&gt;</span></span><br><span class="line"><span class="comment">    &lt;activeProfile&gt;alwaysActiveProfile&lt;/activeProfile&gt;</span></span><br><span class="line"><span class="comment">    &lt;activeProfile&gt;anotherAlwaysActiveProfile&lt;/activeProfile&gt;</span></span><br><span class="line"><span class="comment">  &lt;/activeProfiles&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h1 id="END"><a class="header-anchor" href="#END">¶</a>END</h1><hr>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The note of how to rebuild hexo+next blogs when switch to another PC or reinstall system</title>
      <link href="/2021/05/31/The-note-of-how-to-rebuild-hexo-next-blogs-when-switch-to-another-PC-or-reinstall-system/"/>
      <url>/2021/05/31/The-note-of-how-to-rebuild-hexo-next-blogs-when-switch-to-another-PC-or-reinstall-system/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="Preface"><a class="header-anchor" href="#Preface">¶</a>Preface</h2><p>We have pointed out using git to backup our blogs’ content in the before articles: <a href="https://absentm.github.io/2018/06/19/Git-GitHub-Hexo%E6%90%AD%E5%BB%BA%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2%E4%B9%8B%E7%BB%BC%E8%BF%B0/">Use Hexo+Next+git build a blog system in GitHub page</a>. The following will show the details of how to rebuild hexo+next blogs when switch to another PC or reinstall system.</p><h2 id="Clone-the-backup-files"><a class="header-anchor" href="#Clone-the-backup-files">¶</a>Clone the backup files</h2><p>I use the Linux system and have installed git service, so I can use git to clone my blog content from my private repository in csdn code:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://gitee.com/absentm/hexo-note.git</span><br></pre></td></tr></tbody></table></figure><h2 id="Download-and-install-node-and-npm"><a class="header-anchor" href="#Download-and-install-node-and-npm">¶</a>Download and install node and npm</h2><p><strong>Note:</strong> please use nodejs version 12.2.0 <a href="https://nodejs.org/download/release/v12.2.0/">v12.2.0</a></p><p>Please visit these page to look for the details:<a href="https://nodejs.org/">node website</a> and <a href="https://github.com/nodesource/distributions#debinstall">Install DOC</a></p><p>Install nodejs in ubuntu:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></tbody></table></figure><p>If you want to update inside npm, do</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo npm cache clean -f</span><br><span class="line">sudo npm install -g n</span><br><span class="line">sudo n stable</span><br></pre></td></tr></tbody></table></figure><h2 id="Set-npm-source-from-taobao"><a class="header-anchor" href="#Set-npm-source-from-taobao">¶</a>Set npm source from taobao</h2><p>// Ubuntu</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Query npm registry</span><br><span class="line">npm get registry</span><br><span class="line"> </span><br><span class="line"># Set to taobao</span><br><span class="line">npm config set registry https://registry.npmmirror.com/</span><br><span class="line"> </span><br><span class="line"># set to default</span><br><span class="line"># npm config set registry https://registry.npmjs.org/</span><br><span class="line"></span><br><span class="line">sudo npm install -g npm --registry=https://registry.npmmirror.com/</span><br><span class="line">sudo npm install -g cnpm --registry=https://registry.npmmirror.com/</span><br><span class="line">sudo npm install -g bower --registry=https://registry.npmmirror.com/</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="Install-hexo-and-Plugins-we-need"><a class="header-anchor" href="#Install-hexo-and-Plugins-we-need">¶</a>Install hexo and Plugins we need</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// install hexo</span><br><span class="line">sudo npm install -g hexo-cli</span><br><span class="line"></span><br><span class="line">// switch dir</span><br><span class="line">cd /hexo-notes/notes</span><br><span class="line"></span><br><span class="line">// npm install</span><br><span class="line">sudo npm install</span><br><span class="line">sudo npm install hexo-deployer-git --save</span><br></pre></td></tr></tbody></table></figure><h3 id="Install-email-remind-Plugins"><a class="header-anchor" href="#Install-email-remind-Plugins">¶</a>Install email remind Plugins</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cd /hexo-notes/notes/emailCallbak</span><br><span class="line"></span><br><span class="line">// ensure emailCallbak dir is null,</span><br><span class="line">// or will get error: npm ERR! ENOTEMPTY: directory not empty</span><br><span class="line">mv adduser.js /home/dm/</span><br><span class="line"></span><br><span class="line">// install request</span><br><span class="line">sudo npm install --save-dev request</span><br><span class="line"></span><br><span class="line">// move back</span><br><span class="line">mv /home/dm/adduser.js .</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="Install-article-visit-count-Plugins"><a class="header-anchor" href="#Install-article-visit-count-Plugins">¶</a>Install article visit count Plugins</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install --save hexo-generator-index</span><br><span class="line">sudo npm install --save hexo-generator-archive</span><br><span class="line">sudo npm install --save hexo-generator-tag</span><br></pre></td></tr></tbody></table></figure><h3 id="Install-article-word-count-and-read-time-Plugins"><a class="header-anchor" href="#Install-article-word-count-and-read-time-Plugins">¶</a>Install article word count and read time Plugins</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install hexo-symbols-count-time --save</span><br></pre></td></tr></tbody></table></figure><h3 id="Install-hexo-renderer-markdown-it"><a class="header-anchor" href="#Install-hexo-renderer-markdown-it">¶</a>Install hexo-renderer-markdown-it</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">See it <span class="keyword">in</span> links [2], [3]</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Remove old hexo-renderer-marked</span></span><br><span class="line">sudo npm un hexo-renderer-marked --save</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install new hexo-renderer-markdown-it</span></span><br><span class="line">sudo npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></tbody></table></figure><h3 id="Install-hexo-tag-aplayer"><a class="header-anchor" href="#Install-hexo-tag-aplayer">¶</a>Install hexo-tag-aplayer</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">See it <span class="keyword">in</span> links [4]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install hexo-tag-aplayer</span></span><br><span class="line">sudo npm install hexo-tag-aplayer -s</span><br></pre></td></tr></tbody></table></figure><h3 id="Install-sitemap-Plugins"><a class="header-anchor" href="#Install-sitemap-Plugins">¶</a>Install sitemap Plugins</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install hexo-generator-sitemap --save</span><br></pre></td></tr></tbody></table></figure><p><strong>Note if meet the error as following:</strong></p><blockquote><p>if npm ERR! ENOTEMPTY: directory not empty, rename ‘/home/dm/hexo-notes/notes/node_modules/hexo-generator-sitemap’ -&gt; ‘/home/dm/hexo-notes/notes/node_modules/.hexo-generator-sitemap.DELETE’</p></blockquote><p><strong>Solution:</strong> please rm -rf *.DELETE and reinstall.</p><h2 id="Deploy"><a class="header-anchor" href="#Deploy">¶</a>Deploy</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /hexo-notes/notes/</span><br><span class="line"></span><br><span class="line">// clean</span><br><span class="line">sudo hexo clean</span><br><span class="line"></span><br><span class="line">// deploy</span><br><span class="line">sudo hexo g -d </span><br></pre></td></tr></tbody></table></figure><h2 id="Publish-new-article"><a class="header-anchor" href="#Publish-new-article">¶</a>Publish new article</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd /hexo-notes/notes/</span><br><span class="line"></span><br><span class="line">// generate new article</span><br><span class="line">sudo hexo n "article name"</span><br><span class="line"></span><br><span class="line">~~~~ writing ~~~~</span><br><span class="line"></span><br><span class="line">// after finished article, Deploy</span><br><span class="line">sudo hexo clean</span><br><span class="line">sudo hexo g -d </span><br></pre></td></tr></tbody></table></figure><h2 id="Issues"><a class="header-anchor" href="#Issues">¶</a>Issues</h2><p><strong>1/</strong> bash: /dev/tty: No such device or address</p><p>if you deploy again, and meet the error follow:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">bash: /dev/tty: No such device or address</span><br><span class="line"></span><br><span class="line">error: failed to execute prompt script (exit code 1)</span><br><span class="line"></span><br><span class="line">fatal: could not read Username for 'https://github.com': No error</span><br><span class="line"></span><br><span class="line">FATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/trouble...</span><br><span class="line"></span><br><span class="line">Error: bash: /dev/tty: No such device or address</span><br><span class="line"></span><br><span class="line">error: failed to execute prompt script (exit code 1)</span><br><span class="line"></span><br><span class="line">fatal: could not read Username for 'https://github.com': No error</span><br><span class="line"></span><br><span class="line">at ChildProcess.&lt;anonymous&gt; (E:\zan\www\gitpages\hexo\xxxxx.github.io\node_modules\hexo-deployer-git\node_modules\hexo-util\lib\spawn.js:42:17)</span><br><span class="line"></span><br><span class="line">at emitTwo (events.js:87:13)</span><br><span class="line"></span><br><span class="line">at ChildProcess.emit (events.js:172:7)</span><br><span class="line"></span><br><span class="line">at maybeClose (internal/child_process.js:818:16)</span><br><span class="line"></span><br><span class="line">at Process.ChildProcess._handle.onexit (internal/child_process.js:211:5)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>Solution:</strong></p><p>reinstall hexo-deployer-git:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></tbody></table></figure><p><strong>2/</strong> use ssh with git</p><p>https met error or is slow, please use ssh for git.</p><h2 id="Reference"><a class="header-anchor" href="#Reference">¶</a>Reference</h2><p>[1] <a href="https://hexo.io/docs/troubleshooting.html">https://hexo.io/docs/troubleshooting.html</a><br>[2] <a href="https://www.jianshu.com/p/f9e57ecca150">https://www.jianshu.com/p/f9e57ecca150</a><br>[3] <a href="https://github.com/hexojs/hexo-renderer-markdown-it">https://github.com/hexojs/hexo-renderer-markdown-it</a><br>[4] <a href="https://easyhexo.com/3-Plugins-use-and-config/3-1-hexo-tag-aplayer/#%E4%BB%8B%E7%BB%8D">https://easyhexo.com/3-Plugins-use-and-config/3-1-hexo-tag-aplayer/#介绍</a></p><hr><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何使用一套键鼠同时控制多台电脑</title>
      <link href="/2021/03/23/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E4%B8%80%E5%A5%97%E9%94%AE%E9%BC%A0%E5%90%8C%E6%97%B6%E6%8E%A7%E5%88%B6%E5%A4%9A%E5%8F%B0%E7%94%B5%E8%84%91/"/>
      <url>/2021/03/23/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E4%B8%80%E5%A5%97%E9%94%AE%E9%BC%A0%E5%90%8C%E6%97%B6%E6%8E%A7%E5%88%B6%E5%A4%9A%E5%8F%B0%E7%94%B5%E8%84%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>平时工作中，我们难免需要使用多台电脑同时协作办公. 这是在同一张桌面上摆放多个键盘鼠标，显得那么地冗余和不方便. 怎样使用一套键盘和鼠标同时控制多台电脑呢？这将是本文中主要讨论和解决的问题.</p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><p>其实，解决以上问题，仅需使用软件即可. 目前，应用比较广泛的是 <a href="http://symless.com/synergy/">Synergy</a> 和微软的 <a href="https://www.microsoft.com/en-us/download/details.aspx?id=35460">Mouse without Borders</a> .</p><ul><li><p>Synergy: 跨平台同时支持Linux, macOS和Windows. 安装时，不管哪个平台都需要安装同一个版本（版本号必须相同）, 支持键鼠操作和文本复制，但我用的破解版文本复制功能效果不太好;</p></li><li><p>Mouse without Borders: 仅支持Windows系统, 同时支持键鼠操作，文本复制和文件复制（但文件大小有限制），效果较好；但不能跨平台使用．</p></li></ul><p><strong>需要注意, 使用以上软件必须一个重要的前提: 必须在同一个局域网中.</strong></p><hr><h2 id="我的配置"><a class="header-anchor" href="#我的配置">¶</a>我的配置</h2><p>下图展示的是目前实验室我的桌面：三台计算机，其中两台台式机和一台笔记本．为了方便说明, 按照图中计算机的位置，从左往右依次编号１，２，３．</p><ul><li>1号PC: windows10 和 Kubuntu-16.04双系统, IP: 192.168.0.100, 客户端；</li><li>2号PC: windows10 和 ubuntu-14.04双系统, IP: 192.168.0.101, 服务端；</li><li>3号PC: windows10 和 ubuntu-14.04双系统, IP: 192.168.0.102, 客户端；</li></ul><p>可以看到，桌面上只有一套键盘和鼠标同时控制３台计算机． 1号PC后边隐藏着一个路由器，用来建立3台PC在同一个局域网.</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/my-desktop.jpg" alt="我的桌面展示"></p><hr><h2 id="Synergy安装和配置"><a class="header-anchor" href="#Synergy安装和配置">¶</a>Synergy安装和配置</h2><p>Synergy必须使用同一个版本，即版本号必须相同，这里提供下载地址：</p><ul><li>Synergy1.7.2-Windows-32位: <a href="https://yunpan.cn/cMFfWAqxDrVLv">https://yunpan.cn/cMFfWAqxDrVLv</a>  访问密码 bcd8</li><li>Synergy1.7.2-Linux-32位(.deb包): <a href="https://yunpan.cn/cMFfDzmPGBSEN">https://yunpan.cn/cMFfDzmPGBSEN</a>  访问密码 edd3</li></ul><p>下载后，直接点击傻瓜式安装. 当前设置2号PC(Linux和Windows下)都设置为服务端，其他1号和3号PC设置为客户端，可有下图说明：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/synergy.png" alt="Synergy服务端设置"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Synergy-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%85%8D%E7%BD%AE%E5%9B%BE.png" alt="Synergy服务端设置"></p><p><strong>注意：以下这些细节必须注意：</strong></p><ul><li>在客户端（1号和3号PC设置为客户端），填写服务端的IP;</li><li>服务端的屏幕名称和客户端的屏幕名称必须保持一致，可点击Synergy软件:编辑 | 设置 | 屏幕名称，修改．</li></ul><hr><h2 id="Mouse-without-Borders安装和配置"><a class="header-anchor" href="#Mouse-without-Borders安装和配置">¶</a>Mouse without Borders安装和配置</h2><p>Mouse without Borders只能在windwos系统下使用，所以必须保证两台PC必须都是windwos系统，windows系统下的安装就更加简单了，下载后直接安装，同样设置一台为服务端，一台为客户端．</p><p>下载地址：</p><ul><li>微软官方下载地址: <a href="https://www.microsoft.com/en-us/download/details.aspx?id=35460">https://www.microsoft.com/en-us/download/details.aspx?id=35460</a></li><li>我的云盘下载地址: <a href="https://yunpan.cn/cMFJ9jeT57D5d">https://yunpan.cn/cMFJ9jeT57D5d</a>  访问密码 bc0f</li></ul><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/mousewithoutborders%E9%85%8D%E7%BD%AE%E5%9B%BE.PNG" alt="Mouse without Borders配置"></p><p><strong>注意: Mouse without Borders中会自动识别IP地址，两台PC连接时需要填写相同的 "Security key"即可．</strong></p><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1] <a href="http://www.iplaysoft.com/synergy.html">http://www.iplaysoft.com/synergy.html</a><br>[2] <a href="https://www.microsoft.com/en-us/download/confirmation.aspx?id=35460">https://www.microsoft.com/en-us/download/confirmation.aspx?id=35460</a></p><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2><hr>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
            <tag> Synergy </tag>
            
            <tag> Mouse without Borders </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 磁盘相关命令整理</title>
      <link href="/2021/02/10/Linux-%E7%A3%81%E7%9B%98%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/"/>
      <url>/2021/02/10/Linux-%E7%A3%81%E7%9B%98%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="介绍"><a class="header-anchor" href="#介绍">¶</a>介绍</h2><p>近来，接触底层的内容多了一些，顺手撸一个 「 磁盘 」 相关主线的命令行备份，记录在这里留作备忘 …</p><h2 id="涉及命令"><a class="header-anchor" href="#涉及命令">¶</a>涉及命令</h2><ul><li>lsblk: 罗列所有可用块设备的信息</li><li>blkid: 显示关于可用块设备的信息</li><li>sgdisk:</li><li>smartctl:</li><li>sas2ircu/sas3iru:</li></ul><h2 id="lsblk-命令"><a class="header-anchor" href="#lsblk-命令">¶</a>lsblk 命令</h2><blockquote><p>lsblk（列出块设备）命令用于列出所有可用块设备的信息，但是，它不会列出RAM盘的信息。块设备有硬盘，闪存盘，CD-ROM等等。 <a href="https://linux.cn/article-3340-1.html">引用自：参考资料 1</a></p></blockquote><p>lsblk 命令默认情况下将以 「 树状 」 列出所有块设备。在终端输入以下命令：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输出结果如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@AbsentM ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0 557.9G  0 disk </span><br><span class="line">├─sda1   8:1    0     1M  0 part </span><br><span class="line">├─sda2   8:2    0   500M  0 part /boot</span><br><span class="line">├─sda3   8:3    0 299.4G  0 part </span><br><span class="line">├─sda4   8:4    0     1K  0 part </span><br><span class="line">├─sda5   8:5    0  97.7G  0 part /</span><br><span class="line">├─sda6   8:6    0  97.7G  0 part /var/log</span><br><span class="line">├─sda7   8:7    0  62.5G  0 part [SWAP]</span><br><span class="line">└─sda8   8:8    0   196M  0 part /boot/efi</span><br><span class="line">sdb      8:16   0   200G  0 disk </span><br><span class="line">├─sdb1   8:17   0   150G  0 part /var/lib/cache</span><br><span class="line">└─sdb2   8:18   0    50G  0 part </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>7 个列的名称解释如下：</p><ul><li>NAME : 块设备名称。</li><li>MAJ:MIN : 显示主要和次要设备号。</li><li>RM : 显示设备是否可移动设备。 RM 值为 1, 表示为可移动设备。</li><li>SIZE : 列出设备的容量大小信息。</li><li>RO : 表明设备是否为只读。 RO 值为 0, 表示只读。</li><li>TYPE : 显示块设备是否是磁盘或磁盘上的一个分区。 disk 表示磁盘，part 表示分区，rom 表示只读存储器。</li><li>MOUNTPOINT : 显示设备挂载的挂载点。</li></ul><p>为了更直观的定制列、格式化输出展示信息，可以使用如下参数格式化输出：</p><ul><li>-o : output columns，定制列</li><li>-b : print SIZE in bytes rather than in human readable format</li><li>-l : use list format output</li><li>-p : print complate device path</li><li>-P : use key=“value” output format</li></ul><p>可定制的列名称为：</p><ul><li>NAME : device name</li><li>MOUNTPOINT : where the device is mounted</li><li>UUID : filesystem UUID</li><li>PARTUUID : partition UUID</li><li>SIZE : size of the device</li><li>TYPE : device type</li><li>STATE : state of the device</li><li>ROTA : rotational device, 可旋转磁盘标志位，可用于区分 HDD 盘和 SSD 盘: 0 - 不可旋转，SSD; 1 - 可旋转，HDD</li></ul><p>如，以键值对的形式列出 /dev/sdb 盘的名称，大小，挂载点，类型，ROTA 位，分区 UUID，文件系统 UUID:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsblk /dev/sdb -b -p -P -o NAME,SIZE,MOUNTPOINT,TYPE,ROTA,UUID,PARTUUID</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输出结果如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@AbsentM ~]# lsblk /dev/sdb -b -p -P -o NAME,SIZE,MOUNTPOINT,TYPE,ROTA,UUID,PARTUUID</span><br><span class="line">NAME=<span class="string">"/dev/sdb"</span> SIZE=<span class="string">"214748364800"</span> MOUNTPOINT=<span class="string">""</span> TYPE=<span class="string">"disk"</span> ROTA=<span class="string">"1"</span> UUID=<span class="string">""</span> PARTUUID=<span class="string">""</span></span><br><span class="line">NAME=<span class="string">"/dev/sdb1"</span> SIZE=<span class="string">"161061273600"</span> MOUNTPOINT=<span class="string">""</span> TYPE=<span class="string">"part"</span> ROTA=<span class="string">"1"</span> UUID=<span class="string">"0a3407de-014b-458b-b5c1-848e92a327a3"</span> PARTUUID=<span class="string">"b411dc99-f0a0-4c87-9e05-184977be8539"</span></span><br><span class="line">NAME=<span class="string">"/dev/sdb2"</span> SIZE=<span class="string">"53687091200"</span> MOUNTPOINT=<span class="string">""</span> TYPE=<span class="string">"part"</span> ROTA=<span class="string">"1"</span> UUID=<span class="string">""</span> PARTUUID=<span class="string">"f9fe0b69-a280-415d-a03a-a32752370dee"</span> </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="Disk-UUID、PARTUUID-解释"><a class="header-anchor" href="#Disk-UUID、PARTUUID-解释">¶</a>Disk UUID、PARTUUID 解释</h3><p>关于磁盘 UUID、PARTUUID 等磁盘持久化命名解释可参看：<a href="https://wiki.archlinux.org/index.php/Persistent_block_device_naming_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">参考资料 2：Persistent block device naming (简体中文)</a> 和 <a href="https://wiki.debian.org/Part-UUID">参考资料 3：Part-UUID</a></p><h3 id="SSD、HDD-的-Linux-判断方法"><a class="header-anchor" href="#SSD、HDD-的-Linux-判断方法">¶</a>SSD、HDD 的 Linux 判断方法</h3><p>除 lsblk 命令的 ROTA 属性值可以作为 HDD 盘和 SSD 盘的判断方式( 1 - HDD, 0 - SSD) 外，还可以使用如下命令来判断：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /sys/block/xxxx/queue/rotational</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>如果返回值为：1，则表示为 HDD 盘；如果返回值为：0，则表示为 SSD 盘。其他方法可参看：<a href="https://blog.csdn.net/sch0120/article/details/77725658">参考资料 4：Linux下判断磁盘是SSD还是HDD的几种方法</a></p><h3 id="将-HDD-盘模拟为-SSD-盘"><a class="header-anchor" href="#将-HDD-盘模拟为-SSD-盘">¶</a>将 HDD 盘模拟为 SSD 盘</h3><p>可以通过如下命令，将 HDD 盘模拟为非旋转块设备（SSD）:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 0 &gt; /sys/block/xxxx/queue/rotational   <span class="comment"># 其中，xxxx 表示磁盘名称，如 sdb.</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="模拟插拔盘动作"><a class="header-anchor" href="#模拟插拔盘动作">¶</a>模拟插拔盘动作</h3><p>Linux 下可以使用如下命令模拟插拔盘动作，但应注意与实际物理插拔盘仍可能不太一样。</p><p>拔盘：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; /sys/block/xxxx/device/delete   <span class="comment"># 其中，xxxx 表示磁盘名称，如 sdb.</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>插盘：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">" - - - "</span> &gt; /sys/class/scsi_host/host0/scan    </span><br><span class="line"><span class="comment"># 其中，host0 中的数字 「 0 」 表示：使用 lsscsi 命令查看的 xxxx 盘第一列 [0:0:0:1] 中的第一个数字</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="blkid-命令"><a class="header-anchor" href="#blkid-命令">¶</a>blkid 命令</h2><p>blkid 命令可以显示关于可用块设备的信息，如：设备名称、UUID(文件系统唯一标示符)、Type（文件系统类型）、PARTLABEL、PARTUUID 等信息。</p><h3 id="列出所有可用块设备的信息"><a class="header-anchor" href="#列出所有可用块设备的信息">¶</a>列出所有可用块设备的信息</h3><p>在终端输入以下命令，列出所有可用块设备的信息：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blkid</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输出结果如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda2: UUID=<span class="string">"0733f5c1-cb85-4f98-9d4f-122cfcee9806"</span> TYPE=<span class="string">"ext4"</span></span><br><span class="line">/dev/sda3: UUID=<span class="string">"41a18221-6b1f-4ca2-9bc3-dc353c87d932"</span> TYPE=<span class="string">"ext4"</span></span><br><span class="line">/dev/sda4: UUID=<span class="string">"57183ff9-d4a5-4623-a47f-f8f17339be03"</span> TYPE=<span class="string">"swap"</span></span><br><span class="line">/dev/sdb1: UUID=<span class="string">"0a3407de-014b-458b-b5c1-848e92a327a3"</span> PARTUUID=<span class="string">"b411dc99-f0a0-4c87-9e05-184977be8539"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line">/dev/sdb2: UUID=<span class="string">"6bdf487f-cad7-4197-b0d9-4ddc6df1de2d"</span> PARTUUID=<span class="string">"f9fe0b69-a280-415d-a03a-a32752370dee"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="列出指定块设备的信息"><a class="header-anchor" href="#列出指定块设备的信息">¶</a>列出指定块设备的信息</h3><p>在终端输入以下命令，列出指定块设备的信息：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blkid /dev/sdb1</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输出结果如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdb1: UUID=<span class="string">"0a3407de-014b-458b-b5c1-848e92a327a3"</span> PARTUUID=<span class="string">"b411dc99-f0a0-4c87-9e05-184977be8539"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="可用参数及格式化输出"><a class="header-anchor" href="#可用参数及格式化输出">¶</a>可用参数及格式化输出</h3><p>列出几个 blkid 命令支持的可用参数：</p><ul><li>-o : output format; can be one of: value, device, export or full; (default: full)</li><li>-s : show specified tag(s) (default show all tags)</li><li>-t : find device with a specified token (NAME=value pair)</li><li>-L : convert LABEL to device name</li><li>-U : convert UUID to device name</li></ul><p><strong>1/</strong> 使用 -o 参数格式化输出 sdb1 的块设备信息：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blkid -o value /dev/sdb1</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输出结果如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0a3407de-014b-458b-b5c1-848e92a327a3</span><br><span class="line">xfs</span><br><span class="line">b411dc99-f0a0-4c87-9e05-184977be8539</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>2/</strong> 使用 -o 参数格式化输出 sdb1 的块设备信息：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blkid -o <span class="built_in">export</span> /dev/sdb1</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输出结果如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DEVNAME=/dev/sdb1</span><br><span class="line">UUID=0a3407de-014b-458b-b5c1-848e92a327a3</span><br><span class="line">TYPE=xfs</span><br><span class="line">PARTUUID=b411dc99-f0a0-4c87-9e05-184977be8539</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="sgdisk-命令"><a class="header-anchor" href="#sgdisk-命令">¶</a>sgdisk 命令</h2><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1] <a href="https://linux.cn/article-3340-1.html">https://linux.cn/article-3340-1.html</a><br>[2] <a href="https://wiki.archlinux.org/index.php/Persistent_block_device_naming_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/Persistent_block_device_naming_(简体中文)</a><br>[3] <a href="https://wiki.debian.org/Part-UUID">https://wiki.debian.org/Part-UUID</a><br>[4] <a href="https://blog.csdn.net/sch0120/article/details/77725658">https://blog.csdn.net/sch0120/article/details/77725658</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>转 - 常用的 Chrome 插件推荐</title>
      <link href="/2021/02/01/%E8%BD%AC-%E5%B8%B8%E7%94%A8%E7%9A%84Chrome%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/"/>
      <url>/2021/02/01/%E8%BD%AC-%E5%B8%B8%E7%94%A8%E7%9A%84Chrome%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>本文转载自 stormzhang 的博客文章, 推荐的插件大都亲自试用过, 感觉棒棒的. 尊重劳动者们的果实, 缀上处处:  <a href="http://stormzhang.com/devtools/2016/01/15/google-chrome-extension/">私人珍藏的 Chrome 插件，吐血推荐— by stormzhang</a>.</p><p>一直都对 Chrome 情有独钟，第一次接触她只因她的 icon 就喜欢上她了，后来便一发不可自拔，现在几乎成为程序员最喜欢用的浏览器，至于优点很明显：强大的 Developer Tools，响应快速，支持各种插件。当然也有些劣势，比如稍微占点内存，但是在如今这个硬件这么便宜的时代，这点几乎可以忽略，今天我就来给大家推荐下我自己常用的一些Chrome插件，你在别处可看不到，可以这么说，熟练使用这些插件，会对你的开发效率大大提高，逼格瞬间上升一个档次。</p><hr><h2 id="插件安装"><a class="header-anchor" href="#插件安装">¶</a>插件安装</h2><p>本文推荐的插件大多可以通过在 Chrome Store直接搜索即可添加（要会科学上网哦）!!!</p><p>下文中的每个标题插件名称都是一个链接到该插件 chrome store 官方的下载地址, 点击即入!</p><hr><h3 id="推荐1-Momentum"><a class="header-anchor" href="#推荐1-Momentum">¶</a>推荐1: <a href="https://chrome.google.com/webstore/detail/momentum/laookkfknpbbblfpciffpaejjkokdgca">Momentum</a></h3><p>装逼利器，教你如何优雅的使用 Chrome，新打开一个 Tab 的时候再也不是一片空白，每天一副精美图片，给你们看下我今天的桌面感受下。</p><hr><h3 id="推荐2-OneTab"><a class="header-anchor" href="#推荐2-OneTab">¶</a>推荐2: <a href="https://chrome.google.com/webstore/detail/onetab/chphlpgkkbolifaimnlloiipkdnihall">OneTab</a></h3><p>强烈推荐，使用场景是这样的，我们使用 Chrome 经常会一次打开好多 tab，很多是会用到的，又不舍得关，内存又耗着，这个时候点击下 OneTab，直接把所有 tab 回收，然后每天的历史都给你记录着，接着你可以一键还原某一天的 tab，真乃为 Chrome 而生。</p><hr><h3 id="推荐3-Save-to-Pocket"><a class="header-anchor" href="#推荐3-Save-to-Pocket">¶</a>推荐3: <a href="https://chrome.google.com/webstore/detail/save-to-pocket/niloccemoadcdkdjlinkgdfekeahmflj">Save to Pocket</a></h3><p>相信很多人都用过 Pocket，这也是我一直学习必备的 App，比如你经常看博客，看到好的文章，然后装个这个插件就可以直接保存到 Pocket，这个时候你手机上的 Pocket 客户端同步过来，不管你在做地铁，还是在上厕所都可以利用这些碎片时间消化保存的知识，比利用这些时间刷知乎好多了，强烈推荐大学生或者工作经验没多久迫切需要学习的人。</p><hr><h3 id="推荐4-Page-Ruler"><a class="header-anchor" href="#推荐4-Page-Ruler">¶</a>推荐4: <a href="https://chrome.google.com/webstore/detail/page-ruler/emliamioobfffbgcfdchabfibonehkme">Page Ruler </a></h3><p>这个工具设计师必备，可以直接查看网页一些图片的详细像素大小、具体位置等，非常实用。</p><hr><h3 id="推荐5-Alexa-Traffic-Rank-Alexa"><a class="header-anchor" href="#推荐5-Alexa-Traffic-Rank-Alexa">¶</a>推荐5: <a href="http://www.alexa.com/">Alexa Traffic Rank Alexa</a></h3><p>Alexa 排名是指网站的世界排名，非常有权威。直接主流网站或博客绝对是有 Alexa 排名的，我们在浏览博客或者网站的时候就可以通过 Alexa 排名知晓该网站的流行程度，适用于经常看博客的人，装了这个插件一键查看网站排名。</p><hr><p>上面只是热身，下面都是跟我们开发密切相关的，注意前方高能：</p><p>GitHub 俗称为 『 全球最大的程序员同性社交社区 』，足以见他在程序员心中的地位，几乎每个程序员都必须要有一个 GitHub 账号，那么就来推荐下 GitHub 三件套。</p><hr><h3 id="推荐6-Isometric-Contributions"><a class="header-anchor" href="#推荐6-Isometric-Contributions">¶</a>推荐6: <a href="https://chrome.google.com/webstore/detail/isometric-contributions/mjoedlfflcchnleknnceiplgaeoegien">Isometric Contributions</a></h3><p>一个小玩意，可以让你在 GitHub 上的 commit 像盖楼一样的展示，很有趣，展示下 Android 大神 Jake Wharton 的 commit 情况。</p><hr><h3 id="推荐7-Avatars-for-Github"><a class="header-anchor" href="#推荐7-Avatars-for-Github">¶</a>推荐7: <a href="https://github.com/anasnakawa/chrome-github-avatars">Avatars for Github</a></h3><p>顾名思义，默认我们在 GitHub 主页动态只能看到 id 的，而安装了这个插件就可以看到 GitHub 头像了，让你一眼就能知道是谁，给你们看下我的 GitHub 主页动态。</p><p><img src="http://segmentfault.com/img/bVsgpF" alt="Avatars"></p><hr><h3 id="推荐8-Octotree"><a class="header-anchor" href="#推荐8-Octotree">¶</a>推荐8: <a href="https://github.com/buunguyen/octotree">Octotree</a></h3><p>这个可就屌了，当我们在浏览别人的开源代码时，还要 clone 下来一个文件查看，而有了这个插件，你可以直接在 Chrome 侧边栏向打开文件夹一样的查看别人的项目，简直了。给大家看下查看我的开源项目的正确方式。</p><p><img src="http://segmentfault.com/img/bVsgpK" alt="Octotree"></p><hr><p>接下来是 Android 开发必备插件了，效率提升百倍！</p><hr><h3 id="推荐9-JSONView"><a class="header-anchor" href="#推荐9-JSONView">¶</a>推荐9: <a href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc">JSONView</a></h3><p>一般我们在对接 api 接口的时候，一般都是默认返回 json 格式，想要查看具体返回哪些内容的时候通过 Chrome 查看全乱的，而且中文编码也不对，而有了这个插件就不一样了，自动跟你排列出 Json 数据，不管返回数据有多复杂，你都可以很直观的了解他的数据格式，简直开发者必备。</p><hr><h3 id="推荐10-Postman"><a class="header-anchor" href="#推荐10-Postman">¶</a>推荐10: <a href="https://chrome.google.com/webstore/detail/fhbjgbiflinjbdggehcddcbncdddomop">Postman</a></h3><p>开发者在调试网络时候，Linux 平台一般常用 curl 这种命令行工具，而如果你不会使用或者不习惯命令行，那 Postman 是你的不二人选，可以直接发送一个请求，自定义 params、header，查看 response 状态等。</p><hr><h3 id="推荐11-ChromeADB"><a class="header-anchor" href="#推荐11-ChromeADB">¶</a>推荐11: <a href="https://chrome.google.com/webstore/detail/chromeadb/fhdoijgfljahinnpbolfdimpcfoicmnm">ChromeADB</a></h3><p>这个可以说是 Android 开发者才用得上，这个插件的具体作用就是可以控制你的手机，当然前提必须是你的 adb 已经连接上了，不管是通过USB也好还是通过 Wifi 也好（不知道怎么通过 Wifi 连接的可以去我博客找），然后可以查看你的内存、硬盘使用情况，还自带一个 Controller，可以远程控制你的手机，比如我曾经就在手机 wifi 连接到 adb 的情况下，在我媳妇把玩我手机情况下突然放了首她爱听的音乐，当时的惊喜你们脑补下。</p><hr><h3 id="推荐12-Vysor"><a class="header-anchor" href="#推荐12-Vysor">¶</a>推荐12: <a href="https://chrome.google.com/webstore/detail/vysor-beta/gidgenkbbabolejbgbpnhbimgjbffefm">Vysor</a></h3><p>这个插件的使用场景是这样的，假如你在做一个 Android App 的演讲，但是手机屏幕太小，这个时候安装了这个插件就可以让手机画面投影到电脑上来（在 iOS 系统实现这个很方便），而且延时几乎很小，这个插件一般用不到就把他禁用，一旦用到的时候会非常有用.</p><hr><h3 id="推荐13-Dribbble-New-Tab"><a class="header-anchor" href="#推荐13-Dribbble-New-Tab">¶</a>推荐13: <a href="https://www.producthunt.com/posts/new-tab-dribbble">Dribbble New Tab</a></h3><p>大名鼎鼎的 Dribble，堪称设计师必备，而装了这个插件，可以让你打开空白 tab 的时间第一时间把每日精选作品展现出来，视觉的享受，强烈推荐给设计师们，装了这个插件我的桌面是这样的。（这个插件跟 Momentum 同时只能使用一个）</p><hr><h3 id="推荐14-ADblock-plus"><a class="header-anchor" href="#推荐14-ADblock-plus">¶</a>推荐14: <a href="https://chrome.google.com/webstore/detail/cfhdojbkjhnklbpkdaibdccddilifddb">ADblock plus</a></h3><p>这个不用多说, 屏蔽烦人的广告! 大家都知道的.</p><hr><h3 id="推荐15-Vimium"><a class="header-anchor" href="#推荐15-Vimium">¶</a>推荐15: <a href="https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb">Vimium</a></h3><p>像使用vim一样, 来操纵你的网页, 手不离剑, 剑不离手!</p><hr><h3 id="推荐16-163邮箱"><a class="header-anchor" href="#推荐16-163邮箱">¶</a>推荐16: <a href="https://chrome.google.com/webstore/detail/degnllcmhlfjedphgljfbgjcdijpagpp">163邮箱</a></h3><p>这个很方便, 能够实时显示163邮箱的邮件通知, 并且还有邮件个数提醒!</p><hr><h3 id="推荐17-EverSync"><a class="header-anchor" href="#推荐17-EverSync">¶</a>推荐17: <a href="https://chrome.google.com/webstore/detail/eversync-sync-bookmarks-b/iohcojnlgnfbmjfjfkbhahhmppcggdog?hl=zh-CN">EverSync</a></h3><p>这是一款跨浏览器的书签同步工具（需要科学上网啊），效果明显；主要支持Chrome和Firebox浏览器的书签同步，同时还提供Android版本，<strong>书签同步功能32个赞</strong>。</p><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://stormzhang.com/devtools/2016/01/15/google-chrome-extension/">http://stormzhang.com/devtools/2016/01/15/google-chrome-extension/</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的vim配置[.vimrc：git+github管理]</title>
      <link href="/2021/01/10/%E6%88%91%E7%9A%84vim%E9%85%8D%E7%BD%AE-vimrc%EF%BC%9Agit-github%E7%AE%A1%E7%90%86/"/>
      <url>/2021/01/10/%E6%88%91%E7%9A%84vim%E9%85%8D%E7%BD%AE-vimrc%EF%BC%9Agit-github%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="简记"><a class="header-anchor" href="#简记">¶</a>简记</h2><p>每次配置vim, 都耗时耗力，这次终于在github中找到了一个简单快捷的方式，使用git来和github来管理自己的vim配置.</p><p>尊重原创的劳动成果，坠上出处:<br><a href="https://github.com/humiaozuzu/dot-vimrc">humiaozuzu的dot-vimrc</a></p><p>下面来详细记录：</p><hr><h2 id="先前准备"><a class="header-anchor" href="#先前准备">¶</a>先前准备</h2><p>1: 我的配置环境：Ubuntu 14.04.3 LTS 版<br>2: vim 安装： <code>sudo apt-get install vim </code><br>3: git 安装:</p><ul><li><code>sudo apt-get update     </code></li><li><code>sudo apt-get install git</code></li><li>git 配置：</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name "你的用户名"</span><br><span class="line">git config --global user.email "你的邮箱"</span><br></pre></td></tr></tbody></table></figure><ul><li>查看git的配置信息： <code>git config --list</code><br>将会显示如下信息：</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user.name=你的用户名</span><br><span class="line">user.email=你的邮箱名称，如：youremail@domain.com</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="相关依赖的安装"><a class="header-anchor" href="#相关依赖的安装">¶</a>相关依赖的安装</h2><p>ctags的相关使用这里不做介绍了。<br>ctags： <code>sudo apt-get install ack-grep ctags  </code></p><hr><h2 id="安装"><a class="header-anchor" href="#安装">¶</a>安装</h2><p>1: 备份旧的vim配置文件：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv ~/.vim ~/.vim.orig</span><br><span class="line">mv ~/.vimrc ~/.vimrc.orig</span><br></pre></td></tr></tbody></table></figure><p>2: 使用Git克隆github上的dot-vimrc仓库：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone git://github.com/humiaozuzu/dot-vimrc.git ~/.vim</span><br><span class="line">ln -s ~/.vim/vimrc ~/.vimrc</span><br></pre></td></tr></tbody></table></figure><p>3: 设置 Vundle:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle</span><br></pre></td></tr></tbody></table></figure><p>4: 安装 bundles, 由git管理的vim插件：</p><p>在终端使用vim 打开任意文本文件，之后在vim的命令状态下 run:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:BundleInstall</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="使用Bundle命令管理-vimrc"><a class="header-anchor" href="#使用Bundle命令管理-vimrc">¶</a>使用Bundle命令管理 vimrc</h2><p>vim 相关的所有插件都存放在 bundles.vim中，可以自己向其中添加喜爱的插件，</p><p>使用命令如下：</p><p>1: <code>:BundleClean</code> 清理所有失效或无用的插件<br>2: <code>:BundleInstall</code> 安装新添加的vim插件<br>3: <code>:BundleInstall!</code> 更新所有插件</p><hr><h2 id="遇到的问题及解决"><a class="header-anchor" href="#遇到的问题及解决">¶</a>遇到的问题及解决</h2><p>按照以上的安装过程很顺利，但是在我的系统上使用monokai主题和solarized主题时却总是不尽人意，想要的主题颜色未能得到完美的渲染，欲罢不能。</p><h3 id="方案一："><a class="header-anchor" href="#方案一：">¶</a>方案一：</h3><p>（钟爱于高亮当前行的设置，之后有时间在这上面优化一下），选择了个折中的方案，受分辨率和系统的限制，部分设置可能无效。</p><p>在.vimrc配置文件中找到如下几行：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">au WinLeave * set nocursorline nocursorcolumn</span><br><span class="line">au WinEnter * set cursorline cursorcolumn</span><br><span class="line">set cursorline set cursorcolumn</span><br></pre></td></tr></tbody></table></figure><p>在后面添加两行代码：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hi CursorLine cterm=NONE ctermbg=darkgray ctermfg=white</span><br><span class="line">hi CursorColumn cterm=NONE ctermbg=darkgray ctermfg=white</span><br></pre></td></tr></tbody></table></figure><p>之后可以使用任意主题， 如<code>color default，color monokai</code>等。</p><hr><h3 id="方案二：-使用monokai主题（推荐）"><a class="header-anchor" href="#方案二：-使用monokai主题（推荐）">¶</a>方案二： 使用monokai主题（推荐）</h3><p><strong>但原装的方案可能需要稍作修改，效果更佳！</strong> ，具体设置如下：</p><p>1: 直接在.vimrc配置文件中设置主题: <code>color monokai</code><br>2: 切换文件目录：<code>$ cd .vim/bundle/vim-monokai/colors</code><br>3: 修改monokai.vim文件：<code>$ vim monokai.vim</code><br>4: 修改高亮当前行和列配置：</p><p>注释掉如下行，（使用英文双引号）：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"hi Cursor guibg=fg</span><br><span class="line">"hi CursorLine   guibg=#3E3D32 gui=none ctermbg=9 cterm=none</span><br><span class="line">"hi ColorColumn  guibg=#3E3D32 gui=none ctermbg=9 cterm=none</span><br></pre></td></tr></tbody></table></figure><p>修改为：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"设置高亮当前行和列</span><br><span class="line"> hi CursorLine cterm=NONE ctermbg=darkgray ctermfg=white</span><br><span class="line"> hi hi ColorColumn  cterm=NONE ctermbg=darkgray ctermfg=white</span><br></pre></td></tr></tbody></table></figure><p>5： 修改行号前景和背景色：</p><p>注释掉：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"配置行号前景色和背景色</span><br><span class="line">"hi LineNr guifg=#75715E guibg=#3E3D32 gui=none ctermfg=8 ctermbg=9 cterm=none           </span><br></pre></td></tr></tbody></table></figure><p>修改为：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hi LineNr ctermbg=none "或8         </span><br></pre></td></tr></tbody></table></figure><p>6： 修改下拉菜单栏，和选项配色：<br>注释掉：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">"hi Pmenu guifg=fg guibg=#3E3D32 ctermfg=fg ctermbg=9</span><br><span class="line">"hi PmenuSel guifg=fg guibg=bg ctermfg=fg ctermbg=bg</span><br></pre></td></tr></tbody></table></figure><p>修改为：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"设置弹出菜单和当前选择项</span><br><span class="line">hi Pmenu ctermfg=white ctermbg=darkgray</span><br><span class="line">hi PmenuSel ctermfg=Black ctermbg=LightYellow</span><br></pre></td></tr></tbody></table></figure><p>7： 去掉高亮列显示，简单为美：修改完以上部分，编辑.vimrc文件，注释掉如下两行：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"au WinEnter * set cursorcolumn</span><br><span class="line">"set cursorcolumn                                         </span><br></pre></td></tr></tbody></table></figure><p>8： 详细的修改原理及语法格式，请参考这篇Blog，感谢：<br><a href="http://blog.csdn.net/mdl13412/article/details/8129904">.vim主题代码语法格式说明</a> 和 <a href="http://www.cnblogs.com/li-hao/archive/2012/04/13/2446397.html">Linux终端颜色设置说明</a></p><hr><h3 id="vim效果图1（使用default配色方案）"><a class="header-anchor" href="#vim效果图1（使用default配色方案）">¶</a>vim效果图1（使用default配色方案）</h3><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/vim-full.png" alt="vim-full"></p><hr><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/vim-sidebar.png" alt="vim-sidebar"></p><hr><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/vim-sidebar.png" alt="vim-sidebar-two"></p><hr><h3 id="vim效果图2（使用monokai主题）"><a class="header-anchor" href="#vim效果图2（使用monokai主题）">¶</a>vim效果图2（使用monokai主题）</h3><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/vim-monokai.png" alt="vim-monokai"></p><h2 id="Terminal-＆＆-Vim-Solarized配色"><a class="header-anchor" href="#Terminal-＆＆-Vim-Solarized配色">¶</a>Terminal ＆＆ Vim Solarized配色</h2><p>&lt;1&gt; 使终端支持256色：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">vim .bashrc     <span class="comment"># add</span></span><br><span class="line"><span class="built_in">export</span> TERM=xterm-256color</span><br><span class="line">:wq</span><br><span class="line"><span class="built_in">source</span> .bashrc</span><br></pre></td></tr></tbody></table></figure><p>&lt;2&gt; Terminal</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> dev_env</span><br><span class="line"><span class="built_in">mkdir</span> terminal-themes</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> terminal-themes</span><br><span class="line"><span class="built_in">sudo</span> git <span class="built_in">clone</span> git://github.com/seebi/dircolors-solarized.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> dev_env/terminal-themes/dircolors-solarized/dircolors.256dark ~/.dircolors</span><br><span class="line"><span class="built_in">eval</span> <span class="string">'dircolors .dircolors'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> dev_env/terminal-themes</span><br><span class="line"><span class="built_in">sudo</span> git <span class="built_in">clone</span> git://github.com/sigurdga/gnome-terminal-colors-solarized.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> gnome-terminal-colors-solarized</span><br><span class="line">./set_dark.sh</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">./set_light.sh   <span class="comment"># 可以自由切换深色和浅色。</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>&lt;3&gt; 效果图</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/terminal.png" alt="terminal with solarized"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/vim-sol.png" alt="vim with solarized"></p><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eclipse 优化配置项说明</title>
      <link href="/2020/11/21/Eclipse-%E4%BC%98%E5%8C%96%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%AF%B4%E6%98%8E/"/>
      <url>/2020/11/21/Eclipse-%E4%BC%98%E5%8C%96%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><blockquote><p>好久不更博了，上一次在 github 上提交代码和更新文章还是在学校的时候，那时候真好。</p></blockquote><p>这篇文章中记录一下 Eclipse 的优化配置吧，每一次都上网找不同的链接搜索也挺麻烦的；索性，再做一次搬砖的，整理到这里，留待日后使用。</p><h2 id="Preferences-配置修改"><a class="header-anchor" href="#Preferences-配置修改">¶</a>Preferences 配置修改</h2><ol><li>General &gt; Startup and Shutdown : 移除所有在启动时加载的插件。</li><li>General &gt; Editors &gt; Text Editors &gt; Spelling : 关闭拼写检查。</li><li>General &gt; Validation &gt; 勾选“Suspend all validator”。</li><li>Window &gt; Customize Perspective &gt; 移除所有用不到或不想用的内容（尽量使用快捷键），菜单栏也是如此（你用过几次菜单栏的打印按钮？）。</li><li>Install/Update &gt; Automatic Updates &gt; 取消勾选“Automatically find new updates and notify me”。</li><li>General &gt; Appearance &gt; 取消勾选“Enable Animations”。</li><li>使用默认的主题。其他主题可能会降低运行速度。</li><li>取消 Build Auto。</li></ol><h2 id="修改-eclipse-ini-文件"><a class="header-anchor" href="#修改-eclipse-ini-文件">¶</a>修改 eclipse.ini 文件</h2><p>eclipse.ini 文件是 Eclipse IDE 的配置文件，也可以通过修改其配置文件提升 Eclipse 的速度。</p><h3 id="文件位置"><a class="header-anchor" href="#文件位置">¶</a>文件位置</h3><ul><li><p>Windows/Linux：位于$ECLIPSE_HOME（注：$ECLIPSE HOME是Eclipse的路径，这里假设Linux下也是自行安装，而不是通过源安装）</p></li><li><p>MacOS：位于$ECLIPSE_HOME/Eclipse.app/Contents/MacOS</p></li></ul><h3 id="添加如下内容"><a class="header-anchor" href="#添加如下内容">¶</a>添加如下内容</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 打开编译器性能优化</span><br><span class="line">-XX:+AggressiveOpts</span><br><span class="line"></span><br><span class="line"># 增加永生代空间（分配新对象的地方）（注：在 JDK 8 中，取消了永生代）</span><br><span class="line">-XX:PermSize=512m</span><br><span class="line">-XX:MaxPermSize=512m</span><br><span class="line"></span><br><span class="line"># 增加最小最大堆的空间（含有新生代和年老代）</span><br><span class="line">-Xms2048m</span><br><span class="line">-Xmx2048m</span><br><span class="line"></span><br><span class="line"># 为新生代增加堆的大小</span><br><span class="line">-Xmn512m</span><br><span class="line"></span><br><span class="line"># 为每个线程设置栈大小</span><br><span class="line">-Xss2m</span><br><span class="line"></span><br><span class="line"># 调整垃圾收集</span><br><span class="line">-XX:+UseParallelOldGC</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="Maven-配置"><a class="header-anchor" href="#Maven-配置">¶</a>Maven 配置</h2><p>使用 Eclipse 创建 Maven 项目时，下载依赖速度会比较慢。可以考虑下载依赖使用国内阿里云的镜像。具体操作如下：</p><h3 id="创建-settings-xml-文件"><a class="header-anchor" href="#创建-settings-xml-文件">¶</a>创建 settings.xml 文件</h3><p>在 Maven 配置目录或者默认目录中 (C:\Users\xxxxx.m2\repository) 创建 settings.xml 文件，并修改一下两个位置：</p><p><strong>1/</strong> 指定本地仓库位置</p><p>在 settings.xml 文件中指定本地仓库位置，添加如下代码：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;localRepository&gt;C:\Users\xxxxx\.m2\repository&lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>2/</strong> 指定阿里云镜像</p><p>在 settings.xml 文件中添加如下代码：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;mirrors&gt;</span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">&lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">&lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br><span class="line">&lt;/mirrors&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="完整-settings-xml"><a class="header-anchor" href="#完整-settings-xml">¶</a>完整 settings.xml</h3><p>完整 settings.xml 如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line"> | This is the configuration file for Maven. It can be specified at two levels:</span><br><span class="line"> |</span><br><span class="line"> |  1. User Level. This settings.xml file provides configuration for a single user,</span><br><span class="line"> |                 and is normally provided in ${user.home}/.m2/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -s /path/to/user/settings.xml</span><br><span class="line"> |</span><br><span class="line"> |  2. Global Level. This settings.xml file provides configuration for all Maven</span><br><span class="line"> |                 users on a machine (assuming they're all using the same Maven</span><br><span class="line"> |                 installation). It's normally provided in</span><br><span class="line"> |                 ${maven.home}/conf/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -gs /path/to/global/settings.xml</span><br><span class="line"> | |</span><br><span class="line"> |--&gt;</span><br><span class="line">&lt;settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"</span><br><span class="line">          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span><br><span class="line">          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;</span><br><span class="line">          </span><br><span class="line">  &lt;!--  Change in below line  --&gt;</span><br><span class="line">  &lt;localRepository&gt;C:\Users\xxxxxxxxx\.m2\repository&lt;/localRepository&gt;</span><br><span class="line">  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</span><br><span class="line">  &lt;offline&gt;false&lt;/offline&gt;</span><br><span class="line">  &lt;pluginGroups&gt;</span><br><span class="line">    &lt;!-- pluginGroup</span><br><span class="line">     | Specifies a further group identifier to use for plugin lookup.</span><br><span class="line">    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/pluginGroups&gt;</span><br><span class="line">  &lt;proxies&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;proxy&gt;</span><br><span class="line">      &lt;id&gt;optional&lt;/id&gt;</span><br><span class="line">      &lt;active&gt;true&lt;/active&gt;</span><br><span class="line">      &lt;protocol&gt;http&lt;/protocol&gt;</span><br><span class="line">      &lt;username&gt;proxyuser&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;proxypass&lt;/password&gt;</span><br><span class="line">      &lt;host&gt;proxy.host.net&lt;/host&gt;</span><br><span class="line">      &lt;port&gt;80&lt;/port&gt;</span><br><span class="line">      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;</span><br><span class="line">    &lt;/proxy&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/proxies&gt;</span><br><span class="line">  &lt;servers&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;server&gt;</span><br><span class="line">      &lt;id&gt;deploymentRepo&lt;/id&gt;</span><br><span class="line">      &lt;username&gt;crunchify&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;crunchify&lt;/password&gt;</span><br><span class="line">    &lt;/server&gt;</span><br><span class="line"> --&gt;</span><br><span class="line">  &lt;/servers&gt;</span><br><span class="line">  &lt;mirrors&gt;</span><br><span class="line">    &lt;mirror&gt;</span><br><span class="line">        &lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">        &lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">     &lt;/mirror&gt;</span><br><span class="line">  &lt;/mirrors&gt;</span><br><span class="line">  &lt;profiles&gt;</span><br><span class="line">  &lt;/profiles&gt;</span><br><span class="line">&lt;/settings&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="设置-Eclipse-Maven-Plugin"><a class="header-anchor" href="#设置-Eclipse-Maven-Plugin">¶</a>设置 Eclipse Maven Plugin</h3><p>在 Eclipse 中设置加载 settings.xml 配置文件：</p><blockquote><p>Window -&gt; Preferences -&gt; Maven -&gt; User Settings -&gt; User settings Browse 选择上面创建的 setting.xml -&gt; ok</p></blockquote><h2 id="Eclipse-Tomcat-不输入项目名称直接访问项目配置"><a class="header-anchor" href="#Eclipse-Tomcat-不输入项目名称直接访问项目配置">¶</a>Eclipse-Tomcat 不输入项目名称直接访问项目配置</h2><p>使用 Eclipse 和 Tomcat 开发的 Javaweb 项目发布后浏览器的访问路径中默认会加上项目名称，如果想去掉项目名称，可以做如下配置：</p><blockquote><p>eclipse -&gt; 右键项目名称 -&gt; 选择 Properties -&gt; Web Project Settings -&gt; Context root 选项 -&gt; 将 Context root 的值改为 / -&gt; ok</p></blockquote><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://www.importnew.com/13942.html">http://www.importnew.com/13942.html</a><br>[2]. <a href="http://rongmayisheng.com/post/eclipse%E5%85%A8%E9%9D%A2%E6%8F%90%E9%80%9F">http://rongmayisheng.com/post/eclipse全面提速</a><br>[3]. <a href="https://zyf.im/2016/09/14/eclipse-maven-settings-mirror-in-china/">https://zyf.im/2016/09/14/eclipse-maven-settings-mirror-in-china/</a></p><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2><hr>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>相片</title>
      <link href="/2020/08/09/%E7%9B%B8%E7%89%87/"/>
      <url>/2020/08/09/%E7%9B%B8%E7%89%87/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><blockquote><p>入夜<br>友从远方寄来合唱团相片<br>一张家门口村委会彩排相片</p><p>没认出母亲来<br>浓妆艳抹，辨识良久…</p><p>不觉鼻子一酸<br>母亲是个大美人<br>母亲多少年没画过浓妆了</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The notes of iptables on ubuntu 14.04</title>
      <link href="/2020/07/13/The-notes-of-iptables-on-ubuntu-14-04/"/>
      <url>/2020/07/13/The-notes-of-iptables-on-ubuntu-14-04/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="Preface"><a class="header-anchor" href="#Preface">¶</a>Preface</h2><p>This note will denote the config of the iptables on ubuntu os, the following will show the detail of the work.</p><ul><li>How to install shadowsocks client on ubuntu os.</li><li>how to config the iptables.</li><li>how to save your config.</li></ul><h2 id="Install-shadowsocks-client"><a class="header-anchor" href="#Install-shadowsocks-client">¶</a>Install shadowsocks client</h2><p><a href="https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation">Detail DOC</a></p><p><strong>PPA is for Ubuntu &gt;= 14.04.</strong></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> add-apt-repository ppa:hzwhuang/ss-qt5</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install shadowsocks-qt5</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="config-iptables"><a class="header-anchor" href="#config-iptables">¶</a>config iptables</h2><p>base use:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> iptables -L <span class="comment"># look the rules</span></span><br><span class="line"><span class="built_in">sudo</span> iptables -S        <span class="comment"># We can see the output in a format that reflects the commands necessary to enable each rule and policy by instead using the -S flag:</span></span><br><span class="line"><span class="built_in">sudo</span> iptables     <span class="comment"># add rules</span></span><br><span class="line"><span class="built_in">sudo</span> iptables -L -n     <span class="comment"># check the useage of rules</span></span><br><span class="line"><span class="built_in">sudo</span> iptables -F <span class="comment"># clear the rules</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>my config</strong></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> iptables -P INPUT ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -P FORWARD ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -P OUTPUT ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -i lo -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m multiport --dports 80,443,8067 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m tcp --dport 26029 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p icmp -m icmp --icmp-type 0 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m tcp --dport 80 -m <span class="built_in">limit</span> --<span class="built_in">limit</span> 25/min --limit-burst 100 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -m <span class="built_in">limit</span> --<span class="built_in">limit</span> 5/min -j LOG --log-prefix <span class="string">"iptables denied: "</span> --log-level 7</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -A OUTPUT -p udp -m udp --dport 53 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 443 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A OUTPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A OUTPUT -m <span class="built_in">limit</span> --<span class="built_in">limit</span> 5/min -j LOG --log-prefix <span class="string">"iptables denied: "</span> --log-level 7</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 24800 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 2425 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -I INPUT -p tcp --dport 2425 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -I INPUT -p udp --dport 2425 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -I OUTPUT -p tcp --sport 2425 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -I OUTPUT -p udp --sport 2425 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -A OUTPUT -p icmp --icmp-type echo-request -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT  -p icmp --icmp-type echo-reply   -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> iptables -I INPUT 5 -m state --state NEW -m tcp -p tcp --dport 139 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -I INPUT 5 -m state --state NEW -m tcp -p tcp --dport 445 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -I INPUT 5 -p udp -m udp --dport 137 -j ACCEPT</span><br><span class="line"><span class="built_in">sudo</span> iptables -I INPUT 5 -p udp -m udp --dport 138 -j ACCEPT</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="Save-the-config"><a class="header-anchor" href="#Save-the-config">¶</a>Save the config</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install iptables-persistent</span><br><span class="line"><span class="built_in">sudo</span> invoke-rc.d iptables-persistent save</span><br><span class="line"><span class="built_in">sudo</span> iptables-save</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2><hr>]]></content>
      
      
      <categories>
          
          <category> Linux Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python matplotlib 数据可视化</title>
      <link href="/2020/05/18/Python-matplotlib-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
      <url>/2020/05/18/Python-matplotlib-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="引言"><a class="header-anchor" href="#引言">¶</a>引言</h2><p>这篇记载一下 Python 环境下使用 matplotlib 绘制各种曲线图的用法，阅读这篇文章你将会获得如下内容：</p><ul><li>matplotlib 及环境配置。</li><li>一幅数据绘图的结构都是如何组成的，与 matplotlib 相关的名称是如何对应的？</li><li>常见的数据绘图都包含哪些，以及是如何绘制的？</li></ul><p>你可能需要的先前技能如下：</p><ul><li>Python 开发环境及 matplotlib 工具包</li><li>Python 基础语法</li><li>Python numpy 包使用</li></ul><hr><h2 id="matplotlib-安装配置"><a class="header-anchor" href="#matplotlib-安装配置">¶</a>matplotlib 安装配置</h2><p>使用 Python 进行数据绘图前，Python 环境的安装配置是必须，请参看这篇文章：<br><a href="https://absentm.github.io/2017/12/02/python%E5%AE%89%E8%A3%85%E7%AE%80%E8%AE%B0/">Python 环境安装配置</a>。</p><p>在各种环境中 (Windows、Linux、Mac) 的 matplotlib 环境安装配置如下： (以 Ubuntu 为例)</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推荐使用这种方式安装</span></span><br><span class="line"><span class="comment"># 安装 numpy、scipy包</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install python-numpy</span><br><span class="line"><span class="built_in">sudo</span> apt-get install python-scipy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 matplotlib 包</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install python-matplotlib</span><br></pre></td></tr></tbody></table></figure><p>当然也可以使用 pip 安装：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pip install numpy</span><br><span class="line"><span class="built_in">sudo</span> pip install scipy</span><br><span class="line"><span class="built_in">sudo</span> pip install matplotlib</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="图的基本结构"><a class="header-anchor" href="#图的基本结构">¶</a>图的基本结构</h2><p>通常，使用 numpy 组织数据, 使用 matplotlib API 进行数据图像绘制。 一幅数据图基本上包括如下结构：</p><ol><li>Data: 数据区，包括数据点、描绘形状</li><li>Axis: 坐标轴，包括 X 轴、 Y 轴及其标签、刻度尺及其标签</li><li>Title: 标题，数据图的描述</li><li>Legend: 图例，区分图中包含的多种曲线或不同分类的数据</li><li>其他的还有图形文本 (Text)、注解 (Annotate)等其他描述</li></ol><p>详细的结构图如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Python_Figure_Structure.png" alt="数据绘图基本结构"></p><p>This figure powered by <a href="https://www.snipaste.com/">Snipaste</a> .</p><hr><h2 id="绘图分类"><a class="header-anchor" href="#绘图分类">¶</a>绘图分类</h2><p>Matplotlib API 中提供了常见的绘图类型，常用的包括如下：</p><ul><li>常规图：regular plot</li><li>直方图：bar plot</li><li>散点图：scatter plot</li><li>饼状图：pie plot</li><li>轮廓图：contour plot</li><li>3D图：3D plot</li><li>多子图：subplot</li><li>显示图片：imshow</li></ul><p>参考文献 [3] 详细记录了 API 中的各种类型图的参数说明，不再一一赘述。</p><hr><h2 id="画法"><a class="header-anchor" href="#画法">¶</a>画法</h2><p>本篇以常规图为例，详细记录作图流程及技巧。按照绘图结构，可将数据图的绘制分为如下几个步骤：</p><ul><li>导入 matplotlib 包相关工具包</li><li>准备数据，numpy 数组存储</li><li>绘制原始曲线</li><li>配置标题、坐标轴、刻度、图例</li><li>添加文字说明、注解</li><li>显示、保存绘图结果</li></ul><p>先给出一个完整的图结构吧，这个图主要是绘制 cos、sin、sqrt 函数图像，如下：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/figure.png" alt="完整的常规图绘制结果"></p><h3 id="导包"><a class="header-anchor" href="#导包">¶</a>导包</h3><p>涉及到 matplotlib.pyplot、pylab 和 numpy，如：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> *</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="准备数据"><a class="header-anchor" href="#准备数据">¶</a>准备数据</h3><p>numpy 常用来组织源数据:</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义数据部分</span></span><br><span class="line">x = np.arange(<span class="number">0.</span>, <span class="number">10</span>, <span class="number">0.2</span>)</span><br><span class="line">y1 = np.cos(x)</span><br><span class="line">y2 = np.sin(x)</span><br><span class="line">y3 = np.sqrt(x)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="绘制基本曲线"><a class="header-anchor" href="#绘制基本曲线">¶</a>绘制基本曲线</h3><p>使用 plot 函数直接绘制上述函数曲线，可以通过配置 plot 函数参数调整曲线的样式、粗细、颜色、标记等：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘制 3 条函数曲线</span></span><br><span class="line">plt.plot(x, y1, color=<span class="string">'blue'</span>, linewidth=<span class="number">1.5</span>, linestyle=<span class="string">'-'</span>, marker=<span class="string">'.'</span>, label=<span class="string">r'$y = cos{x}$'</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y2, color=<span class="string">'green'</span>, linewidth=<span class="number">1.5</span>, linestyle=<span class="string">'-'</span>, marker=<span class="string">'*'</span>, label=<span class="string">r'$y = sin{x}$'</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y3, color=<span class="string">'m'</span>, linewidth=<span class="number">1.5</span>, linestyle=<span class="string">'-'</span>, marker=<span class="string">'x'</span>, label=<span class="string">r'$y = \sqrt{x}$'</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>1&gt; color 参数</strong></p><p>包含基本的红(red, r)、绿(green, g)、蓝(blue, b)、黑(k)、青色©、洋红色(m)、黄色(y)、白色(w)及其衍生色，还可以使用 6 个 16 进制数表示（如，‘#FF00CC’, ‘#ff00ff’）。</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/colormaps.png" alt="color 样式图"></p><p>color 参数图片由参考文献 [1] 提供。</p><p><strong>2&gt; linestyle 参数</strong></p><p>其中，linestyle 参数主要包含虚线、点化虚线、粗虚线、实线，表示符号见下图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/line_style.png" alt="linestyle 参数"></p><p>linestyle 参数图片由参考文献 [1] 提供。</p><p><strong>3&gt; marker 参数</strong></p><p>在曲线上标记特殊的符号，以区分不同的线段，比较实用。常见的形状及表示符号如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/marks.png" alt="marker 样式图"></p><p>marker 参数图片由参考文献 [1] 提供。</p><h3 id="设置坐标轴"><a class="header-anchor" href="#设置坐标轴">¶</a>设置坐标轴</h3><p>可通过如下代码，移动坐标轴 <strong>spines</strong>，解说详见注释：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 坐标轴上移</span></span><br><span class="line">ax = plt.subplot(<span class="number">111</span>)</span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)     <span class="comment"># 去掉右边的边框线</span></span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)       <span class="comment"># 去掉上边的边框线</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动下边边框线，相当于移动 X 轴</span></span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)    </span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动左边边框线，相当于移动 y 轴</span></span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>可通过如下代码，设置刻度尺间隔 <strong>lim</strong>、刻度标签 <strong>ticks</strong>：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置 x, y 轴的刻度取值范围</span></span><br><span class="line">plt.xlim(x.<span class="built_in">min</span>()*<span class="number">1.1</span>, x.<span class="built_in">max</span>()*<span class="number">1.1</span>)</span><br><span class="line">plt.ylim(-<span class="number">1.5</span>, <span class="number">4.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 x, y 轴的刻度标签值</span></span><br><span class="line">plt.xticks([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>], [<span class="string">r'2'</span>, <span class="string">r'4'</span>, <span class="string">r'6'</span>, <span class="string">r'8'</span>, <span class="string">r'10'</span>])</span><br><span class="line">plt.yticks([-<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>],</span><br><span class="line">    [<span class="string">r'-1.0'</span>, <span class="string">r'0.0'</span>, <span class="string">r'1.0'</span>, <span class="string">r'2.0'</span>, <span class="string">r'3.0'</span>, <span class="string">r'4.0'</span>])</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>可通过如下代码，设置 X、Y 坐标轴和标题：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置标题、x轴、y轴</span></span><br><span class="line">plt.title(<span class="string">r'$the \ function \ figure \ of \ cos(), \ sin() \ and \ sqrt()$'</span>, fontsize=<span class="number">19</span>)</span><br><span class="line">plt.xlabel(<span class="string">r'$the \ input \ value \ of \ x$'</span>, fontsize=<span class="number">18</span>, labelpad=<span class="number">88.8</span>)</span><br><span class="line">plt.ylabel(<span class="string">r'$y = f(x)$'</span>, fontsize=<span class="number">18</span>, labelpad=<span class="number">12.5</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="设置文字描述、注解"><a class="header-anchor" href="#设置文字描述、注解">¶</a>设置文字描述、注解</h3><p>可通过如下代码，在数据图中添加文字描述 <strong>text</strong>：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.text(<span class="number">4</span>, <span class="number">1.68</span>, <span class="string">r'$x \in [0.0, \ 10.0]$'</span>, color=<span class="string">'k'</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.text(<span class="number">4</span>, <span class="number">1.38</span>, <span class="string">r'$y \in [-1.0, \ 4.0]$'</span>, color=<span class="string">'k'</span>, fontsize=<span class="number">15</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>// 其中，r’$…$’ 语句表示使用 <strong>LaTex</strong> 公式符号，LaTex 公式符号见参考文献 [5].</p><p>可通过如下代码，在数据图中给特殊点添加注解 <strong>annotate</strong>：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 特殊点添加注解</span></span><br><span class="line">plt.scatter([<span class="number">8</span>,],[np.sqrt(<span class="number">8</span>),], <span class="number">50</span>, color =<span class="string">'m'</span>)  <span class="comment"># 使用散点图放大当前点</span></span><br><span class="line"></span><br><span class="line">plt.annotate(<span class="string">r'$2\sqrt{2}$'</span>, xy=(<span class="number">8</span>, np.sqrt(<span class="number">8</span>)), xytext=(<span class="number">8.5</span>, <span class="number">2.2</span>), fontsize=<span class="number">16</span>, color=<span class="string">'#090909'</span>, arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">'-&gt;'</span>, connectionstyle=<span class="string">'arc3, rad=0.1'</span>, color=<span class="string">'#090909'</span>))</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="设置图例"><a class="header-anchor" href="#设置图例">¶</a>设置图例</h3><p>可使用如下两种方式，给绘图设置图例：<br>1: 在 <strong>plt.plot</strong> 函数中添加 <strong>label</strong> 参数后，使用 plt.legend(loc=‘up right’)<br>2: 不使用参数 label, 直接使用如下命令：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.legend([<span class="string">'cos(x)'</span>, <span class="string">'sin(x)'</span>, <span class="string">'sqrt(x)'</span>], loc=<span class="string">'up right'</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>loc</strong> 参数表示图例的位置，常见的位置参数如下：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/legend.png" alt="legend loc 参数"></p><p>legend loc 参数图片由参考文献 [2] 提供。</p><h3 id="网格线开关"><a class="header-anchor" href="#网格线开关">¶</a>网格线开关</h3><p>可使用如下代码，给绘图设置网格线：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示网格线</span></span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="显示、保存"><a class="header-anchor" href="#显示、保存">¶</a>显示、保存</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.show()    <span class="comment"># 显示</span></span><br><span class="line"><span class="comment"># savefig('../figures/plot3d_ex.png',dpi=48)    # 保存，前提目录存在</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>本例完整代码已上传 github:</p><p><a href="https://github.com/absentm/Demo/blob/master/pythonCode/plot.py">plot.py</a></p><h3 id="显示中文"><a class="header-anchor" href="#显示中文">¶</a>显示中文</h3><p>默认的编程环境无法显示中文字符，这里提供一种方法，添加如下配置代码：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>]=[<span class="string">'SimHei'</span>]    <span class="comment"># 用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>]=<span class="literal">False</span>      <span class="comment"># 用来正常显示负号</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="其他图画法"><a class="header-anchor" href="#其他图画法">¶</a>其他图画法</h2><p>按照类型图的分类，下文简要记录一下直方图的基础代码，其他，如散点图、饼状图、轮廓图、3D图、多子图等从参考文献 [1] 获取。</p><h3 id="直方图"><a class="header-anchor" href="#直方图">¶</a>直方图</h3><p>直方图，也即柱状图，使用 bar API 进行绘制</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">x_size = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</span><br><span class="line">y_time_point = [<span class="number">0</span>, <span class="number">200</span>, <span class="number">415</span>, <span class="number">628</span>, <span class="number">714</span>, <span class="number">862</span>, <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">x_zhe = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]</span><br><span class="line">y_zhe = [<span class="number">200</span>, <span class="number">415</span>, <span class="number">628</span>, <span class="number">714</span>, <span class="number">862</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度标签</span></span><br><span class="line">plt.xticks(x_zhe, (<span class="string">u"3"</span>, <span class="string">u"5"</span>, <span class="string">u"7"</span>, <span class="string">u"9"</span>, <span class="string">u"11"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制柱状图</span></span><br><span class="line">plt.bar(left = (x_size), height = (y_time_point), width = <span class="number">1.0</span>,</span><br><span class="line">align=<span class="string">"center"</span>, facecolor = <span class="string">'lightskyblue'</span>,edgecolor = <span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加文本解释</span></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(x_zhe, y_zhe):</span><br><span class="line">    plt.text(x, y+<span class="number">10</span>, <span class="string">'%.0f'</span> % y, ha=<span class="string">'center'</span>, va= <span class="string">'bottom'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置y轴范围</span></span><br><span class="line">ylim(<span class="number">0</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画折线图</span></span><br><span class="line">plt.plot(x_zhe, y_zhe, <span class="string">'y.-'</span>)</span><br><span class="line">plt.title(<span class="string">'Time values change with Size'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Size'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Time (s)'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>以上代码可以得到如下直方图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/bar.png" alt="直方图"></p><h2 id="参考文献"><a class="header-anchor" href="#参考文献">¶</a>参考文献</h2><p>[1] <a href="http://www.labri.fr/perso/nrougier/teaching/matplotlib/#beyond-this-tutorial">http://www.labri.fr/perso/nrougier/teaching/matplotlib/#beyond-this-tutorial</a><br>[2] <a href="http://www.bioinfo.org.cn/~casp/temp/spring.lecture/Matplotlib_slides.pdf">http://www.bioinfo.org.cn/~casp/temp/spring.lecture/Matplotlib_slides.pdf</a><br>[3] <a href="http://matplotlib.org/api/pyplot_api.html">http://matplotlib.org/api/pyplot_api.html</a><br>[4] <a href="http://python.jobbole.com/85106/">http://python.jobbole.com/85106/</a><br>[5] <a href="http://mohu.org/info/symbols/symbols.htm">http://mohu.org/info/symbols/symbols.htm</a></p><hr><h2 id="声明"><a class="header-anchor" href="#声明">¶</a>声明</h2><blockquote><p>转载请注明作者和出处，禁止一切商业用途！</p></blockquote><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2><hr>]]></content>
      
      
      <categories>
          
          <category> Python Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sublime text 3 相关配置</title>
      <link href="/2020/05/17/Sublime-text-3-%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/05/17/Sublime-text-3-%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>上侍御七兄 - - - 王昌龄</p><blockquote><p>天人俟明路，益稷分尧心。<br>利器必先举，非贤安可任。<br>吾兄执严宪，时佐能钓深。</p></blockquote><p>sublime text 编辑器早已在业界声名显赫了，本文简单记录一下如何粉饰这匹不羁的野马， O(∩_∩)O 哈哈哈~！</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Sublime-m.png" alt="Sublime-m"></p><hr><h2 id="安装与注册"><a class="header-anchor" href="#安装与注册">¶</a>安装与注册</h2><p>&lt;1&gt;. sublime text 3 编辑器下载地址： <a href="http://www.sublimetext.com/3">官方地址</a>；</p><p>&lt;2&gt;. 注册码：Build 3114 和 Build 3103版本皆可， 亲测通过。</p><p>方法： help | Enter License:  copy 如下代码即可，</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">—– BEGIN LICENSE —–</span><br><span class="line">Michael Barnes</span><br><span class="line">Single User License</span><br><span class="line">EA7E-821385</span><br><span class="line">8A353C41 872A0D5C DF9B2950 AFF6F667</span><br><span class="line">C458EA6D 8EA3C286 98D1D650 131A97AB</span><br><span class="line">AA919AEC EF20E143 B361B1E7 4C8B7F04</span><br><span class="line">B085E65E 2F5F5360 8489D422 FB8FC1AA</span><br><span class="line">93F6323C FD7F7544 3F39C318 D95E6480</span><br><span class="line">FCCC7561 8A4A1741 68FA4223 ADCEDE07</span><br><span class="line">200C25BE DBBC4855 C4CFB774 C5EC138C</span><br><span class="line">0FEC1CEF D9DCECEC D3A5DAD1 01316C36</span><br><span class="line">—— END LICENSE ——</span><br></pre></td></tr></tbody></table></figure><p>注册成功后， 点击： help | About 之后可查看显示。</p><p>附：<strong>3143 版本</strong>注册码：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">—– BEGIN LICENSE —–</span><br><span class="line">TwitterInc</span><br><span class="line">200 User License</span><br><span class="line">EA7E-890007</span><br><span class="line">1D77F72E 390CDD93 4DCBA022 FAF60790</span><br><span class="line">61AA12C0 A37081C5 D0316412 4584D136</span><br><span class="line">94D7F7D4 95BC8C1C 527DA828 560BB037</span><br><span class="line">D1EDDD8C AE7B379F 50C9D69D B35179EF</span><br><span class="line">2FE898C4 8E4277A8 555CE714 E1FB0E43</span><br><span class="line">D5D52613 C3D12E98 BC49967F 7652EED2</span><br><span class="line">9D2D2E61 67610860 6D338B72 5CF95C69</span><br><span class="line">E36B85CC 84991F19 7575D828 470A92AB</span><br><span class="line">—— END LICENSE ——</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="主题的安装配置"><a class="header-anchor" href="#主题的安装配置">¶</a>主题的安装配置</h2><p><strong>今早起来, 打开我的sublime发现出大问题了,不能用了!!! OMG, 经一番查证, 发现是Otto Theme不能用了. 打开官网页面都不存在了, 真是见鬼了.</strong></p><p><strong>google 一下才知道, 原来是Otto Theme改名了, rename to "Boxy Theme"了.重新安装Boxy Theme一切正常.</strong></p><p><strong>因此, 博客内容更新如下. 给诸君带来的不便, 请见谅!</strong></p><p>推荐安装两款主题： <strong>Boxy Theme</strong> 和 <strong>Material Theme</strong>，</p><p>详细介绍参看： <a href="https://github.com/oivva/boxy">Boxy Theme</a> 和 <a href="https://packagecontrol.io/packages/Material%20Theme">Material Theme</a>；</p><hr><h3 id="安装-Package-Control："><a class="header-anchor" href="#安装-Package-Control：">¶</a>安装 Package Control：</h3><p>&lt;1&gt;. 打开 sublime text 3编辑器后，使用快捷键：Ctrl + `（注意，这个是键盘最左侧的波浪符号的那个字符， 在Esc的下方）， 调出命令行console。</p><p>&lt;2&gt;. copy如下代码到命令行后，回车执行：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request,os; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), 'wb').write(urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ','%20')).read())</span><br></pre></td></tr></tbody></table></figure><p>&lt;3&gt;. 注意： <strong>此处安装后，重启一下Sublime Text 3， 如果在Perferences-&gt;package settings中看到package control这一项，则安装成功。</strong></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-package%E2%80%94control.png" alt="sublime-package—control"></p><hr><h3 id="安装主题"><a class="header-anchor" href="#安装主题">¶</a>安装主题</h3><p>&lt;1&gt;. 使用快捷键ctrl + shift + p（Linux 或 windows下） 或 cmd + shift + p（Mac下），调出Package Control；</p><p>&lt;2&gt;. 在Package Control中输入： Install Package，安装主题插件；</p><p>&lt;3&gt;. 搜索<strong>Boxy Theme</strong> 和 <strong>Material Theme</strong>， 回车后安装；</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-install-package.png" alt="sublime-install-package"></p><hr><h3 id="配置主题-Boxy"><a class="header-anchor" href="#配置主题-Boxy">¶</a>配置主题 Boxy</h3><p>&lt;1&gt;. 修改 Preferences -&gt; Settings – User 配置文件，添加 theme 相关配置代码；</p><p>&lt;2&gt;. Boxy Yesterday配色， 添加如下代码，并保存：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Boxy Yesterday</span><br><span class="line">"theme": "Boxy Yesterday.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Boxy Theme/schemes/Boxy Yesterday.tmTheme",</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>效果如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-Boxy-Yesterday.png" alt="sublime-Boxy-Yesterday"></p><p>&lt;3&gt;. Boxy Tomorrow配色， 添加如下代码，并保存：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Boxy Tomorrow</span><br><span class="line">"theme": "Boxy Tomorrow.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Boxy Theme/schemes/Boxy Tomorrow.tmTheme",</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>效果如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-Boxy-Tomorrow.png" alt="sublime-Boxy-Tomorrow"></p><p>&lt;4&gt;. Boxy Ocean配色， 添加如下代码，并保存：</p><p><strong>这个主题配色， 我很中意， 啦啦啦啦！</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Boxy Ocean</span><br><span class="line">"theme": "Boxy Ocean.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Boxy Theme/schemes/Boxy Ocean.tmTheme",</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>效果如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-Boxy-Ocean.png" alt="sublime-Boxy-Ocean"></p><p>&lt;5&gt;. Boxy Monokai配色， 添加如下代码，并保存：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Boxy Monokai</span><br><span class="line">"theme": "Boxy Monokai.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Boxy Theme/schemes/Boxy Monokai.tmTheme",</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>效果如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-Boxy-Monokai.png" alt="sublime-Boxy-Monokai"></p><hr><p>&lt;6&gt;. Boxy主题又增加了更多新的玩法:</p><p>详见: <a href="https://github.com/oivva/boxy">Boxy Github地址</a></p><hr><h3 id="配置主题-Material"><a class="header-anchor" href="#配置主题-Material">¶</a>配置主题 Material</h3><p>&lt;1&gt;. 插件定制参看：</p><p><a href="https://github.com/equinusocio/material-theme-white-panels">White panels and inputs</a> 和 <a href="https://github.com/equinusocio/material-theme-appbar">Appbar</a></p><p>&lt;2&gt;. 修改 Preferences -&gt; Settings – User 配置文件，添加 theme 相关配置代码；</p><p>&lt;3&gt;. Material Default theme 配色， 添加如下代码，并保存：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Default theme</span><br><span class="line">"theme": "Material-Theme.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Material Theme/schemes/Material-Theme.tmTheme",</span><br></pre></td></tr></tbody></table></figure><p>效果如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-Material-Default-theme.png" alt="sublime-Material-Default-theme"></p><p>&lt;4&gt;. Material Darker theme 配色， 添加如下代码，并保存：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Darker theme</span><br><span class="line">"theme": "Material-Theme-Darker.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Material Theme/schemes/Material-Theme-Darker.tmTheme",</span><br><span class="line">    </span><br></pre></td></tr></tbody></table></figure><p>效果如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-Material-Darker-theme.png" alt="sublime-Material-Darker-theme"></p><p>&lt;5&gt;. Material Lighter theme 配色， 添加如下代码，并保存：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Lighter theme</span><br><span class="line">"theme": "Material-Theme-Lighter.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Material Theme/schemes/Material-Theme-Lighter.tmTheme",</span><br><span class="line">    </span><br></pre></td></tr></tbody></table></figure><p>效果如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-Material-Lighter-theme.png" alt="sublime-Material-Lighter-theme"></p><hr><h3 id="个性化设置"><a class="header-anchor" href="#个性化设置">¶</a>个性化设置</h3><p>&lt;1&gt;. 修改 Preferences -&gt; Settings – User 配置文件，添加相关配置代码；</p><p>&lt;2&gt;. 基本设置</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">"font_size": 11,   // 设置字体大小</span><br><span class="line">"highlight_line": true,     // 高亮当前行</span><br><span class="line">"update_check":false,   // 关闭自动更新</span><br><span class="line">// "bold_folder_labels": true, // 粗体显示文件夹名称</span><br><span class="line">// "font_face": ""      // 修改字体, 默认使用的是Consolas, ubuntu 下使用 "droid sans mono"</span><br><span class="line"></span><br><span class="line">"line_padding_bottom": 1,  // 设置字体间距</span><br><span class="line">"line_padding_top": 1,</span><br><span class="line"></span><br><span class="line">// editor options</span><br><span class="line">// "draw_white_space": "all",</span><br><span class="line"></span><br><span class="line">// tabs and whitespace</span><br><span class="line">"auto_indent": true,</span><br><span class="line">"rulers": [79],</span><br><span class="line">"smart_indent": true,</span><br><span class="line">"tab_size": 4,</span><br><span class="line">"trim_automatic_white_space": true,</span><br><span class="line">"use_tab_stops": true,</span><br><span class="line">"word_wrap": true,</span><br><span class="line">"wrap_width": 80,</span><br></pre></td></tr></tbody></table></figure><p>&lt;3&gt;. 我的配置：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">"font_size": 11,   // 设置字体大小</span><br><span class="line">    "highlight_line": true,     // 高亮当前行</span><br><span class="line">    "update_check":false,   // 关闭自动更新</span><br><span class="line">    // "font_face": ""      // 修改字体, 默认使用的是Consolas</span><br><span class="line">    // "bold_folder_labels": true, // 粗体显示文件夹名称</span><br><span class="line"></span><br><span class="line">"line_padding_bottom": 1,  // 设置字体间距</span><br><span class="line">"line_padding_top": 1,</span><br><span class="line">    // editor options</span><br><span class="line">    // "draw_white_space": "all",</span><br><span class="line"></span><br><span class="line">    // tabs and whitespace</span><br><span class="line">    "auto_indent": true,</span><br><span class="line">    "rulers": [79],</span><br><span class="line">    "smart_indent": true,</span><br><span class="line">    "tab_size": 4,        // 设置 tab 4 个字符宽度</span><br><span class="line">    "translate_tabs_to_spaces": true,   // 将 tab 转化为 4 个空白符</span><br><span class="line">    "trim_automatic_white_space": true,     </span><br><span class="line">    "use_tab_stops": true,</span><br><span class="line">    "word_wrap": true,</span><br><span class="line">    "wrap_width": 80,</span><br><span class="line"></span><br><span class="line">// Boxy Yesterday</span><br><span class="line">    // "theme": "Boxy Yesterday.sublime-theme",</span><br><span class="line">// "color_scheme": "Packages/Boxy Theme/schemes/Boxy Yesterday.tmTheme",</span><br><span class="line"></span><br><span class="line">    // Boxy Tomorrow</span><br><span class="line">    // "theme": "Boxy Tomorrow.sublime-theme",</span><br><span class="line">// "color_scheme": "Packages/Boxy Theme/schemes/Boxy Tomorrow.tmTheme",</span><br><span class="line"></span><br><span class="line">    // Boxy Ocean</span><br><span class="line">    "theme": "Boxy Ocean.sublime-theme",</span><br><span class="line">"color_scheme": "Packages/Boxy Theme/schemes/Boxy Ocean.tmTheme",</span><br><span class="line"></span><br><span class="line">    // Boxy Monokai</span><br><span class="line">    // "theme": "Boxy Monokai.sublime-theme",</span><br><span class="line">// "color_scheme": "Packages/Boxy Theme/schemes/Boxy Monokai.tmTheme",,</span><br><span class="line"></span><br><span class="line">    // Default theme</span><br><span class="line">    // "theme": "Material-Theme.sublime-theme",</span><br><span class="line">    // "color_scheme": "Packages/Material Theme/schemes/Material-Theme.tmTheme",</span><br><span class="line"></span><br><span class="line">    // Darker theme</span><br><span class="line">    // "theme": "Material-Theme-Darker.sublime-theme",</span><br><span class="line">    // "color_scheme": "Packages/Material Theme/schemes/Material-Theme-Darker.tmTheme",</span><br><span class="line"></span><br><span class="line">// Lighter theme</span><br><span class="line">    // "theme": "Material-Theme-Lighter.sublime-theme",</span><br><span class="line">    // "color_scheme": "Packages/Material Theme/schemes/Material-Theme-Lighter.tmTheme",</span><br><span class="line">    </span><br><span class="line">}</span><br><span class="line">    </span><br></pre></td></tr></tbody></table></figure><p>&lt;4&gt;. 快捷键设置</p><p>Sublime text 3 可以定制快捷键，需要在 <strong>Preferences -&gt; Key Bindings -&gt; User</strong> 配置文件中进行快捷键设置。</p><p><strong>1/</strong> 设置打开浏览器快捷键</p><p>在 sublime-keymap-user 配置文件中，添加如下代码：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">{ "keys": ["ctrl+shift+c"], "command": "open_in_browser" }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>&lt;5&gt;. 配置图</p><p><strong>关于配置的代码部分， 之后在使用过程中再逐步完善！</strong></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sublime-config.png" alt="sublime-config"></p><h2 id="问题及解决"><a class="header-anchor" href="#问题及解决">¶</a>问题及解决</h2><p><strong>1/</strong> 添加鼠标右键打开 Sublime Text 方式</p><p>有些时候可能遇到这样的情况，安装完成 Sublime Text 软件后，鼠标右键文件发现： <strong>鼠标右键没有使用 Sublime Text 打开的快捷方式了</strong>。那么，这样的情况下可以使用如下方式进行添加：</p><ol><li>打开注册表编辑器，开始 -&gt; 运行 -&gt; regedit 。</li><li>展开 HKEY_CLASSSES_ROOT -&gt; * -&gt; Shell：在 Shell 下，新建项命名为 Open With Sublime Text，在该新建项的右边窗口新建字符串值（右键 -&gt;新建 -&gt; 字符串值）；设置名称：Icon，值：D:\Program Files\Sublime Text 3\sublime_text.exe,0 <strong>[注：后边还有一个 “,0”，并注意将路径替换为自己的安装文件目录]</strong>。</li><li>在新建项 Open With Sublime Text 下新建项 Command <strong>[注：必须这个名称]</strong>；修改 Command 项右侧窗口的默认值，修改为：“D:\Program Files\Sublime Text 3\sublime_text.exe” “%1”。<strong>[注：替换为自己的安装文件目录，双引号一定要加，否则无法打开路径带空格的文件]</strong></li></ol><h2 id="插件"><a class="header-anchor" href="#插件">¶</a>插件</h2><p>&lt;1&gt;. SideBarEnhancements:</p><blockquote><p>SideBarEnhancements 扩展了侧边栏中菜单选项的数量，从而提升你的工作效率。诸如”New file” 和 “Duplicate” 这样的选项对于 ST3 来说实在是太重要了, 我甚至觉得 ST3 本来就应该提供这些功能。而且仅凭 “Delete” 这一个功能就让这个插件值得下载。这个功能将你会在你删除文件的时候把它放入回收站。虽然这个功能乍一看没什么用，但是当你没有使用这样的功能而彻底删除了一个文件的时候，除非你用了版本管理软件，否则你将很难恢复这个文件。</p></blockquote><p>&lt;2&gt;. Anaconda:</p><blockquote><p>Anaconda 是一个终极 Python 插件。它为 ST3 增添了多项 IDE 类似的功能。</p></blockquote><p>&lt;3&gt;. requirementstxt:</p><blockquote><p>Requirementstxt 可以为你的 requirements.txt 文件提供自动补全，语法高亮以及版本管理功能。</p></blockquote><p>&lt;4&gt;. SublimeLinter:</p><blockquote><p>SublimeLinter 是 ST3 的一个代码静态检查工具框架(linter)。这个插件本身来说并不包含任何的一个 linter，但是你可以通过在 Package Control 中输入 SublimeLinter-[linter_name] 的方式来安装一个 linter。</p></blockquote><p>&lt;5&gt;. GitGutter:</p><blockquote><p>GitGutter 让 ST3 能在左边栏的位置显示一个小图标，用以表示在最后一次提交以后，代码是否有追加，修改或者删除。</p></blockquote><p>&lt;6&gt;. Emmet:</p><blockquote><p>Emmet，以前叫做 Zen Coding，让你可以通过简单的缩写来创建 HTML 或者 CSS 的代码块。</p></blockquote><p>&lt;7&gt;. Markdown Preview:</p><blockquote><p>Markdown Preview 可以用来预览和编译 markdown 文件。</p></blockquote><p>你可以打开 Package Manager 然后输入 Markdown Preview 来查看可用的命令：</p><ul><li>Markdown Preview: Python Mrakdown: 在浏览器中预览 Markdown Preview: Python</li><li>Mrakdown: 导出 HTML 文件 Markdown Preview: Python Mrakdown: 拷贝到剪贴板</li><li>Markdown Preview: Github风格Markdown: 在浏览器中预览 Markdown Preview:</li><li>Github风格Markdown: 导出 HTML 文件 Markdown Preview: Github风格Markdown:</li><li>拷贝到剪贴板 Markdown Preview: 打开Markdown速查手册</li></ul><p>一旦你完成转换，你之后的所有保存都会立即反映到转换的文件中。</p><p>&lt;8&gt;. AdvancedNewFile:</p><blockquote><p>你只需要通过几个快捷键便可以打开 AdvancedNewFile 的输入框。然后输入路径和文件名。当你按下回车键后，文件便被创建了。除此之外，如果目标文件夹并不存在的话，该文件夹将会被自动建立。在默认情况下，你创建的文件的路径将会显示在状态栏中。</p></blockquote><p>&lt;9&gt;. CTags:</p><blockquote><p>Python 的智能补全插件。</p></blockquote><p>&lt;10&gt;. AutoFileName:</p><blockquote><p>在字符串中智能补全路径。</p></blockquote><p>&lt;11&gt;. Python PEP8 Autoformat:</p><blockquote><p>这是用来按PEP8自动格式化代码的。可以在包管理器中安装。快捷键 CTRL+SHIFT+R 自动格式化python代码。</p></blockquote><p>&lt;12&gt;. Alignment：</p><blockquote><p>Alignment 是一个代码格式化插件，它可以使多行代码中的等号对齐，也可以调整多行代码为一个缩进级别，默认快捷键是 ctrl+alt+a。</p></blockquote><p>&lt;13&gt;. Git 和 Gitignored: 不必多说。</p><p>&lt;14&gt;. ColorPicker :</p><blockquote><p>在编辑CSS样式的时候，要加个自己喜欢颜色或改改颜色啥的，要到PS里去调色？ColorPicker 可以让 Sublime Text 3内置一个调色盘，调好颜色，点击OK就会在光标处生成十六进制颜色代码。</p></blockquote><p>&lt;15&gt;. Pretty Json：</p><blockquote><p>Json 格式化工具</p></blockquote><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://hanyu.iciba.com/shi/63144.shtml">http://hanyu.iciba.com/shi/63144.shtml</a>;<br>[2]. <a href="https://scotch.io/bar-talk/best-sublime-text-3-themes-of-2015-and-2016">https://scotch.io/bar-talk/best-sublime-text-3-themes-of-2015-and-2016</a>;<br>[3]. <a href="http://www.cnblogs.com/Rising/p/3741116.html">http://www.cnblogs.com/Rising/p/3741116.html</a>;<br>[4]. <a href="https://packagecontrol.io/packages/Theme%20-%20Otto">https://packagecontrol.io/packages/Theme - Otto</a>;<br>[5]. <a href="https://packagecontrol.io/packages/Material%20Theme">https://packagecontrol.io/packages/Material Theme</a><br>[6]. <a href="https://github.com/oivva/boxy">https://github.com/oivva/boxy</a><br>[7]. <a href="https://github.com/oivva/boxy/wiki/Get-It#manual">https://github.com/oivva/boxy/wiki/Get-It#manual</a><br>[8]. <a href="http://python.jobbole.com/81312/">http://python.jobbole.com/81312/</a><br>[9]. <a href="http://www.imjeff.cn/blog/146/">http://www.imjeff.cn/blog/146/</a><br>[10]. <a href="http://blog.csdn.net/skykingf/article/details/47610089">http://blog.csdn.net/skykingf/article/details/47610089</a></p><hr><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编辑器 </tag>
            
            <tag> sublime text </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次由 python for、while-else 语法糖引发的深度学习</title>
      <link href="/2020/03/18/%E4%B8%80%E6%AC%A1%E7%94%B1-python-for%E3%80%81while-else-%E8%AF%AD%E6%B3%95%E7%B3%96%E5%BC%95%E5%8F%91%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
      <url>/2020/03/18/%E4%B8%80%E6%AC%A1%E7%94%B1-python-for%E3%80%81while-else-%E8%AF%AD%E6%B3%95%E7%B3%96%E5%BC%95%E5%8F%91%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="故事"><a class="header-anchor" href="#故事">¶</a>故事</h2><p>昨儿，一天迷离。</p><p>手忙脚乱，写了一段代码；<br>误打误撞，通过了测试用例；<br>迷迷糊糊，提交入库了。</p><p>今儿醒来 review， 觉得是 bug， 结果却获得了意外…</p><p>因此就有了这个，一次由 python for/while-else 「 语法糖 」 引发的 「 深度学习 」。</p><p>故事开头是这样的：</p><p>判断一个「 , 」分割的字符串，如果是 None，则返回「 * 」；如果不是，则遍历验证每一个元素是否在列表中，不存在则错误输出，存在则返回列表。</p><p>非常简单的逻辑，可我写成了这个样子：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/python-loop-else-Q1.png" alt="Python loop with else Question"></p><p>写过一段 C/C++ 或者 Java 的我，review 时看到这个，瞬间懵逼了。</p><p>bug 呀，那个 else 不应该出现呀，缩进应该往前提一下呀，语法错误呀…</p><p>可是测试用例的处理逻辑却跑的没问题呀，二脸懵逼…</p><p>赶紧 Google…</p><h2 id="Python-for-while-else-语法"><a class="header-anchor" href="#Python-for-while-else-语法">¶</a>Python for/while-else 语法</h2><p>搜索文档才发现：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/python-loop-else-Q2.png" alt="Python loop with else doc"></p><p>Python 的 for…else 和 while…else 语法，是 Python 中最不常用、最为误解的语法特性之一。</p><p>Python 中的 for、while 循环都可以有一个可选的 else 分支（类似 if 语句和 try 语句那样），在循环迭代正常完成之后执行。也就是说，如果我们不是以非正常方式以外的其他任意方式退出循环，那么 else 分支将被执行。也就是在循环体内没有 break 语句、没有 return 语句，或者没有异常出现。</p><p>那么，写一个 demo 测试一下这个语法糖吧。</p><h2 id="Demo-测试"><a class="header-anchor" href="#Demo-测试">¶</a>Demo 测试</h2><p>把代码写成这样，验证一下这个语法糖。</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"> # test_loop_with_else.py</span></span><br><span class="line"><span class="string"> # </span></span><br><span class="line"><span class="string"> # Copyright(C) By AbsentM. 2018</span></span><br><span class="line"><span class="string"> # </span></span><br><span class="line"><span class="string"> # Author: AbsentM</span></span><br><span class="line"><span class="string"> # Date: 2018/03/18</span></span><br><span class="line"><span class="string"> # </span></span><br><span class="line"><span class="string"> # Description: Test python loop with else demo</span></span><br><span class="line"><span class="string"> #</span></span><br><span class="line"><span class="string"> # Change Log:</span></span><br><span class="line"><span class="string"> # 2018/03/18 AbsentM Create the file</span></span><br><span class="line"><span class="string"> # 2018/03/18 AbsentM Add test demo</span></span><br><span class="line"><span class="string"> #</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_for_else_validation</span>(<span class="params">fruits</span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Test python for else</span></span><br><span class="line"><span class="string">    :param fruits: A string of fruits split with ','</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> fruits <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        fruits_result = <span class="string">"*"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fruits = fruits.split(<span class="string">","</span>)</span><br><span class="line">        <span class="built_in">print</span> <span class="string">"fruits &gt;&gt;&gt; {}"</span>.<span class="built_in">format</span>(fruits)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> fruits:</span><br><span class="line">            <span class="built_in">print</span> <span class="string">"item &gt;&gt;&gt; {}"</span>.<span class="built_in">format</span>(item)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            fruits_result = fruits</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">"total &gt;&gt;&gt; {}"</span>.<span class="built_in">format</span>(fruits_result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_while_else_validation</span>():</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Test python while else</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> index &lt;= <span class="number">10</span>:</span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">"index {}: {} "</span>.<span class="built_in">format</span>(index, index)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">"in while else"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">"---------------------------"</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">"Run first test..."</span></span><br><span class="line">test_1 = <span class="literal">None</span></span><br><span class="line">run_for_else_validation(test_1)</span><br><span class="line"><span class="built_in">print</span> <span class="string">"Run first test finished"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">"---------------------------"</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">"Run second test..."</span></span><br><span class="line">    test_2 = <span class="string">"apple"</span></span><br><span class="line">    run_for_else_validation(test_2)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">"Run second test finished"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">"---------------------------"</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">"Run third test..."</span></span><br><span class="line">    test_3 = <span class="string">"apple,pear,orange"</span></span><br><span class="line">    run_for_else_validation(test_3)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">"Run third test finished"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">"---------------------------"</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">"Run fourth test..."</span></span><br><span class="line">    run_while_else_validation()</span><br><span class="line">    <span class="built_in">print</span> <span class="string">"Run fourth test finished"</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输出的结果是这样的：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">---------------------------</span><br><span class="line">Run first test...</span><br><span class="line">total &gt;&gt;&gt; *</span><br><span class="line">Run first test finished</span><br><span class="line">---------------------------</span><br><span class="line">Run second test...</span><br><span class="line">fruits &gt;&gt;&gt; ['apple']</span><br><span class="line">item &gt;&gt;&gt; apple</span><br><span class="line">total &gt;&gt;&gt; ['apple']</span><br><span class="line">Run second test finished</span><br><span class="line">---------------------------</span><br><span class="line">Run third test...</span><br><span class="line">fruits &gt;&gt;&gt; ['apple', 'pear', 'orange']</span><br><span class="line">item &gt;&gt;&gt; apple</span><br><span class="line">item &gt;&gt;&gt; pear</span><br><span class="line">item &gt;&gt;&gt; orange</span><br><span class="line">total &gt;&gt;&gt; ['apple', 'pear', 'orange']</span><br><span class="line">Run third test finished</span><br><span class="line">---------------------------</span><br><span class="line">Run fourth test...</span><br><span class="line">index 1: 1 </span><br><span class="line">index 2: 2 </span><br><span class="line">index 3: 3 </span><br><span class="line">index 4: 4 </span><br><span class="line">index 5: 5 </span><br><span class="line">index 6: 6 </span><br><span class="line">index 7: 7 </span><br><span class="line">index 8: 8 </span><br><span class="line">index 9: 9 </span><br><span class="line">index 10: 10 </span><br><span class="line">index 11: 11 </span><br><span class="line">in while else</span><br><span class="line">Run fourth test finished</span><br><span class="line">[Finished in 0.3s]</span><br></pre></td></tr></tbody></table></figure><p>完整代码地址：<a href="https://github.com/absentm/Demo/blob/master/Python-demo/test-demo/test_loop_with_else.py">python-loop-with-else-demo</a></p><blockquote><p>庆幸每一次懵逼后的不知所措<br>庆幸每一次 fix 后的醍醐灌顶。</p></blockquote><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1] <a href="https://docs.python.org/2/tutorial/controlflow.html#for-statements">https://docs.python.org/2/tutorial/controlflow.html#for-statements</a><br>[2] <a href="http://book.pythontips.com/en/latest/for_-_else.html">http://book.pythontips.com/en/latest/for_-_else.html</a><br>[3] <a href="http://python.jobbole.com/81063/">http://python.jobbole.com/81063/</a></p><hr><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2>]]></content>
      
      
      <categories>
          
          <category> Python Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用的 Shell 命令整理</title>
      <link href="/2020/01/16/%E5%B8%B8%E7%94%A8%E7%9A%84-Shell-%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/"/>
      <url>/2020/01/16/%E5%B8%B8%E7%94%A8%E7%9A%84-Shell-%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="想法"><a class="header-anchor" href="#想法">¶</a>想法</h2><p>这篇主要记录一下在 Linux 终端下常用的 Shell 命令， 像 ls， cd, cp, mv 等基本的就不做整理介绍了，之后遇到了会一点点追加，算是一个整理吧。<strong>整理的命令都在 Ubuntu 14.04 LTS 系统亲测通过 …</strong></p><h2 id="wc-命令"><a class="header-anchor" href="#wc-命令">¶</a>wc 命令</h2><p>wc 命令是一个统计命令，使用方式可以使用 「 man wc 」 查看。</p><h3 id="统计文件个数"><a class="header-anchor" href="#统计文件个数">¶</a>统计文件个数</h3><p>1: 统计某文件夹下文件的个数</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注： 参数 '-l'， 是小写的英文字母 l, 不是数字 1</span></span><br><span class="line"><span class="built_in">ls</span> -l | grep <span class="string">"^-"</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></tbody></table></figure><p>2: 统计某文件夹下目录的个数</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l | grep <span class="string">"^ｄ"</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></tbody></table></figure><p>3: 统计文件夹下文件的个数，包括子文件夹</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -lR | grep <span class="string">"^-"</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></tbody></table></figure><p>4: 统计某目录(包含子目录)下的所有包含关键子的文件个数：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -lR 目录路径 | grep 关键字 | <span class="built_in">wc</span> -l</span><br><span class="line">或：</span><br><span class="line"><span class="built_in">ls</span> -l <span class="string">"目录路径"</span> | grep <span class="string">"关键字"</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></tbody></table></figure><p>例如：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计 /home/xxxx 下所有文件名称包含关键字"shell"的文件个数</span></span><br><span class="line"><span class="built_in">ls</span> -lR /home/xxxx | grep shell | <span class="built_in">wc</span> -l</span><br><span class="line">或：</span><br><span class="line"><span class="built_in">ls</span> -l <span class="string">"/home/xxxx"</span> | grep <span class="string">"shell"</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></tbody></table></figure><h3 id="统计代码行数"><a class="header-anchor" href="#统计代码行数">¶</a>统计代码行数</h3><blockquote><p>年底又要统计代码工作量了，总不能一个一个文件找吧。 试试 wc 这个命令吧。</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">wc</span> -l /usr/bin/*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计 /usr/bin/ 目录下所有代码文件的代码行数</span></span><br><span class="line"><span class="comment"># 该命令会输出该目录下每个代码文件的代码行数，最后输出总代码行数</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="scp-命令：不同节点间复制文件或者文件夹"><a class="header-anchor" href="#scp-命令：不同节点间复制文件或者文件夹">¶</a>scp 命令：不同节点间复制文件或者文件夹</h2><blockquote><p>Linux scp 命令用于 Linux 之间复制文件和目录。<br>scp 是 secure copy的缩写, scp 是 linux 系统下基于 ssh 登陆进行安全的远程文件拷贝命令。</p></blockquote><p><strong>Note:</strong> 请先确保集群中的各个节点间可以使用 SSH 免密登录。</p><h3 id="从本地复制文件"><a class="header-anchor" href="#从本地复制文件">¶</a>从本地复制文件</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp local_file remote_username@remote_ip:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_username@remote_ip:remote_file </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_ip:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_ip:remote_file </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>eg:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp /home/space/music/1.mp3 root@1.1.1.5:/home/root/others/music </span><br><span class="line">scp /home/space/music/1.mp3 root@1.1.1.5:/home/root/others/music/001.mp3 </span><br><span class="line">scp /home/space/music/1.mp3 1.1.1.5:/home/root/others/music </span><br><span class="line">scp /home/space/music/1.mp3 1.1.1.5:/home/root/others/music/001.mp3 </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="从本地复制文件夹"><a class="header-anchor" href="#从本地复制文件夹">¶</a>从本地复制文件夹</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r local_folder remote_username@remote_ip:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp -r local_folder remote_ip:remote_folder </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>eg:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp -r /home/space/music/ root@1.1.1.6:/home/root/others/ </span><br><span class="line">scp -r /home/space/music/ 1.1.1.6:/home/root/others/</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="复制文件到远程"><a class="header-anchor" href="#复制文件到远程">¶</a>复制文件到远程</h3><p>从远程复制到本地，只要将从本地复制到远程的命令的后 2 个参数调换顺序即可，如下实例</p><p>eg：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp root@1.1.1.6:/home/root/others/music /home/space/music/1.mp3 </span><br><span class="line">scp -r 1.1.1.6:/home/root/others/ /home/space/music/</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="tail-命令"><a class="header-anchor" href="#tail-命令">¶</a>tail 命令</h2><p>tail 命令依照要求将指定的文件的最后部分输出到标准设备，通常是终端，通俗讲来，就是把某个文件的最后几行显示到终端上，假设该文件有更新，tail 会自己主动刷新，确保你看到最新的输出内容，常用于监控 log 日志的输出等。</p><p>eg：</p><h3 id="tail-f"><a class="header-anchor" href="#tail-f">¶</a>tail -f</h3><p><strong>1/</strong> tail -f filename</p><p>监控 filename 文件的尾部内容（默认 10 行，相当于增加参数 -n 10），实时刷新显示在屏幕上。 按下 「 CTRL + C 」 退出，。</p><p><strong>2/</strong> tail -n 20 filename</p><p>显示 filename 最后 20 行。</p><p><strong>3/</strong> tail -r -n 10 filename</p><p>逆序显示 filename 最后 10 行。</p><h2 id="grep-命令"><a class="header-anchor" href="#grep-命令">¶</a>grep 命令</h2><p>Linux grep 命令用于查找文件里符合条件的字符串。常见的几个配置参数使用说明如下表格：</p><table><thead><tr><th>No</th><th>params</th><th>explain</th></tr></thead><tbody><tr><td>1</td><td>–version or -V</td><td>该命令的版本号</td></tr><tr><td>2</td><td>-A N</td><td>找到所有的匹配行，并显示匹配行后 N 行</td></tr><tr><td>3</td><td>-B N</td><td>找到所有的匹配行，并显示匹配行前面 N 行</td></tr><tr><td>4</td><td>-b</td><td>显示匹配到的字符在文件中的偏移地址</td></tr><tr><td>5</td><td>-c</td><td>显示有多少行被匹配到</td></tr><tr><td>6</td><td>–color</td><td>把匹配到的字符用颜色显示出来</td></tr><tr><td>7</td><td>-e</td><td>可以使用多个正则表达式</td></tr><tr><td>8</td><td>-f FILEA FILEB</td><td>FILEA 在 FILEAB 中的匹配</td></tr><tr><td>9</td><td>-i</td><td>不区分大小写针对单个字符</td></tr><tr><td>10</td><td>-m N</td><td>最多匹配 N 个后停止</td></tr><tr><td>11</td><td>-n</td><td>打印行号</td></tr><tr><td>12</td><td>-o</td><td>只打印出匹配到的字符</td></tr><tr><td>13</td><td>-R</td><td>搜索子目录</td></tr><tr><td>14</td><td>-v</td><td>显示不包括查找字符的所有行</td></tr></tbody></table><p>这里举这几个常用的参数的例子：</p><p>-v : 反转匹配输出。<br>-w : 精确匹配输出。<br>-c : 输出能匹配到的列数。</p><p>eg: /etc/hosts 文件中包含如下内容 [cat /etc/hosts]：</p><blockquote><p>127.0.0.1 xxxx xxxx xxxx xxxx<br>::1       xxxx xxxx xxxx xxxx<br>x.x.x.x   xxxx xxxx xxxx xxxx<br>x.x.x.x   xxxx xxxx xxxx xxxx</p></blockquote><p>则使用举例和输出如下：</p><p><strong>1</strong> 使用 -v 过滤</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/hosts | grep -v 127 | grep -v ::1</span><br></pre></td></tr></tbody></table></figure><p>则输出将前两行过滤了，输出如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x.x.x.x   xxxx xxxx xxxx xxxx</span><br><span class="line">x.x.x.x   xxxx xxxx xxxx xxxx</span><br></pre></td></tr></tbody></table></figure><p><strong>2</strong> 使用 -w 精确匹配</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/hosts | grep -w 127 </span><br></pre></td></tr></tbody></table></figure><p>则精确匹配搭配包含 「 127 」 的行，输出如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 xxxx xxxx xxxx xxxx</span><br></pre></td></tr></tbody></table></figure><p><strong>3</strong> 使用 -c 输出匹配的行数</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/hosts | grep -c 127 </span><br></pre></td></tr></tbody></table></figure><p>则精确匹配搭配包含 「 127 」 的行数为 1 ，输出如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ 1</span><br></pre></td></tr></tbody></table></figure><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1] <a href="http://blog.sina.com.cn/s/blog_464f6dba01012vwv.html">http://blog.sina.com.cn/s/blog_464f6dba01012vwv.html</a><br>[2] <a href="http://www.runoob.com/linux/linux-comm-scp.html">http://www.runoob.com/linux/linux-comm-scp.html</a><br>[3] <a href="https://www.jianshu.com/p/4131d09ff592">https://www.jianshu.com/p/4131d09ff592</a><br>[4] <a href="http://www.runoob.com/linux/linux-comm-grep.html">http://www.runoob.com/linux/linux-comm-grep.html</a></p><hr><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2>]]></content>
      
      
      <categories>
          
          <category> Linux Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql-5.7.19-winx64.zip 安装与配置</title>
      <link href="/2019/11/25/mysql-5-7-19-winx64-zip-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
      <url>/2019/11/25/mysql-5-7-19-winx64-zip-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>本篇记录一下 Windows 环境下 Mysql .zip版的安装配置流程。推荐使用 Mysql 的童鞋都使用 .zip 免安装版的配置方法。（.exe 直接安装的话，如果安装失败经常出现卸载不干净，重装失败的情况）</p><blockquote><p>本文已授权 <a href="http://www.apecoding.com/">猿代码</a> 同步发布。</p></blockquote><h2 id="下载"><a class="header-anchor" href="#下载">¶</a>下载</h2><p>从 Mysql 官网直接下载：<a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a> ，目前最新版是 5.7.19 。也可以适合自己的版本进行下载，其中 “Archive” 表示下载后直接解压即可，不需要安装，操作方便。</p><p><img src="http://media.apecoding.com/apc_59b7d9473277b.png" alt="Mysql 官网下载地址展示图"></p><p>具体的下载位置如图，（PS: 英文不好的童鞋要恶补啦）</p><p><img src="http://media.apecoding.com/apc_59b7d95ae16b3.png" alt="Mysql 官网下载地址位置"></p><p>下载完成后，找到一个不经常变更的目录解压缩该 mysql-5.7.19-winx64.zip 包，解压后的目录</p><p><img src="http://media.apecoding.com/apc_59b7d982282cc.png" alt="Mysql.zip 解压缩后"></p><h2 id="配置-my-ini-文件"><a class="header-anchor" href="#配置-my-ini-文件">¶</a>配置 my.ini 文件</h2><p>my.ini 是 Mysql 默认的配置文件，但是在最新版中居然没有该文件。那就新建吧，在 Mysql 的根目录中新建 my.ini 文件，并在其中添加如下代码，作为 Mysql 的初始配置：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line"># 设置 mysql 客户端默认字符集</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">#设置 3306 端口</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line"># 设置 mysql 的安装目录（注意，修改为自己的解压缩目录）</span><br><span class="line">basedir=E:\DevEnvironment\mysql-5.7.19-winx64</span><br><span class="line"></span><br><span class="line"># 设置 mysql 数据库的数据的存放目录（注意，修改为自己的解压缩目录）</span><br><span class="line">datadir=E:\DevEnvironment\mysql-5.7.19-winx64\data</span><br><span class="line"></span><br><span class="line"># 允许最大连接数</span><br><span class="line">max_connections=200</span><br><span class="line"></span><br><span class="line"># 服务端使用的字符集默认为 8 比特编码的 latin1 字符集</span><br><span class="line">character-set-server=utf8</span><br><span class="line"></span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line"># 免密码登陆</span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></tbody></table></figure><h2 id="配置-Mysql-环境变量"><a class="header-anchor" href="#配置-Mysql-环境变量">¶</a>配置 Mysql 环境变量</h2><p>在我的电脑 -&gt; 右键 -&gt; 属性 -&gt; 高级系统设置 -&gt; 系统属性 -&gt; 高级 -&gt; 环境变量 -&gt; 系统变量中新建如下环境变量（如图所示）：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">变量名：MYSQL_HOME</span><br><span class="line">变量值：E:\DevEnvironment\mysql-5.7.19-winx64 （自己 Mysql 解压缩的位置）</span><br></pre></td></tr></tbody></table></figure><p><img src="http://media.apecoding.com/apc_59b7d9bb7eaac.png" alt="MYSQL_HOME"></p><p>之后在系统变量 -&gt; Path 行中添加 Mysql 的 bin 目录，添加如下环境变量：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%MYSQL_HOME%\bin</span><br></pre></td></tr></tbody></table></figure><p>注意：Windows10 系统直接新建就行了，Windows7 中需要添加 “;” 号：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;%MYSQL_HOME%\bin</span><br></pre></td></tr></tbody></table></figure><h2 id="安装运行测试"><a class="header-anchor" href="#安装运行测试">¶</a>安装运行测试</h2><p>以<strong>管理员身份</strong>运行 cmd，并键入如下命令安装和初始化 Mysql：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize</span><br><span class="line">mysqld install</span><br><span class="line">net start mysql</span><br><span class="line">mysql -u -root</span><br></pre></td></tr></tbody></table></figure><p>之后便可以进入 Mysql 控制台界面了，如下图所示：</p><p><img src="http://media.apecoding.com/apc_59b7d9f14db0c.png" alt="从控制台进入 Mysql "></p><h2 id="安装-Navcat-可视化工具"><a class="header-anchor" href="#安装-Navcat-可视化工具">¶</a>安装 Navcat 可视化工具</h2><p>下载破解版的 Navcat 软件。下载链接：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">链接: http://pan.baidu.com/s/1dEG9S45 密码: 888y</span><br></pre></td></tr></tbody></table></figure><p>下载完成后，找到 Navcat 的安装目录，将破解文件 PatchNavicat.exe 复制到到与 navcat.exe 同级目录中，点击。（<strong>注意：</strong> 破解前一定要先关闭 navcat 软件）</p><p><img src="http://media.apecoding.com/apc_59b7da10a6b79.png" alt="Navcat 破解"></p><p><strong>安装成功打开软件如下图所示：</strong></p><p><img src="http://media.apecoding.com/apc_59b7da443173d.png" alt="Navcat 界面"></p><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a><br>[2]. <a href="http://www.navicat.com.cn/products/navicat-for-mysql/">http://www.navicat.com.cn/products/navicat-for-mysql/</a></p><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2><hr>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库题目整理及详解中文版（六）</title>
      <link href="/2019/06/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88%E5%85%AD%EF%BC%89/"/>
      <url>/2019/06/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88%E5%85%AD%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><blockquote><p>圆乎乎，光灼灼，亘古常存人怎学？入火不能焚，入水何曾溺？<br>光明一颗摩尼珠，剑戟刀枪伤不着。</p><p>也能善，也能恶，眼前善恶凭他作。<br>善时成佛与成仙，恶处披毛并带角。无穷变化闹天宫，雷将神兵不可捉。</p></blockquote><p>今者，　奉上美猴王！</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Sixth-kings.png" alt="DB-Sixth-kings"></p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><p>和同系列的上篇文章一样，题目来自于卡内基。梅隆大学的数据库技术课程的 Homework，在数据库 postgresql 中亲测通过；各版本的 SQL 环境差别不大，看看下文就知道，在其他版本的数据库，如 MySQL 等都能通过。</p><p>这部分主要是使用 SQL 语句进行查询相关操作，涉及到 sql 的视图，索引等，本文提供英文原版和中文版。</p><p><a href="https://absentm.github.io/2019/06/02/The-solution-of-Databases-Query-problems-Sixth/">英文版</a></p><hr><h2 id="题目详述"><a class="header-anchor" href="#题目详述">¶</a>题目详述</h2><p>本文的数据来源同样和上篇的一样，来自 2011 年 ５ 月发布的 MoviesLens 数据集。数据集的详细介绍请参考：<a href="http://www.cs.cmu.edu/~christos/courses/dbms.S12/hws/HW2/movielens-readme.txt">movielens-readme</a></p><p>原始的数据经过了预处理，我们可以将下述的两张表导入 PostgreSQL中：</p><ul><li>movies(mid, title, year, num ratings, rating) , 主键: mid</li><li>play in(mid, name, cast_position), 主键: mid, name</li></ul><p>这两张表包含如下信息: 哪个演员出演哪部电影, 以及在电影中位置; 对于每一部电影, 都包含 title(标题), year(上映时间), num ratings(收到的评分数目), rating(以及这些评分的平均值, 是一个float型的数字, 在 0~10 之间, 10 代表 ’’excellent’’).</p><hr><p>请在你的机器上使用 PostgreSQL, 根据以上信息回答如下问题:</p><p><strong>[Q1 – 演员池]</strong> 在数据库中查找所有不同演员的总数. <strong>[5 points]</strong></p><hr><p><strong>[Q2 – 最佳影片]</strong> 所有电影的评分次数至少达到了 10,000 次, 请筛选出选评分数目最高的前 10 部影片(mid, title, and rating) <strong>[5 points]</strong></p><hr><p><strong>[Q3 – 规模最大的影片]</strong> 筛选出雇佣演员人数最多的影片(mid, title). 如果包含多部，按照电影 ID 升序排列. <strong>[10 points]</strong></p><hr><p><strong>[Q4 – 活跃演员池]</strong> 从数据库中筛选出活跃演员的总数．活跃演员是指：他最近所演的电影是从2006年以后上映的．(i.e. year&gt;2006). <strong>[10 points]</strong></p><hr><p><strong>[Q5 – 和 Cruise一起工作的演员]</strong> 筛选出多次和 Tom Cruise合作的演员. 如果包含多个，按照姓名升序排列.  <strong>[10 points]</strong></p><hr><p><strong>[Q6 – 和新组合一块工作的演员]</strong> 筛选出和 Tom Cruise and Katie Holmes 都一同合作过的演员. 如果包含多个，按照姓名升序排列. <strong>[10 points]</strong></p><hr><p><strong>[Q7 – 最有名的演员]</strong> 筛选出排名前 10 的活跃演员（如Ｑ4所定义的），按他们收到的评分总数来说．例如，如果 Tom Hanks 出演了３部电影，且评分数目分别是 30, 20, 和 10, 那么他的总评分数为： 30+20+10=60. <strong>[10 points]</strong></p><hr><p><strong>[Q8 – 最佳领衔演员]</strong> 我们定义领先主演为：演员在电影演员表的位置是 １或２(如，电影泰坦尼克号的主演是 Leonardo DiCaprio 和 Kate Winslet).那么我就说每个演员获得的星际评分数为他们领先主演的电影的平均评分． 如, 如果 Leonardo DiCaprio 在三部电影中出演, 且评分分别为 7.0, 7.5 and 8.0， 但是他只在前两部电影中最为主演，那么他的星级评分为： (7.0 + 7.5) / 2 = 7.25.</p><p>请筛选出星级评分数目排名前 10 的演员．为了减少计算噪声，演员领衔主演的电影数目至少为5次．<strong>[10 points]</strong></p><hr><p><strong>[Q9 – 2008年为转折点的演员]</strong> 请筛选出以 2008 为事业转折点的演员的数量，即他们在 2008 年出演的电影数目多于其他年份. <strong>[15 points]</strong></p><hr><p><strong>[Q10 – Dual Favorite Movies]</strong> 一个分析家想要找到一个在任何时期都被称为最好的电影的集合．他同时考虑两个因素: 平均得分（average rating ）and 获得的评分数目(num_ratings). 他使用如下规则决定一部影片是否好于另外一部：如２部电影分别命名为 m 1 和 m 2 , 我们定义 m1 主导 m2 为：当且仅当m 1 相比 ｍ2 具有更高的平均得分和评分数目.</p><p>请筛选出一个电影集合 <strong>M</strong>(title, num_ratings, rating) , 在集合中的每一部电影都相互独立，不能由另一部电影所主导．返回的结果按照电影的标题升序排列. (FYI: 这种查询被称为<strong>轮廓查询（Skyline Query）</strong>) <strong>[15 points]</strong></p><hr><h2 id="解答"><a class="header-anchor" href="#解答">¶</a>解答</h2><p>本文给出了所有在 Postgres 中测试过的答案, 相信大家可以很容易地在 Mysql 或 Sqlite 中进行转化.</p><p>相关数据库，表以及数据导入的操作请详见同系列上篇博客：<a href="https://absentm.github.io/2019/05/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88%E4%BA%94%EF%BC%89/">数据库题目整理及详解中文版（五）</a></p><p>初始化：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo su - postgres          # 登录 postgres</span><br><span class="line">psql</span><br><span class="line"></span><br><span class="line">select current_database();  # ===&gt; 相当于mysql下的show databases;</span><br><span class="line">\l;                         # 列出所有的数据库</span><br><span class="line">\c testdb;                  # 切换到testdb数据库下，相当于mysql中的 use testdb</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-1"><a class="header-anchor" href="#解答-1">¶</a>解答 1</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(DISTINCT name) FROM play_in;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-2"><a class="header-anchor" href="#解答-2">¶</a>解答 2</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT mid, title, rating FROM movies</span><br><span class="line">WHERE num_ratings &gt;= 10000</span><br><span class="line">ORDER BY rating DESC LIMIT 10;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-3"><a class="header-anchor" href="#解答-3">¶</a>解答 3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW freq</span><br><span class="line">AS</span><br><span class="line">SELECT mid FROM play_in</span><br><span class="line">GROUP BY mid</span><br><span class="line">HAVING COUNT(*) &gt;= ALL (SELECT COUNT(*)</span><br><span class="line">    FROM play_in GROUP BY mid);</span><br><span class="line"></span><br><span class="line">SELECT freq.mid, title FROM freq, movies WHERE freq.mid = movies.mid ORDER BY mid DESC;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答４"><a class="header-anchor" href="#解答４">¶</a>解答４</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW latest</span><br><span class="line">AS</span><br><span class="line">SELECT name, max(year) FROM play_in, movies</span><br><span class="line">WHERE play_in.mid = movies.mid</span><br><span class="line">GROUP BY name</span><br><span class="line">HAVING max(year) &gt; 2006;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) FROM latest;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-５"><a class="header-anchor" href="#解答-５">¶</a>解答 ５</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW cruise_list</span><br><span class="line">AS</span><br><span class="line">SELECT a1.name, COUNT(*) as C FROM play_in AS a1, play_in AS a2</span><br><span class="line">WHERE a1.mid = a2.mid</span><br><span class="line">AND a2.name = 'Tom Cruise'</span><br><span class="line">AND a1.name &lt;&gt; 'Tom Cruise'</span><br><span class="line">GROUP BY a1.name;</span><br><span class="line"></span><br><span class="line">SELECT name FROM cruise_list where C &gt;= ALL(SELECT C FROM cruise_list) ORDER BY name;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-６"><a class="header-anchor" href="#解答-６">¶</a>解答 ６</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT a1.name FROM play_in AS a1, play_in AS a2</span><br><span class="line">WHERE a1.mid = a2.mid AND a2.name = 'Tom Cruise' AND a1.name &lt;&gt; 'Tom Cruise'</span><br><span class="line">INTERSECT</span><br><span class="line">SELECT a1.name FROM play_in AS a1, play_in AS a2</span><br><span class="line">WHERE a1.mid = a2.mid AND a2.name = 'Katie Holmes' AND a1.name &lt;&gt; 'Katie Holmes'</span><br><span class="line">ORDER BY name;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-７"><a class="header-anchor" href="#解答-７">¶</a>解答 ７</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT play_in.name, SUM(num_ratings) </span><br><span class="line">FROM play_in, movies</span><br><span class="line">WHERE play_in.mid = movies.mid</span><br><span class="line">GROUP BY name HAVING MAX(year) &gt; 2006</span><br><span class="line">ORDER BY SUM(num_ratings)</span><br><span class="line">DESC LIMIT 10;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-８"><a class="header-anchor" href="#解答-８">¶</a>解答 ８</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT play_in.name, AVG(movies.rating) </span><br><span class="line">FROM play_in, movies</span><br><span class="line">WHERE cast_position&lt;3 AND play_in.mid = movies.mid</span><br><span class="line">GROUP BY play_in.name</span><br><span class="line">HAVING count(*) &gt;= 5</span><br><span class="line">ORDER BY avg(movies.rating)</span><br><span class="line">DESC LIMIT 10;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-９"><a class="header-anchor" href="#解答-９">¶</a>解答 ９</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW helptable(name, year, num_movies) AS</span><br><span class="line">SELECT name, year, count(*) FROM movies AS m, play_in AS p</span><br><span class="line">WHERE m.mid = p.mid</span><br><span class="line">GROUP BY name, year;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(t1.name) FROM helptable AS t1</span><br><span class="line">WHERE t1.year = 2008 AND t1.num_movies &gt; ALL (</span><br><span class="line">SELECT num_movies FROM helptable AS t2</span><br><span class="line">WHERE t1.name = t2.name AND t2.year &lt;&gt; 2008);</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-10"><a class="header-anchor" href="#解答-10">¶</a>解答 10</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT title, num_ratings, rating FROM movies</span><br><span class="line">WHERE mid NOT IN</span><br><span class="line">(SELECT a2.mid FROM movies AS a1, movies AS a2</span><br><span class="line">WHERE a1.mid&lt;&gt;a2.mid</span><br><span class="line">AND a1.num_ratings &gt; a2.num_ratings</span><br><span class="line">AND a1.rating &gt; a2.rating)</span><br><span class="line">ORDER BY title;</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://www.cs.cmu.edu/~christos/courses/dbms.S12/hws/HW2/PostgreSQLReadme.htm">http://www.cs.cmu.edu/~christos/courses/dbms.S12/hws/HW2/PostgreSQLReadme.htm</a><br>[2]. <a href="http://blog.chinaunix.net/uid-26642180-id-3485465.html">http://blog.chinaunix.net/uid-26642180-id-3485465.html</a><br>[3]. <a href="http://www.cnblogs.com/gaojian/archive/2013/07/04/3170989.html">http://www.cnblogs.com/gaojian/archive/2013/07/04/3170989.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The solution of Databases Query problems(Sixth)</title>
      <link href="/2019/06/02/The-solution-of-Databases-Query-problems-Sixth/"/>
      <url>/2019/06/02/The-solution-of-Databases-Query-problems-Sixth/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="Preface"><a class="header-anchor" href="#Preface">¶</a>Preface</h2><blockquote><p>Much round, light burning, ancient people how to learn? Ever fell into fire cannot burn, drowned into the water cannot be die?<br>Just like a mani bead light, impervious halberd knives and swords.</p><p>Can also be kind, also be evil, kind or evil just with him.<br>When kind, can be immortal Buddha; When evil, like a beast. Havoc in Heaven with 72 changes, divine troops descending from Heaven also have no alternative.</p></blockquote><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Sixth-kings.png" alt="DB-Sixth-kings"></p><hr><h2 id="Presentation"><a class="header-anchor" href="#Presentation">¶</a>Presentation</h2><p>In this page, we also will show the homework of the course of the Databases Technology in CMU just like the advance lists of ( Five ). All of the questions we tested in the postgresql.</p><p>This section mainly is to practice the query operation of the SQL, include SQL view, index, etc. We also sure that all the sqls will pass in the MySQL, this article also will provide the Chinese version in detail.</p><p><a href="https://absentm.github.io/2019/06/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88%E5%85%AD%EF%BC%89/">DB-Sixth-cn</a></p><hr><h2 id="Question-Details"><a class="header-anchor" href="#Question-Details">¶</a>Question Details</h2><p>In this question we will use the MovieLens dataset released in May 2011. For more details, please refer to: <a href="http://www.cs.cmu.edu/~christos/courses/dbms.S12/hws/HW2/movielens-readme.txt">movielens-readme</a></p><p>We preprocessed the original dataset and loaded the following two tables to PostgreSQL, this is same to the list of ( Five ):</p><p>• movies(mid, title, year, num ratings, rating) , Primary key: mid<br>• play in(mid, name, cast position), Primary key: mid, name</p><p>In the table movies, mid is the unique identifier for each movie, title is the movie’s title, and year is the movie’s year-of-release. Each movie receives a total number of num_ratings ratings from users, and the average rating is rating on a scale of 0.0-10.0.</p><p>The table play_in contains the main cast of movies. name is the actor’s name (assume each actor has an unique name). cast_position is the order of the actor where he/she appears on the movie cast list (For example, in the movie Titanic, the cast_positions of Leonardo DiCaprio and Kate Winslet are 1 and 2, respectively).</p><hr><p>We will use Postgres, which is installed in the your own machines.</p><p><strong>Queries</strong></p><p>Write SQL queries for the following:</p><p><strong>[Q1 – Actor Pool]</strong> Find the total number of distinct actors in the database. <strong>[5 points]</strong></p><hr><p><strong>[Q2 – Best Rated Motion Pictures]</strong> Among all the movies rated for at least 10,000 times, select the top-10 movies (mid, title, and rating) which receive the highest average rating. <strong>[5 points]</strong></p><hr><p><strong>[Q3 – Largest Crew]</strong> Return the movie (mid, title) that employed the largest number of actors. If there is a tie, sort the mid’s in ascending order. <strong>[10 points]</strong></p><hr><p><strong>[Q4 – Active Actor Pool]</strong> Return the total number of active actors in the database. An active actor is one whose most recent movie is released after the year 2006 (i.e. year&gt;2006). <strong>[10 points]</strong></p><hr><p><strong>[Q5 – Working with Cruise]</strong> Return the actors (name) who has collaborated with Tom Cruise the most of times. If there is a tie, sort the name in ascending order. <strong>[10 points]</strong></p><hr><p><strong>[Q6 – Working with the New Couple]</strong> Return the actors (name) who have collaborated with both Tom Cruise and Katie Holmes. Sort the output on ascending order of name. <strong>[10 points]</strong></p><hr><p><strong>[Q7 – The Most Famous Actors]</strong> Find the top-10 active actors (as defined in Q4) whose movies receive the most ratings in total. For example, if Tom Hanks had played in three movies, whose num_ratings are 30, 20, and 10 respectively, then the total number of ratings of his movies would be 30+20+10=60. <strong>[10 points]</strong></p><hr><p><strong>[Q8 – The Best Actors in a Leading Role]</strong> We define the leading role of each movie as the actors whose cast_position is either 1 or 2 (so the leading role of the movie Titanic is Leonardo DiCaprio and Kate Winslet). Then we say the star quality of each actor is the average rating of the movies in which he/she has played a leading role. For example, if Leonardo DiCaprio had acted in three movies, whose ratings are 7.0, 7.5 and 8.0 respectively, but he only played the first two movies as a leading role, then his star quality would be (7.0 + 7.5) / 2 = 7.25.</p><p>Find the actors (name) with top-10 star quality. To reduce noise, the actor must have played as a leading role for at least 5 times. <strong>[10 points]</strong></p><hr><p><strong>[Q9 – The Breakout Actors in 2008]</strong> Find the number of actors who have acted in more movies in the year 2008 than any other year in their career. <strong>[15 points]</strong></p><hr><p><strong>[Q10 – Dual Favorite Movies]</strong> One analyst wants to find a set of all-time best movies. He considers two metrics at the same time: its average rating (rating) and the number of ratings it receives (num_ratings). He uses the following rule to determine whether one movie is better than another: For two movies m 1 and m 2 , we define that m 1 dominates m 2 if and only if m 1 has<br>a higher average rating and m 1 receives more ratings.</p><p>Find a set of movies (title, num_ratings, rating) M, so that each movie in M is not dominated by any other movie in the database. Return the output on ascending order of title. (FYI: This query is also known as the Skyline Query) <strong>[15 points]</strong></p><hr><h2 id="Answer"><a class="header-anchor" href="#Answer">¶</a>Answer</h2><p>we give the Postgres version in detail, we will see you can tranfer it easily in mysql or others.</p><p>We should create tables of movies and play_in in advance. all the operations we have completed, you can see the refer to: <a href="http://blog.csdn.net/mduanfire/article/details/51405664">the address: create tables[movies, play_in] and load datas</a> .</p><p>Initialization:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo su - postgres     # login postgres</span><br><span class="line">psql</span><br><span class="line"></span><br><span class="line">select current_database(); # ===&gt; show databases;</span><br><span class="line">\l; # list all the databases</span><br><span class="line">\c testdb;# switch to testdb database;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-1"><a class="header-anchor" href="#Solution-1">¶</a>Solution 1</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(DISTINCT name) FROM play_in;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-2"><a class="header-anchor" href="#Solution-2">¶</a>Solution 2</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT mid, title, rating FROM movies</span><br><span class="line">WHERE num_ratings &gt;= 10000</span><br><span class="line">ORDER BY rating DESC LIMIT 10;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-3"><a class="header-anchor" href="#Solution-3">¶</a>Solution 3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW freq</span><br><span class="line">AS</span><br><span class="line">SELECT mid FROM play_in</span><br><span class="line">GROUP BY mid</span><br><span class="line">HAVING COUNT(*) &gt;= ALL (SELECT COUNT(*)</span><br><span class="line">FROM play_in GROUP BY mid);</span><br><span class="line"></span><br><span class="line">SELECT freq.mid, title FROM freq, movies WHERE freq.mid = movies.mid ORDER BY mid DESC;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-4"><a class="header-anchor" href="#Solution-4">¶</a>Solution 4</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW latest</span><br><span class="line">AS</span><br><span class="line">SELECT name, max(year) FROM play_in, movies</span><br><span class="line">WHERE play_in.mid = movies.mid</span><br><span class="line">GROUP BY name</span><br><span class="line">HAVING max(year) &gt; 2006;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) FROM latest;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-5"><a class="header-anchor" href="#Solution-5">¶</a>Solution 5</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW cruise_list</span><br><span class="line">AS</span><br><span class="line">SELECT a1.name, COUNT(*) as C FROM play_in AS a1, play_in AS a2</span><br><span class="line">WHERE a1.mid = a2.mid</span><br><span class="line">AND a2.name = 'Tom Cruise'</span><br><span class="line">AND a1.name &lt;&gt; 'Tom Cruise'</span><br><span class="line">GROUP BY a1.name;</span><br><span class="line"></span><br><span class="line">SELECT name FROM cruise_list where C &gt;= ALL(SELECT C FROM cruise_list) ORDER BY name;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-6"><a class="header-anchor" href="#Solution-6">¶</a>Solution 6</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT a1.name FROM play_in AS a1, play_in AS a2</span><br><span class="line">WHERE a1.mid = a2.mid AND a2.name = 'Tom Cruise' AND a1.name &lt;&gt; 'Tom Cruise'</span><br><span class="line">INTERSECT</span><br><span class="line">SELECT a1.name FROM play_in AS a1, play_in AS a2</span><br><span class="line">WHERE a1.mid = a2.mid AND a2.name = 'Katie Holmes' AND a1.name &lt;&gt; 'Katie Holmes'</span><br><span class="line">ORDER BY name;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-7"><a class="header-anchor" href="#Solution-7">¶</a>Solution 7</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT play_in.name, SUM(num_ratings) </span><br><span class="line">FROM play_in, movies</span><br><span class="line">WHERE play_in.mid = movies.mid</span><br><span class="line">GROUP BY name HAVING MAX(year) &gt; 2006</span><br><span class="line">ORDER BY SUM(num_ratings)</span><br><span class="line">DESC LIMIT 10;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-8"><a class="header-anchor" href="#Solution-8">¶</a>Solution 8</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT play_in.name, AVG(movies.rating) </span><br><span class="line">FROM play_in, movies</span><br><span class="line">WHERE cast_position&lt;3 AND play_in.mid = movies.mid</span><br><span class="line">GROUP BY play_in.name</span><br><span class="line">HAVING count(*) &gt;= 5</span><br><span class="line">ORDER BY avg(movies.rating)</span><br><span class="line">DESC LIMIT 10;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-9"><a class="header-anchor" href="#Solution-9">¶</a>Solution 9</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW helptable(name, year, num_movies) AS</span><br><span class="line">SELECT name, year, count(*) FROM movies AS m, play_in AS p</span><br><span class="line">WHERE m.mid = p.mid</span><br><span class="line">GROUP BY name, year;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(t1.name) FROM helptable AS t1</span><br><span class="line">WHERE t1.year = 2008 AND t1.num_movies &gt; ALL (</span><br><span class="line">SELECT num_movies FROM helptable AS t2</span><br><span class="line">WHERE t1.name = t2.name AND t2.year &lt;&gt; 2008);</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-10"><a class="header-anchor" href="#Solution-10">¶</a>Solution 10</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT title, num_ratings, rating FROM movies</span><br><span class="line">WHERE mid NOT IN</span><br><span class="line">(SELECT a2.mid FROM movies AS a1, movies AS a2</span><br><span class="line">WHERE a1.mid&lt;&gt;a2.mid</span><br><span class="line">AND a1.num_ratings &gt; a2.num_ratings</span><br><span class="line">AND a1.rating &gt; a2.rating)</span><br><span class="line">ORDER BY title;</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Reference"><a class="header-anchor" href="#Reference">¶</a>Reference</h2><p>[1]. <a href="http://www.cs.cmu.edu/~christos/courses/dbms.S12/hws/HW2/PostgreSQLReadme.htm">http://www.cs.cmu.edu/~christos/courses/dbms.S12/hws/HW2/PostgreSQLReadme.htm</a><br>[2]. <a href="http://blog.chinaunix.net/uid-26642180-id-3485465.html">http://blog.chinaunix.net/uid-26642180-id-3485465.html</a><br>[3]. <a href="http://www.cnblogs.com/gaojian/archive/2013/07/04/3170989.html">http://www.cnblogs.com/gaojian/archive/2013/07/04/3170989.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库题目整理及详解中文版（五）</title>
      <link href="/2019/05/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88%E4%BA%94%EF%BC%89/"/>
      <url>/2019/05/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88%E4%BA%94%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><blockquote><p>有雨的时候既没有太阳也没有月亮，人们却多不以为许。</p><p>有雨的夜晚则另有一番月夜所没有的韵味。</p><p>有时不由让人想起李商隐“何当共剪西窗烛，却话巴山夜雨时”的名句</p></blockquote><p>雨中, 从对面天空中传来丝丝音符; 这里, 静谧而又舒畅.</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Databases-in-rain.png" alt="Databases-in-rain"></p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><p>本文算作一篇译文吧, 题目来自于卡内基.梅隆大学的数据库技术课程的Homework, 在数据库postgresql中亲测通过; 各版本的SQL环境差别不大, 看看下文就知道, 在其他版本的数据库, 如mysql | sqlite等都能通过.</p><p>这部分主要是使用SQL语句进行<strong>查询相关操作</strong>, 涉及到<strong>sql的视图, 索引</strong>等, 本文提供英文原版和中文版.</p><p><a href="https://absentm.github.io/2019/05/14/The-solution-of-Databases-Query-problems-Fifth/">英文版</a></p><hr><h2 id="题目详述"><a class="header-anchor" href="#题目详述">¶</a>题目详述</h2><p>在本页面中, 你需要使用SQL的查询语句来回答下面的问题, 下文中给出的是一个关于电影的数据库, 该数据库中包含电影影片和演员的信息, 数据表如下所示:</p><ul><li>movies(<em>mid</em>, title, year, num ratings, rating) , 主键: mid</li><li>play in(<em>mid, name</em>, cast_position),  主键: mid, name</li></ul><p>这两张表包含如下信息: 哪个演员出演哪部电影, 以及在电影中位置; 对于每一部电影, 都包含title(标题), year(上映时间), num ratings(收到的评分数目), rating(以及这些评分的平均值, 是一个float型的数字, 在0~10之间, 10代表’’excellent’').</p><hr><p>请在你的机器上使用PostgreSQL, 根据以上信息回答如下问题:</p><p><strong>Question 1: 热身练习 . . . . . . . . . . . . . . . . . . . . . . . . . [5 points]</strong><br>(a) [2 分] 打印出所有在电影"Quantum of Solace"中的所有演员, 按照他们 在影片中的位置(cast position)排列, 且只打印出他们的名字(name);<br>(b) [3 分] 打印2002年上映的所有影片的标题, 约束rating评分大于8, 且num_ratings &gt; 1.</p><hr><p><strong>Question 2: 找出相关明星的电影. . . . . . . . . . . . . . . . . . . . [5 points]</strong><br>(a) [5 分] 打印有关电影明星"Sean Connery"主演(即, 他在演员表位于第一位: cast_position=1)的影片的标题, 电影标题按字母排序.</p><hr><p><strong>Question 3: 最优秀的演员 . . . . . . . . . . . . . . . . . . . . . . . . . . [15 points]</strong><br>(a) [8 分] 我们想要查找最优秀的演员. 关于最优秀的定义如下计算公式:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-1.png" alt="DB-Fifth-1"></p><p>请打印最优秀的5个演员, 先后顺序与演员名字字母顺序无关.</p><p>(b) [7 分] 现在, 我们想要找到5个最优秀的演员, 仅就他们获得评分的数量而言. 如, 如果演员‘Smith’在两部电影中出演, 且两部影片的评分分别是10和15, 则Smith’s 流行度为25 (=10+15).</p><p>请根据演员的流行度打印出最流行的5个演员. 同样, 先后顺序与演员名字字母顺序无关.</p><hr><p><strong>Question 4: 最受争议的演员 . . . . . . . . . . . . . . . . [10 points]</strong><br>(a) [10 分] 我们想要找出最受争议的演员.最受争议的演员的计算方式如下: 通过演员在两部影片中获得评分的最大差异来评判(与演员在演员表的位置无关). 如, 演员‘Smith’在一部电影中获得的评分rating=1.2, 在另一部电影中获得的评分rating=9.5, 那么他所获得的争议得分为9.5-1.2= 8.3.</p><p>请打印出最具争议性的演员的姓名, 同样, 先后顺序与演员名字字母顺序无关.</p><hr><p><strong>Question 5: 仆从人员 . . . . . . . . . . . . . . . . . . . . . . . . . . . . [20 points]</strong><br>(a) [20 分] 查找演员Annette Nicole作为仆从的演员: 查找电影中演员Annette Nicole作为仆从或没有作为仆从的演员的名字. 答案中不包含Annette Nicole, 且名字按字母排序.</p><hr><p><strong>Question 6: 高产出 . . . . . . . . . . . . . . . . . . . . . . . . [5 points]</strong><br>(a) [5 分] 查找产出影片数量最高的2个年份(根据年份中产出的影片数量). 结果按照时间顺序打印, 且只打印出年份.</p><hr><p><strong>Question 7: 相似演员表的电影 . . . . . . . . . . . . . . . . [15 points]</strong><br>(a) [8 分] 打印电影中演员不同派对关系的影片的数量, 电影中至少有1个演员相同(忽略他们在演员表中的位置).<br>(b) [7 分] 打印电影中演员不同派对关系的影片的数量, 电影中至少有2个演员相同(忽略他们在演员表中的位置).</p><hr><p><strong>Question 8: 轮廓查询 . . . . . . . . . . . . . . . . . . . . . . . . . . . [25 points]</strong><br>(a) [25 分] 我们想找出一个关于电影影片的集合, 这个集合都具有高人气(即, 高num_ratings)以及高质量(rating)。如果没有一个这样的电影存在 - 在这种情况下, 我们进行所谓的轮廓查询。更具体地说, 我们希望所有的电影都不是由任何其他电影“主导”:</p><p><strong>主导的定义 :</strong> <em>电影 “A” 主导 电影 “B”, 如果电影 “A” 胜于 “B”, 即A在这两个标准(高 num_ratings 和 高 rating)都胜于B, 或者只要有其中一个标准中胜过B. 我们则称电影 “A” 主导 电影 “B”.</em></p><p>图 1 给出了一个形象的例子: 实点 (’A’, ’D’, ’F’)并不由任何其他点所主导,从而形成了一个轮廓线。所有其他点都至少被一个其他点所主导: 例如,点 “B” 被点 “A” 所主导, 如图阴影矩形框的右上角有一个点 “A” 。</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-figure-1.png" alt="DB-Fifth-figure-1"></p><p>图 1: 关于轮廓和主导概念的插图 : ’A’ 主导了所有在阴影框中点; ’A’, ’D’  和 ’F’ 形成了这些点集合的轮廓.</p><p>鉴于以上的描述, 请根据评分, 评分的数量打印所有在轮廓上的电影.</p><hr><h2 id="解答"><a class="header-anchor" href="#解答">¶</a>解答</h2><blockquote><p>本文给出了所有在Postgres中测试过的答案, 相信大家可以很容易地在Mysql 或 Sqlite中进行转化.</p></blockquote><h3 id="初始化"><a class="header-anchor" href="#初始化">¶</a>初始化:</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">## drop the table if exists</span><br><span class="line">drop table if exists movies cascade;   </span><br><span class="line">drop table if exists play_in cascade;</span><br><span class="line"></span><br><span class="line">## create tables movies and play_in</span><br><span class="line">create table movies (</span><br><span class="line">mid integer PRIMARY KEY, </span><br><span class="line">title varchar(200),</span><br><span class="line">year integer,</span><br><span class="line">num_ratings integer, </span><br><span class="line">rating real);</span><br><span class="line"></span><br><span class="line">create table play_in (</span><br><span class="line">mid integer references movies, </span><br><span class="line">name varchar(100), </span><br><span class="line">cast_position integer, </span><br><span class="line">PRIMARY KEY(mid, name));</span><br><span class="line"></span><br><span class="line">create index mid on movies(mid);</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="导入数据"><a class="header-anchor" href="#导入数据">¶</a>导入数据</h3><p>这里提供了供进行测试的数据源, 请从我的360云盘地址中下载:<br><a href="https://yunpan.cn/cSfLzxQApRXSi">https://yunpan.cn/cSfLzxQApRXSi</a>     访问密码: f3ab</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">## 在Postgres中, 请使用copy命令导入数据</span><br><span class="line">\copy movies from '~/data/movie_processed.dat';</span><br><span class="line">\copy play_in from '~/data/movie_actor_processed.dat';</span><br><span class="line"></span><br><span class="line">## 在Mysql下请使用 "load data local infile"命令导入文件数据, 如:</span><br><span class="line">load data local infile "~/data/movie_processed.dat" into table movies FIELDS TERMINATED BY '\t';</span><br><span class="line">load data local infile "~/data/movie_actor_processed.dat" into table play_in FIELDS TERMINATED BY '\t';</span><br><span class="line"></span><br><span class="line">## 如果在mysql "load infile" 出现错误信息如下时, </span><br><span class="line">## ERROR 1148 (42000): The used command is not allowed with this MySQL version</span><br><span class="line">## 请授予相应数据库的FILE权限, 在登录数据库时赋予权限, 如:</span><br><span class="line">## mysql -u root -p tablename --local-infile=1</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>下图为我在ubuntu系统下的测试结果:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-ctreate-and-copy-datas1.png" alt="DB-Fifth-ctreate-and-copy-datas1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-ctreate-and-copy-datas2.png" alt="DB-Fifth-ctreate-and-copy-datas2"></p><hr><h3 id="解答-1"><a class="header-anchor" href="#解答-1">¶</a>解答 1</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(a) SELECT name FROM play_in p, movies m</span><br><span class="line">WHERE p.mid = m.mid and m.title=’Quantum of Solace’</span><br><span class="line">ORDER BY p.cast_position;</span><br><span class="line"></span><br><span class="line">## (a) 运行结果如下所示:</span><br><span class="line"></span><br><span class="line">name</span><br><span class="line">------------------------------</span><br><span class="line">Daniel Craig</span><br><span class="line">Olga Kurylenko</span><br><span class="line">Mathieu Amalric</span><br><span class="line">Judi Dench</span><br><span class="line">Giancarlo Giannini</span><br><span class="line">Gemma Arterton</span><br><span class="line">Jeffrey Wright</span><br><span class="line">David Harbour</span><br><span class="line">Jesper Christensen</span><br><span class="line">Anatole Taubman</span><br><span class="line">Rory Kinnear</span><br><span class="line">Tim Pigott-Smith</span><br><span class="line">Fernando Guillen-Cuervo</span><br><span class="line">Jesus Ochoa</span><br><span class="line">Glenn Foster</span><br><span class="line">Paul Ritter</span><br><span class="line">Simon Kassianides</span><br><span class="line">Stana Katic</span><br><span class="line">Lucrezia Lante della Rove...</span><br><span class="line">Neil Jackson</span><br><span class="line">Oona Chaplin</span><br><span class="line">(21 rows)</span><br><span class="line"></span><br><span class="line">(b) SELECT title FROM movies</span><br><span class="line">WHERE year = 2002 and rating&gt;8 and num_ratings&gt;1;</span><br><span class="line"></span><br><span class="line">## (b) 运行结果如下所示:</span><br><span class="line">title</span><br><span class="line">---------------------------------------</span><br><span class="line">The Lord of the Rings: The Two Towers</span><br><span class="line">Cidade de Deus</span><br><span class="line">Mou gaan dou</span><br><span class="line">(3 rows)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-2"><a class="header-anchor" href="#解答-2">¶</a>解答 2</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SELECT title from movies m, play_in p</span><br><span class="line">WHERE m.mid = p.mid and </span><br><span class="line">name = ’Sean Connery’ and </span><br><span class="line">cast_position = 1</span><br><span class="line">ORDER BY title;</span><br><span class="line"></span><br><span class="line">## 运行结果如下所示:</span><br><span class="line">title</span><br><span class="line">---------------------------------------</span><br><span class="line">Der Name der Rose</span><br><span class="line">Diamonds Are Forever</span><br><span class="line">Dr. No</span><br><span class="line">Entrapment</span><br><span class="line">Finding Forrester</span><br><span class="line">First Knight</span><br><span class="line">From Russia with Love</span><br><span class="line">Goldfinger</span><br><span class="line">Never Say Never Again</span><br><span class="line">The Hunt for Red October</span><br><span class="line">The League of Extraordinary Gentlemen</span><br><span class="line">Thunderball</span><br><span class="line">You Only Live Twice</span><br><span class="line">(13 rows)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-3"><a class="header-anchor" href="#解答-3">¶</a>解答 3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">(a) DROP VIEW IF EXISTS WeigthedRatings;</span><br><span class="line"></span><br><span class="line">CREATE VIEW WeightedRatings AS</span><br><span class="line">SELECT name, SUM(rating*num_ratings)/SUM(num_ratings) AS WeightedRating</span><br><span class="line">FROM movies m, play_in p WHERE m.mid = p.mid GROUP BY(name);</span><br><span class="line"></span><br><span class="line">SELECT name FROM WeightedRatings</span><br><span class="line">ORDER BY</span><br><span class="line">WeightedRating DESC, name ASC LIMIT 5;</span><br><span class="line"></span><br><span class="line">## (a) 运行结果如下所示:</span><br><span class="line">name</span><br><span class="line">-----------------------</span><br><span class="line">Adam Kalesperis</span><br><span class="line">Aidan Feore</span><br><span class="line">Aleksandr Kajdanovsky</span><br><span class="line">Alexander Kaidanovsky</span><br><span class="line">Alisa Frejndlikh</span><br><span class="line">(5 rows)</span><br><span class="line"></span><br><span class="line">(b) DROP VIEW IF EXISTS ActorSumRatings;</span><br><span class="line"></span><br><span class="line">CREATE VIEW ActorSumRatings AS</span><br><span class="line">SELECT name, SUM(num_ratings) as popularity</span><br><span class="line">FROM play_in p, movies m</span><br><span class="line">WHERE p.mid = m.mid</span><br><span class="line">GROUP BY name;</span><br><span class="line"></span><br><span class="line">SELECT name from ActorSumRatings</span><br><span class="line">ORDER BY popularity DESC, name ASC LIMIT 5;</span><br><span class="line"></span><br><span class="line">## (b) 运行结果如下所示:</span><br><span class="line">name</span><br><span class="line">----------------------</span><br><span class="line">Johnny Depp</span><br><span class="line">Alan Rickman</span><br><span class="line">Orlando Bloom</span><br><span class="line">Helena Bonham Carter</span><br><span class="line">Matt Damon</span><br><span class="line">(5 rows)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-4"><a class="header-anchor" href="#解答-4">¶</a>解答 4</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS RatingGap;</span><br><span class="line"></span><br><span class="line">CREATE VIEW RatingGap AS</span><br><span class="line">SELECT p1.name, MAX(ABS(m1.rating-m2.rating)) as Gap</span><br><span class="line">FROM play_in p1, play_in p2, movies m1, movies m2</span><br><span class="line">WHERE p1.mid = m1.mid and </span><br><span class="line">p2.mid = m2.mid and </span><br><span class="line">p1.name = p2.name</span><br><span class="line">GROUP BY(p1.name);</span><br><span class="line"></span><br><span class="line">SELECT name </span><br><span class="line">FROM RatingGap </span><br><span class="line">ORDER BY(Gap) DESC LIMIT 1;</span><br><span class="line"></span><br><span class="line">## 运行结果如下所示:</span><br><span class="line">name</span><br><span class="line">---------------</span><br><span class="line">John Travolta</span><br><span class="line">(1 row)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-5"><a class="header-anchor" href="#解答-5">¶</a>解答 5</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS MastersMovies CASCADE;</span><br><span class="line"></span><br><span class="line">CREATE VIEW MastersMovies AS</span><br><span class="line">SELECT m.mid,m.title FROM movies m, play_in p</span><br><span class="line">WHERE m.mid = p.mid and p.name = ’Annette Nicole’;</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS CoActors;</span><br><span class="line"></span><br><span class="line">CREATE VIEW CoActors AS</span><br><span class="line">SELECT DISTINCT name FROM MastersMovies m , play_in p</span><br><span class="line">WHERE p.mid = m.mid;</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS Combinations;</span><br><span class="line"></span><br><span class="line">CREATE VIEW Combinations AS</span><br><span class="line">SELECT name,mid FROM MastersMovies , CoActors;</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS NonExistent;</span><br><span class="line"></span><br><span class="line">CREATE VIEW NonExistent AS</span><br><span class="line">SELECT * FROM Combinations</span><br><span class="line">EXCEPT (SELECT name, mid FROM play_in);</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS PotentialResults;</span><br><span class="line"></span><br><span class="line">CREATE VIEW PotentialResults AS</span><br><span class="line">SELECT * from CoActors</span><br><span class="line">EXCEPT (SELECT distinct(name) FROM NonExistent);</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS NotMastersMovies;</span><br><span class="line"></span><br><span class="line">CREATE VIEW NotMastersMovies AS</span><br><span class="line">SELECT m.mid FROM movies m</span><br><span class="line">EXCEPT (SELECT mid FROM MastersMovies);</span><br><span class="line"></span><br><span class="line">SELECT * from PotentialResults</span><br><span class="line">WHERE name not in </span><br><span class="line">(SELECT name</span><br><span class="line">FROM play_in p, NotMastersMovies m</span><br><span class="line">WHERE m.mid = p.mid</span><br><span class="line">UNION SELECT ’Annette Nicole’</span><br><span class="line">) ORDER BY name;</span><br><span class="line"></span><br><span class="line">## 运行结果如下所示:</span><br><span class="line">name</span><br><span class="line">-----------------</span><br><span class="line">Christian Perry</span><br><span class="line">(1 row)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-6"><a class="header-anchor" href="#解答-6">¶</a>解答 6</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS MoviesPerYear;</span><br><span class="line"></span><br><span class="line">CREATE VIEW MoviesPerYear AS</span><br><span class="line">SELECT year, COUNT(title) num_movies</span><br><span class="line">FROM MOVIES GROUP BY(year);</span><br><span class="line"></span><br><span class="line">SELECT year from MoviesPerYear </span><br><span class="line">ORDER BY num_movies DESC LIMIT 2;</span><br><span class="line"></span><br><span class="line">## 运行结果如下所示:</span><br><span class="line">year</span><br><span class="line">------</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">(2 rows)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-7"><a class="header-anchor" href="#解答-7">¶</a>解答 7</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">(a) SELECT COUNT(*) FROM </span><br><span class="line">(SELECT DISTINCT m1.mid, m2.mid</span><br><span class="line"> FROM movies m1, movies m2, play_in p1, play_in p2</span><br><span class="line"> WHERE m1.mid &gt; m2.mid and</span><br><span class="line"> m1.mid = p1.mid and</span><br><span class="line"> m2.mid = p2.mid and </span><br><span class="line"> p1.name = p2.name) </span><br><span class="line">AS count;</span><br><span class="line"></span><br><span class="line">## (a) 运行结果如下所示:</span><br><span class="line">count</span><br><span class="line">--------</span><br><span class="line">104846</span><br><span class="line">(1 row)</span><br><span class="line"></span><br><span class="line">(b) SELECT COUNT(*) FROM </span><br><span class="line">(SELECT DISTINCT m1.mid, m2.mid</span><br><span class="line">FROM movies m1, movies m2, play_in p1,</span><br><span class="line">play_in p2, play_in p3, play_in p4</span><br><span class="line">WHERE m1.mid &gt; m2.mid and </span><br><span class="line">m1.mid = p1.mid and </span><br><span class="line">m2.mid = p2.mid and</span><br><span class="line">m1.mid = p3.mid and </span><br><span class="line">m2.mid = p4.mid and </span><br><span class="line">p2.name &lt;&gt; p4.name and </span><br><span class="line">p1.name = p2.name and </span><br><span class="line">p3.name = p4.name) </span><br><span class="line">AS count;</span><br><span class="line"></span><br><span class="line">## (b) 运行结果如下所示:</span><br><span class="line">count</span><br><span class="line">-------</span><br><span class="line">6845</span><br><span class="line">(1 row)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="解答-8"><a class="header-anchor" href="#解答-8">¶</a>解答 8</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS Dominated;</span><br><span class="line"></span><br><span class="line">CREATE VIEW Dominated AS</span><br><span class="line">SELECT DISTINCT m2.mid, m2.title,m2.num_ratings, m2.rating</span><br><span class="line">FROM movies m1, movies m2</span><br><span class="line">WHERE m2.rating&lt;=m1.rating and m2.num_ratings&lt;=m1.num_ratings and </span><br><span class="line">NOT (m2.rating = m1.rating and m2.num_ratings=m1.num_ratings);</span><br><span class="line"></span><br><span class="line">SELECT title,num_ratings,rating </span><br><span class="line">FROM movies</span><br><span class="line">EXCEPT (SELECT title,num_ratings,rating FROM Dominated);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1] <a href="http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html">http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html</a><br>[2] <a href="http://www.postgresql.org/docs/">http://www.postgresql.org/docs/</a><br>[3] <a href="http://www.cs.cmu.edu/~epapalex/15415S14/PostgreSQLReadme.htm">http://www.cs.cmu.edu/~epapalex/15415S14/PostgreSQLReadme.htm</a><br>[4] <a href="http://www.cs.cmu.edu/~christos/courses/">http://www.cs.cmu.edu/~christos/courses/</a><br>[5] <a href="http://blog.chinaunix.net/uid-20685819-id-4267454.html">http://blog.chinaunix.net/uid-20685819-id-4267454.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The solution of Databases Query problems(Fifth)</title>
      <link href="/2019/05/14/The-solution-of-Databases-Query-problems-Fifth/"/>
      <url>/2019/05/14/The-solution-of-Databases-Query-problems-Fifth/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="Preface"><a class="header-anchor" href="#Preface">¶</a>Preface</h2><blockquote><p>when there is rain neither sun nor moon, the people actually do not think so.</p><p>Perhaps there are seasonal climate not to be cold rain, let the sun or the cool side.</p><p>Has the rain the night is otherwise a moonlit night no flavor.</p><p>Sometimes not reminiscent of Li Shangyin “when he cut a total of west window candle, but then when the famous hope of reunion among friends”</p></blockquote><p>In the rain, fom the sky come the silk notes; here, quiet and comfortable.</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Databases-in-rain.png" alt="Databases-in-rain"></p><hr><h2 id="Presentation"><a class="header-anchor" href="#Presentation">¶</a>Presentation</h2><p>In this page, we will show the homework of the course of the Databases Technology in CMU. All of the questions we tested in the postgresql.</p><p>This section mainly is to practice the <strong>query operation of the SQL</strong>, include <strong>SQL view, index,</strong> etc. We also sure that all the sqls will pass in the mysql, sqlite… ,  this article also will provide the Chinese version in detail.</p><p><a href="https://absentm.github.io/2019/05/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88%E4%BA%94%EF%BC%89/">中文版</a></p><hr><h2 id="Question-Details"><a class="header-anchor" href="#Question-Details">¶</a>Question Details</h2><p>In this homework you will have to write SQL queries to answer questions on a movie dataset, about movies and actors. The database contains two tables:</p><p>• movies(<em>mid</em>, title, year, num ratings, rating) , Primary key: mid<br>• play in(<em>mid, name</em>, cast position),  Primary key: mid, name</p><p>The tables contain the obvious information: which actor played in what movie, at what position; for each movie, we have the title (eg., ’Gone with the wind’), year of production, count of rating reviews it received, and the average score of those ratings (a float in the range 0 to 10, with ’10’ meaning ’excellent’).</p><hr><p>We will use <strong>Postgres</strong>, which is installed in the your own machines.</p><p><strong>Question 1: Warm-up queries . . . . . . . . . . . . . . . . . . . . . . . . . [5 points]</strong><br>(a) [2 points] Print all actors in the movie Quantum of Solace, sorted by cast position. Print only their names.<br>(b) [3 points] Print all movie titles that were released in 2002, with rating larger than 8 and with more than one rating (num ratings &gt; 1).</p><hr><p><strong>Question 2: Find the star’s movies . . . . . . . . . . . . . . . . . . . . [5 points]</strong><br>(a) [5 points] Print movie titles where Sean Connery was the star (i.e. he had position 1 in the cast). Sort the movie titles alphabetically.</p><hr><p><strong>Question 3: Popular actors . . . . . . . . . . . . . . . . . . . . . . . . . . [15 points]</strong><br>(a) [8 points] We want to find the actors of the highest quality. We define their quality as the weighted average of the ratings of the movies they have played in (regardless of cast position), using the number of ratings for each movie as the<br>weight. In other words, we define the quality for a particular actor as</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-1.png" alt="DB-Fifth-1"></p><p>Print the names of the top 5 actors, according to the above metric. Break ties alphabetically.</p><p>(b) [7 points] Now we want to find the 5 most popular actors, in terms of number of ratings (regardless of positive or negative popularity). I.e, if actor ‘Smith’ played in 2 movies, with num ratings 10 and 15, then Smith’s popularity is 25 (=10+15). Print the top 5 actor names according to popularity. Again, break ties alphabetically.</p><hr><p><strong>Question 4: Most controversial actor . . . . . . . . . . . . . . . . [10 points]</strong><br>(a) [10 points] We want to find the most controversial actor. As a measure of controversy, we define the maximum difference between the ratings of two movies that an actor has played in (regardless of cast position). That is, if actor ‘Smith’ played in a movie that got rating=1.2, and another that got rating=9.5, and all the other movies he played in, obtained scores within that range, then Smith’s contoversy score is 9.5-1.2= 8.3. Print the name of the top-most controversial actor - again, if there is a tie in first place, break it alphabetically.</p><hr><p><strong>Question 5: The minions . . . . . . . . . . . . . . . . . . . . . . . . . . . . [20 points]</strong><br>(a) [20 points] Find the “minions” of Annette Nicole: Print the names of actors who only played in movies with her and never without her. The answer should not contain the name of Annette Nicole. Order the names alphabetically.</p><hr><p><strong>Question 6: High productivity . . . . . . . . . . . . . . . . . . . . . . . . [5 points]</strong><br>(a) [5 points] Find the top 2 most productive years (by number of movies produced). Solve ties by preferring chronologically older years, and print only the years.</p><hr><p><strong>Question 7: Movies with similar cast . . . . . . . . . . . . . . . . [15 points]</strong><br>(a) [8 points] Print the count of distinct pairs of movies that have at least one actor in common (ignoring cast position). Exclude self-pairs, and mirror-pairs.<br>(b) [7 points] Print the count of distinct pairs of moves that have at least two actors in common (again, ignoring cast position). Again, exclude self-pairs, and mirror pairs.</p><hr><p><strong>Question 8: Skyline query . . . . . . . . . . . . . . . . . . . . . . . . . . . [25 points]</strong><br>(a) [25 points] We want to find a set of movies that have both high popularity (ie, high num ratings) as well as high quality (rating). No single movie may achieve both - in which case, we want the so-called Skyline query 2 . More specifically, we want all movies that are not “dominated” by any other movie:</p><p><strong>Definition of domination :</strong> <em>Movie “A” dominates movie “B” if movie “A” wins over movie “B”, on both criteria, or wins on one, and ties on the rest.</em></p><p>Figure 1 gives a pictorial example: the solid dots (’A’, ’D’, ’F’) are not dominated by any other dot, and thus form the skyline. All other dots are dominated by at least one other dot: e.g., dot ’B’ is dominated by dot ’A’, being inside the shaded rectangle that has ’A’ as the upper-right corner.</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-figure-1.png" alt="DB-Fifth-figure-1"></p><p>Figure 1: Illustration of Skyline and domination : ’A’ dominates all points in the shaded rectangle; ’A’, ’D’ and ’F’ form the skyline of this cloud of points.</p><p>Given the above description, print the title of all the movies on the skyline, along with the rating and the number of ratings.</p><hr><h2 id="Answer"><a class="header-anchor" href="#Answer">¶</a>Answer</h2><p>we give the Postgres version in detail, we will see you can tranfer it easily in mysql or sqlite.</p><h3 id="Initialization"><a class="header-anchor" href="#Initialization">¶</a>Initialization:</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">## drop the table if exists</span><br><span class="line">drop table if exists movies cascade;   </span><br><span class="line">drop table if exists play_in cascade;</span><br><span class="line"></span><br><span class="line">## create tables movies and play_in</span><br><span class="line">create table movies (</span><br><span class="line">mid integer PRIMARY KEY, </span><br><span class="line">title varchar(200),</span><br><span class="line">year integer,</span><br><span class="line">num_ratings integer, </span><br><span class="line">rating real);</span><br><span class="line"></span><br><span class="line">create table play_in (</span><br><span class="line">mid integer references movies, </span><br><span class="line">name varchar(100), </span><br><span class="line">cast_position integer, </span><br><span class="line">PRIMARY KEY(mid, name));</span><br><span class="line"></span><br><span class="line">create index mid on movies(mid);</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Insert-Values"><a class="header-anchor" href="#Insert-Values">¶</a>Insert Values</h3><p>Insert into some values into the table movies and play_in,<br>you will find the datas just in the follow links in my 360 yunFiles:</p><p><a href="https://yunpan.cn/cSfLzxQApRXSi">https://yunpan.cn/cSfLzxQApRXSi</a>     password: f3ab</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">## use "copy" in Postgres</span><br><span class="line">\copy movies from '~/data/movie_processed.dat';</span><br><span class="line">\copy play_in from '~/data/movie_actor_processed.dat';</span><br><span class="line"></span><br><span class="line">## use "load data local infile" in Mysql</span><br><span class="line">load data local infile "~/data/movie_processed.dat" into table movies FIELDS TERMINATED BY '\t';</span><br><span class="line"></span><br><span class="line">load data local infile "~/data/movie_actor_processed.dat" into table play_in FIELDS TERMINATED BY '\t';</span><br><span class="line"></span><br><span class="line">## if you find load infile errors in mysql just like this:</span><br><span class="line">## ERROR 1148 (42000): The used command is not allowed with this MySQL version</span><br><span class="line">## please grant FILE authority in Mysql just use this comman: "mysql -u root -p tablename --local-infile=1" to login databases; </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>The flowing image show the test infos in my ubuntu os:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-ctreate-and-copy-datas1.png" alt="DB-Fifth-ctreate-and-copy-datas1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-Fifth-ctreate-and-copy-datas2.png" alt="DB-Fifth-ctreate-and-copy-datas2"></p><hr><h3 id="Solution-1"><a class="header-anchor" href="#Solution-1">¶</a>Solution 1</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(a) SELECT name FROM play_in p, movies m</span><br><span class="line">WHERE p.mid = m.mid and m.title=’Quantum of Solace’</span><br><span class="line">ORDER BY p.cast_position;</span><br><span class="line"></span><br><span class="line">## (a) Result just like this:</span><br><span class="line"></span><br><span class="line">name</span><br><span class="line">------------------------------</span><br><span class="line">Daniel Craig</span><br><span class="line">Olga Kurylenko</span><br><span class="line">Mathieu Amalric</span><br><span class="line">Judi Dench</span><br><span class="line">Giancarlo Giannini</span><br><span class="line">Gemma Arterton</span><br><span class="line">Jeffrey Wright</span><br><span class="line">David Harbour</span><br><span class="line">Jesper Christensen</span><br><span class="line">Anatole Taubman</span><br><span class="line">Rory Kinnear</span><br><span class="line">Tim Pigott-Smith</span><br><span class="line">Fernando Guillen-Cuervo</span><br><span class="line">Jesus Ochoa</span><br><span class="line">Glenn Foster</span><br><span class="line">Paul Ritter</span><br><span class="line">Simon Kassianides</span><br><span class="line">Stana Katic</span><br><span class="line">Lucrezia Lante della Rove...</span><br><span class="line">Neil Jackson</span><br><span class="line">Oona Chaplin</span><br><span class="line">(21 rows)</span><br><span class="line"></span><br><span class="line">(b) SELECT title FROM movies</span><br><span class="line">WHERE year = 2002 and rating&gt;8 and num_ratings&gt;1;</span><br><span class="line"></span><br><span class="line">## (b) Result just like this:</span><br><span class="line">title</span><br><span class="line">---------------------------------------</span><br><span class="line">The Lord of the Rings: The Two Towers</span><br><span class="line">Cidade de Deus</span><br><span class="line">Mou gaan dou</span><br><span class="line">(3 rows)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-2"><a class="header-anchor" href="#Solution-2">¶</a>Solution 2</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SELECT title from movies m, play_in p</span><br><span class="line">WHERE m.mid = p.mid and </span><br><span class="line">name = ’Sean Connery’ and </span><br><span class="line">cast_position = 1</span><br><span class="line">ORDER BY title;</span><br><span class="line"></span><br><span class="line">## Result just like this:</span><br><span class="line">title</span><br><span class="line">---------------------------------------</span><br><span class="line">Der Name der Rose</span><br><span class="line">Diamonds Are Forever</span><br><span class="line">Dr. No</span><br><span class="line">Entrapment</span><br><span class="line">Finding Forrester</span><br><span class="line">First Knight</span><br><span class="line">From Russia with Love</span><br><span class="line">Goldfinger</span><br><span class="line">Never Say Never Again</span><br><span class="line">The Hunt for Red October</span><br><span class="line">The League of Extraordinary Gentlemen</span><br><span class="line">Thunderball</span><br><span class="line">You Only Live Twice</span><br><span class="line">(13 rows)</span><br></pre></td></tr></tbody></table></figure><p>The flowing image show the test solution 2 infos in my ubuntu os:</p><hr><h3 id="Solution-3"><a class="header-anchor" href="#Solution-3">¶</a>Solution 3</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">(a) DROP VIEW IF EXISTS WeigthedRatings;</span><br><span class="line"></span><br><span class="line">CREATE VIEW WeightedRatings AS</span><br><span class="line">SELECT name, SUM(rating*num_ratings)/SUM(num_ratings) AS WeightedRating</span><br><span class="line">FROM movies m, play_in p WHERE m.mid = p.mid GROUP BY(name);</span><br><span class="line"></span><br><span class="line">SELECT name FROM WeightedRatings</span><br><span class="line">ORDER BY</span><br><span class="line">WeightedRating DESC, name ASC LIMIT 5;</span><br><span class="line"></span><br><span class="line">## (a) Result just like this:</span><br><span class="line">name</span><br><span class="line">-----------------------</span><br><span class="line">Adam Kalesperis</span><br><span class="line">Aidan Feore</span><br><span class="line">Aleksandr Kajdanovsky</span><br><span class="line">Alexander Kaidanovsky</span><br><span class="line">Alisa Frejndlikh</span><br><span class="line">(5 rows)</span><br><span class="line"></span><br><span class="line">(b) DROP VIEW IF EXISTS ActorSumRatings;</span><br><span class="line"></span><br><span class="line">CREATE VIEW ActorSumRatings AS</span><br><span class="line">SELECT name, SUM(num_ratings) as popularity</span><br><span class="line">FROM play_in p, movies m</span><br><span class="line">WHERE p.mid = m.mid</span><br><span class="line">GROUP BY name;</span><br><span class="line"></span><br><span class="line">SELECT name from ActorSumRatings</span><br><span class="line">ORDER BY popularity DESC, name ASC LIMIT 5;</span><br><span class="line"></span><br><span class="line">## (b) Result just like this:</span><br><span class="line">name</span><br><span class="line">----------------------</span><br><span class="line">Johnny Depp</span><br><span class="line">Alan Rickman</span><br><span class="line">Orlando Bloom</span><br><span class="line">Helena Bonham Carter</span><br><span class="line">Matt Damon</span><br><span class="line">(5 rows)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-4"><a class="header-anchor" href="#Solution-4">¶</a>Solution 4</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS RatingGap;</span><br><span class="line"></span><br><span class="line">CREATE VIEW RatingGap AS</span><br><span class="line">SELECT p1.name, MAX(ABS(m1.rating-m2.rating)) as Gap</span><br><span class="line">FROM play_in p1, play_in p2, movies m1, movies m2</span><br><span class="line">WHERE p1.mid = m1.mid and </span><br><span class="line">p2.mid = m2.mid and </span><br><span class="line">p1.name = p2.name</span><br><span class="line">GROUP BY(p1.name);</span><br><span class="line"></span><br><span class="line">SELECT name </span><br><span class="line">FROM RatingGap </span><br><span class="line">ORDER BY(Gap) DESC LIMIT 1;</span><br><span class="line"></span><br><span class="line">## Result just like this:</span><br><span class="line">name</span><br><span class="line">---------------</span><br><span class="line">John Travolta</span><br><span class="line">(1 row)</span><br></pre></td></tr></tbody></table></figure><p>The flowing image show the test solution 4 infos in my ubuntu os:</p><hr><h3 id="Solution-5"><a class="header-anchor" href="#Solution-5">¶</a>Solution 5</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS MastersMovies CASCADE;</span><br><span class="line"></span><br><span class="line">CREATE VIEW MastersMovies AS</span><br><span class="line">SELECT m.mid,m.title FROM movies m, play_in p</span><br><span class="line">WHERE m.mid = p.mid and p.name = ’Annette Nicole’;</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS CoActors;</span><br><span class="line"></span><br><span class="line">CREATE VIEW CoActors AS</span><br><span class="line">SELECT DISTINCT name FROM MastersMovies m , play_in p</span><br><span class="line">WHERE p.mid = m.mid;</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS Combinations;</span><br><span class="line"></span><br><span class="line">CREATE VIEW Combinations AS</span><br><span class="line">SELECT name,mid FROM MastersMovies , CoActors;</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS NonExistent;</span><br><span class="line"></span><br><span class="line">CREATE VIEW NonExistent AS</span><br><span class="line">SELECT * FROM Combinations</span><br><span class="line">EXCEPT (SELECT name, mid FROM play_in);</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS PotentialResults;</span><br><span class="line"></span><br><span class="line">CREATE VIEW PotentialResults AS</span><br><span class="line">SELECT * from CoActors</span><br><span class="line">EXCEPT (SELECT distinct(name) FROM NonExistent);</span><br><span class="line"></span><br><span class="line">DROP VIEW IF EXISTS NotMastersMovies;</span><br><span class="line"></span><br><span class="line">CREATE VIEW NotMastersMovies AS</span><br><span class="line">SELECT m.mid FROM movies m</span><br><span class="line">EXCEPT (SELECT mid FROM MastersMovies);</span><br><span class="line"></span><br><span class="line">SELECT * from PotentialResults</span><br><span class="line">WHERE name not in </span><br><span class="line">(SELECT name</span><br><span class="line">FROM play_in p, NotMastersMovies m</span><br><span class="line">WHERE m.mid = p.mid</span><br><span class="line">UNION SELECT ’Annette Nicole’</span><br><span class="line">) ORDER BY name;</span><br><span class="line"></span><br><span class="line">## Result just like this:</span><br><span class="line">name</span><br><span class="line">-----------------</span><br><span class="line">Christian Perry</span><br><span class="line">(1 row)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-6"><a class="header-anchor" href="#Solution-6">¶</a>Solution 6</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS MoviesPerYear;</span><br><span class="line"></span><br><span class="line">CREATE VIEW MoviesPerYear AS</span><br><span class="line">SELECT year, COUNT(title) num_movies</span><br><span class="line">FROM MOVIES GROUP BY(year);</span><br><span class="line"></span><br><span class="line">SELECT year from MoviesPerYear </span><br><span class="line">ORDER BY num_movies DESC LIMIT 2;</span><br><span class="line"></span><br><span class="line">## Result just like this:</span><br><span class="line">year</span><br><span class="line">------</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">(2 rows)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-7"><a class="header-anchor" href="#Solution-7">¶</a>Solution 7</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">(a) SELECT COUNT(*) FROM </span><br><span class="line">(SELECT DISTINCT m1.mid, m2.mid</span><br><span class="line"> FROM movies m1, movies m2, play_in p1, play_in p2</span><br><span class="line"> WHERE m1.mid &gt; m2.mid and</span><br><span class="line"> m1.mid = p1.mid and</span><br><span class="line"> m2.mid = p2.mid and </span><br><span class="line"> p1.name = p2.name) </span><br><span class="line">AS count;</span><br><span class="line"></span><br><span class="line">## (a) Result just like this:</span><br><span class="line">count</span><br><span class="line">--------</span><br><span class="line">104846</span><br><span class="line">(1 row)</span><br><span class="line"></span><br><span class="line">(b) SELECT COUNT(*) FROM </span><br><span class="line">(SELECT DISTINCT m1.mid, m2.mid</span><br><span class="line">FROM movies m1, movies m2, play_in p1,</span><br><span class="line">play_in p2, play_in p3, play_in p4</span><br><span class="line">WHERE m1.mid &gt; m2.mid and </span><br><span class="line">m1.mid = p1.mid and </span><br><span class="line">m2.mid = p2.mid and</span><br><span class="line">m1.mid = p3.mid and </span><br><span class="line">m2.mid = p4.mid and </span><br><span class="line">p2.name &lt;&gt; p4.name and </span><br><span class="line">p1.name = p2.name and </span><br><span class="line">p3.name = p4.name) </span><br><span class="line">AS count;</span><br><span class="line"></span><br><span class="line">## (b) Result just like this:</span><br><span class="line">count</span><br><span class="line">-------</span><br><span class="line">6845</span><br><span class="line">(1 row)</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Solution-8"><a class="header-anchor" href="#Solution-8">¶</a>Solution 8</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW IF EXISTS Dominated;</span><br><span class="line"></span><br><span class="line">CREATE VIEW Dominated AS</span><br><span class="line">SELECT DISTINCT m2.mid, m2.title,m2.num_ratings, m2.rating</span><br><span class="line">FROM movies m1, movies m2</span><br><span class="line">WHERE m2.rating&lt;=m1.rating and m2.num_ratings&lt;=m1.num_ratings and </span><br><span class="line">NOT (m2.rating = m1.rating and m2.num_ratings=m1.num_ratings);</span><br><span class="line"></span><br><span class="line">SELECT title,num_ratings,rating </span><br><span class="line">FROM movies</span><br><span class="line">EXCEPT (SELECT title,num_ratings,rating FROM Dominated);</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Reference"><a class="header-anchor" href="#Reference">¶</a>Reference</h2><p>[1] <a href="http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html">http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html</a><br>[2] <a href="http://www.postgresql.org/docs/">http://www.postgresql.org/docs/</a><br>[3] <a href="http://www.cs.cmu.edu/~epapalex/15415S14/PostgreSQLReadme.htm">http://www.cs.cmu.edu/~epapalex/15415S14/PostgreSQLReadme.htm</a><br>[4] <a href="http://www.cs.cmu.edu/~christos/courses/">http://www.cs.cmu.edu/~christos/courses/</a><br>[5] <a href="http://blog.chinaunix.net/uid-20685819-id-4267454.html">http://blog.chinaunix.net/uid-20685819-id-4267454.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库题目整理及详解（四）</title>
      <link href="/2019/04/16/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>/2019/04/16/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><blockquote><p>有多少次挥汗如雨，伤痛曾添满记忆，只因为始终相信，去拼搏才能胜利。总在鼓舞自己，要成功就得努力。热血在赛场沸腾，巨人在赛场升起。</p><p>相信自己，你将赢得胜利，创造奇迹；相信自己，梦想在你手中，这是你的天地。当一切过去，你们将是第一。</p><p>相信自己，你们将超越极限，超越自己！<br>相信自己，加油吧，健儿们，相信你自己。</p></blockquote><p>坐在中体对面, 听着这振奋激昂的加油欢呼声, 照样可以感受到校运会的气势磅礴, 虽然我还在敲代码…</p><p>来个这个吧, 特殊纪念, 沃夫慈悲:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-4.png" alt="DB-4"></p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><p>老生常谈! 接着之前的SQL语句继续整理, 内容参考了互联网上的很多内容, 结尾缀上出处, 感谢分享.</p><p>这一部分主要内容为：mysql数据库存储过程相关的SQL语句, 在书写上的格式、规范及环境配置等，详见：<a href="https://absentm.github.io/2019/04/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89/">数据库题目整理及详解（一），说明部分</a> .</p><hr><h2 id="题目详情"><a class="header-anchor" href="#题目详情">¶</a>题目详情</h2><p>设某学生信息系统数据库包含如下关系:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STUDENT(ID, NAME, CLASSNO, BIRTH)</span><br></pre></td></tr></tbody></table></figure><p>请根据所学存储过程相关知识完成如下如下表示的功能:</p><p>(1)  创建数据库及 student 表,并至少插入 3 条数据;<br>(2)  创建并调用名为 sp 的存储过程,查询学生的所有信息;<br>(3)  创建并调用名为 sp1 的存储过程,向表中插入一条学生信息;<br>(4)  创建并调用名为 sp2 的存储过程,查询学生表中的最大班级号;<br>(5)  创建并调用名为 sp3 的存储过程,修改学生学号,如果学号为 1,修改为<br>10; 否则,修改学号为 20,并查看信息表中的最大学号值;<br>(6)  创建并调用名为 sp4 的存储过程,使得学生的班级号既做输入参数又做输出参数;<br>(7)  创建并调用名为 sp5 的存储过程,根据输入的班级号,判断班级名称;<br>(8)  创建并调用名为 sp6的存储过程,根据输入的班级号,更新班级名称;</p><hr><h2 id="题目解答"><a class="header-anchor" href="#题目解答">¶</a>题目解答</h2><p>(1) 创建数据库及 student 表, 并至少插入 3 条数据;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">create database procedure_test;## 创建数据库</span><br><span class="line">use procedure_test;## 切换至该数据库下</span><br><span class="line"></span><br><span class="line">drop table if exists student; ## 好习惯</span><br><span class="line">create table student ( ## 建表</span><br><span class="line">id int(11) primary key, </span><br><span class="line">name char(10)</span><br><span class="line">not null, </span><br><span class="line">classno int(11), </span><br><span class="line">birth datetime);</span><br><span class="line"></span><br><span class="line">desc student;## 看一下表结构</span><br><span class="line"></span><br><span class="line">## 插入数据</span><br><span class="line">insert into student values(1, 'xiaohua', 01, '1992-02-01 10:20:31');</span><br><span class="line">insert into student values(2, 'xiaohua1', 02, '1993-05-11 20:34:35');</span><br><span class="line">insert into student values(3, 'xiaohua2', 03, '1989-011-11 11:11:11');</span><br><span class="line"></span><br><span class="line">## 查询一下啊</span><br><span class="line">select * from student;</span><br></pre></td></tr></tbody></table></figure><hr><p>(2) 创建并调用名为 sp 的存储过程,查询学生的所有信息;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">drop procedure if exists sp; ## 好习惯</span><br><span class="line">create procedure sp() select * from student;  ## 建立存储过程</span><br><span class="line">call sp();## 调用一哈</span><br><span class="line">show procedure status \G; ## 参看一哈</span><br></pre></td></tr></tbody></table></figure><hr><p>(3)创建并调用名为 sp1 的存储过程,向表中插入一条学生信息;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">delimiter //## 自制分隔符，防止“；”带来的意外</span><br><span class="line"></span><br><span class="line">## 接下来就和上边一样一样啦， 就不写了啊</span><br><span class="line">create procedure sp1(in id int, in name char(10), in</span><br><span class="line">classno int(11), in birth datetime ) comment 'insert into a value to student'</span><br><span class="line">begin</span><br><span class="line">set @id = id;</span><br><span class="line">set @name = name;</span><br><span class="line">set @classno = classno;set @birth = birth;</span><br><span class="line">insert into student values(id, name, classno, birth);</span><br><span class="line">end//</span><br><span class="line"></span><br><span class="line">call sp1(4, 'xiaohua4', 4, '2010-10-05 13:14:27')//</span><br><span class="line">select * from student//</span><br><span class="line">show procedure status \G</span><br></pre></td></tr></tbody></table></figure><hr><p>(4) 创建并调用名为 sp2 的存储过程,查询学生表中的最大班级号;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create procedure sp2(out p int)</span><br><span class="line">deterministic</span><br><span class="line">begin</span><br><span class="line">select max(classno) into p from student;</span><br><span class="line">end//</span><br><span class="line"></span><br><span class="line">call sp2(@pv)//</span><br><span class="line">select @pv//</span><br><span class="line">show procedure status \G</span><br></pre></td></tr></tbody></table></figure><hr><p>(5) 创建并调用名为 sp3 的存储过程,修改学生学号,如果学号为 1,修改为<br>10;否则,修改学号为 20,并查看信息表中的最大学号值;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create procedure sp3(in p1 int, out p2 int)</span><br><span class="line">begin</span><br><span class="line">if p1 = 1 then</span><br><span class="line">set @v = 10;</span><br><span class="line">else</span><br><span class="line">set @v = 20;</span><br><span class="line">end if;</span><br><span class="line">select max(id) into p2 from student;</span><br><span class="line">end//</span><br><span class="line"></span><br><span class="line">call sp3(1, @ret)//</span><br><span class="line">select @ret;</span><br><span class="line">show procedure status \G</span><br></pre></td></tr></tbody></table></figure><hr><p>(6) 创建并调用名为 sp4 的存储过程,使得学生的班级号既做输入参数又做输<br>出参数;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">drop procedure if exists sp4//</span><br><span class="line">create procedure sp4(inout p4 int)</span><br><span class="line">begin</span><br><span class="line">if p4 = 3 then</span><br><span class="line">set @value = 13;</span><br><span class="line">else</span><br><span class="line">set @value = 14;</span><br><span class="line">end if;</span><br><span class="line">select @value;</span><br><span class="line">end//</span><br><span class="line"></span><br><span class="line">call sp4(@result)//</span><br><span class="line">set @result = 4//</span><br><span class="line">call sp4(@result)//</span><br></pre></td></tr></tbody></table></figure><hr><p>(7) 创建并调用名为 sp5 的存储过程,根据输入的班级号,判断班级名称;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">drop procedure if exists sp5//</span><br><span class="line"></span><br><span class="line">## 眼尖的童鞋可能会看到，这里加了一步操作， 为了弥补第一题所犯的错，表结构忘记建立该属性了</span><br><span class="line">alter table student add classname char(11)//  </span><br><span class="line"></span><br><span class="line">create procedure sp5(in classno int, out classname char(11))</span><br><span class="line">begin</span><br><span class="line">if classno = 1 then</span><br><span class="line">set classname = 'firstclass';</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">if classno = 2 then</span><br><span class="line">set classname = 'secondclass';</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">if classno = 3 then</span><br><span class="line">set classname = 'thirdclass';</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">if classno = 4 then</span><br><span class="line">set classname = 'fourthclass';</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">select * from student;</span><br><span class="line">end//</span><br><span class="line"></span><br><span class="line">call sp5(2, @ret)//</span><br><span class="line">select @ret;</span><br></pre></td></tr></tbody></table></figure><hr><p>(8) 创建并调用名为 sp5 的存储过程,根据输入的班级号,更新班级名称;</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">## 错误总是无独有偶， 显然！这步是弥补上步未完成的任务</span><br><span class="line">create procedure sp6(in classno int)</span><br><span class="line">begin</span><br><span class="line">if classno = 1 then</span><br><span class="line">update student set classname = 'firstclass' where id=1;</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">if classno = 2 thenupdate student set classname =     'secondclass' where id=2;</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">if classno = 3 then</span><br><span class="line">update student set classname = 'thirdclass' where id=3;</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">if classno = 4 then</span><br><span class="line">update student set classname = 'fourthclass' where id=4;</span><br><span class="line">end if;</span><br><span class="line"></span><br><span class="line">select * from student;</span><br><span class="line">end//</span><br><span class="line"></span><br><span class="line">call sp6(1)//</span><br><span class="line">call sp6(2)//</span><br><span class="line">call sp6(3)//</span><br><span class="line">call sp6(4)//</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://www.cnblogs.com/zhuawang/p/4185302.html">http://www.cnblogs.com/zhuawang/p/4185302.html</a><br>[2]. <a href="http://blog.csdn.net/woshixuye/article/details/8348180">http://blog.csdn.net/woshixuye/article/details/8348180</a><br>[3]. <a href="http://www.2cto.com/database/201408/327315.html">http://www.2cto.com/database/201408/327315.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库题目整理及详解（三）</title>
      <link href="/2019/04/05/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2019/04/05/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>—李冠《蝶恋花·春暮》</p><blockquote><p>遥夜亭皋闲信步。<br>才过清明，渐觉伤春暮。<br>数点雨声风约住。朦胧淡月云来去。</p><p>桃杏依稀香暗渡。<br>谁在秋千，笑里轻轻语。<br>一寸相思千万绪。人间没个安排处。</p></blockquote><p>大早, 喜见枯草堆中顽强的四叶草:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/DB-2-show.png" alt="DB-2-show"></p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><blockquote><p>接着之前的SQL语句继续整理, 内容大多参考了互联网上的很多内容, 好多都相似, 结尾缀上出处, 感谢分享. 这一部分内容, 在mysql中也亲自测试了, 带有截图.</p><p>这一部分主要内容为：mysql数据库改变表结构相关的SQL语句, 在书写上的格式、规范及环境配置等，详见：<a href="https://absentm.github.io/2016/04/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89/">数据库题目整理及详解（一），说明部分 </a> .</p></blockquote><hr><h2 id="题目详情"><a class="header-anchor" href="#题目详情">¶</a>题目详情</h2><ol><li>设某图书馆借阅系统数据库包含如下关系:</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">T_CARD(Cno, Cname, Class)</span><br><span class="line">T_BOOKS(Bno, Bname, Author, Price, Quantity)</span><br><span class="line">T_BORROW(Cno, Bno, Rdate)</span><br><span class="line"></span><br><span class="line">Cno, Cname, Class 分别表示借书卡的卡号、名称和所在班级;</span><br><span class="line">Bno, Bname, Author, Price, Quantity 分别表示图书的编号、名称、作者、价格和数量;</span><br><span class="line">Cno, Bno, Rdate 分别表示借阅条目的借书卡号、图书编号和还书日期。请使用 SQL 语句表示如下功能:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(1)  写出建立该数据库表的 SQL 语句,要求定义主码完整性约束和引用完整性约束。</span><br><span class="line">(2)  找出借书超过 3 本的读者,输出借书卡号及所借图书册数。</span><br><span class="line">(3)  查询借阅了"Chinese Book"一书的读者,输出姓名及班级。</span><br><span class="line">(4)  查询过期未还图书,输出借阅者(卡号)、书号及还书日期。</span><br><span class="line">(5)  查询书名包括"Chinese"关键词的图书,输出书号、书名、作者。</span><br><span class="line">(6)  查询现有图书中价格最高的图书,输出书名及作者。</span><br><span class="line">(7)  查询当前借了"Chinese Book"但没有借"English Book"的读者,</span><br><span class="line">     输出其借书卡号,并按卡号降序排序输出。</span><br><span class="line">(8)  将"class_1"班同学所借图书的还期都延长一周。</span><br><span class="line">(9)  从 T_BOOKS 表中删除当前无人借阅的图书记录。</span><br><span class="line">(10) 如果经常按书名查询图书信息,请建立合适的索引。</span><br><span class="line">(11) 在 BORROW 表上建立一个触发器,完成如下功能:</span><br><span class="line">     如果读者借阅的书名是"Computer Book", 就将该读者的借阅记录</span><br><span class="line">     保存在 BORROW_SAVE 表中(注ORROW_SAVE表结构同 BORROW 表)。</span><br><span class="line">(12) 建立一个视图,显示"力 01"班学生的借书信息(只要求显示姓名和书名)。</span><br><span class="line">(13) 查询当前同时借有"Computer Book"和"Math Book"两本书的读者,</span><br><span class="line">     输出其借书卡号,并按卡号升序排序输出。</span><br><span class="line">(14) 假定在建BOOKS表时没有定义主码,写出为BOOKS表追加定义主码的语句。</span><br><span class="line">(15) 对 CARD 表做如下修改:</span><br><span class="line"> a. 将 NAME 最大列宽增加到10个字符(假定原为6个字符);</span><br><span class="line"> b. 为该表增加1列NAME(系名), 可变长, 最大20个字符。</span><br></pre></td></tr></tbody></table></figure><h2 id="解前初始化"><a class="header-anchor" href="#解前初始化">¶</a>解前初始化</h2><p>1&gt;, 创建表结构:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create database books;         ## 创建名为：books的数据库</span><br><span class="line">use books;                     ## 使用emp数据库</span><br><span class="line"></span><br><span class="line">## 创建t_card表</span><br><span class="line">create table t_card (cno int(10) primary key, name varchar(100), class varchar(100));           </span><br><span class="line"></span><br><span class="line">## 创建t_books表</span><br><span class="line">create table t_books (bno int(10) primary key, bname varchar(100), author varchar(100), price numeric(10,2), quantity int(10));     </span><br><span class="line"></span><br><span class="line">## 创建t_books表</span><br><span class="line">create table t_borrow (cno int(10), bno int(10), rdate date);                                  </span><br></pre></td></tr></tbody></table></figure><hr><p>2&gt;,  完善表结构:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">## 添加主键(t_borrow表)</span><br><span class="line">alter table t_borrow add constraint borrow_pk primary key (cno, bno);</span><br><span class="line"></span><br><span class="line">## 添加外键(t_borrow表)</span><br><span class="line">alter table t_borrow add constraint borrow_fk_cno foreign key (cno) references t_card(cno);</span><br><span class="line"></span><br><span class="line">alter table t_borrow add constraint borrow_fk_bno foreign key (bno) references t_books(bno);</span><br></pre></td></tr></tbody></table></figure><hr><p>3&gt;,  插入数据:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">## 向t_card插入9条数据</span><br><span class="line">insert into t_card values(1, 'bryant', 'class_1');</span><br><span class="line">insert into t_card VALUES(2, 'foxus', 'class_1');</span><br><span class="line">insert into T_CARD VALUES(3, 'ennel', 'class_2');</span><br><span class="line">insert into T_CARD VALUES(4, 'keliy', 'class_3');</span><br><span class="line">insert into t_card VALUES(3, 'ennel', 'class_2');</span><br><span class="line">insert into t_card VALUES(4, 'keliy', 'class_3');</span><br><span class="line">insert into T_CARD VALUES(5, 'cinal', 'class_2');</span><br><span class="line">insert into t_card VALUES(6, 'oopp', 'class_3');</span><br><span class="line">insert into t_card VALUES(5, 'cinal', 'class_2');</span><br><span class="line">select * from t_card;</span><br><span class="line"></span><br><span class="line">## 向t_books插入10条数据</span><br><span class="line">insert into t_books values (1, 'Chinese Book', 'Mr.mao', 35.8, 20);</span><br><span class="line">insert into t_books values (2, 'Math Book', 'Mr.xiao', 55.4, 20);</span><br><span class="line">insert into t_books values (3, 'English Book', 'Mr.li', 22.6, 20);</span><br><span class="line">insert into t_books values (4, 'Computer Book', 'Mr.yang', 78.8, 15);</span><br><span class="line">insert into t_books values (5, 'Music Book', 'Mr.wang', 25.3, 15);</span><br><span class="line">insert into t_books values (6, 'History Book', 'Mr.mao', 40.8, 12);</span><br><span class="line">insert into t_books values (7, 'Physics Book', 'Mr.tang', 46.6, 10);</span><br><span class="line">insert into t_books values (8, 'Chemistry Book', 'Mr.zou', 33.9, 10);</span><br><span class="line">insert into t_books values (9, 'Biology Book', 'Mr.tu', 23, 10);</span><br><span class="line">insert into t_books values (10, 'Political Book', 'Mr.ke', 36.2, 10);</span><br><span class="line">select * from t_books</span><br><span class="line"></span><br><span class="line">## 向t_borrow插入23条数据</span><br><span class="line">insert into t_borrow values(1, 1, '2015-5-21');</span><br><span class="line">insert into t_borrow values(2, 1, '2015-5-21');</span><br><span class="line">insert into t_borrow values(3, 3, '2015-5-28');</span><br><span class="line">insert into t_borrow values(4, 8, '2015-6-21');</span><br><span class="line">insert into t_borrow values(5, 4, '2015-5-11');</span><br><span class="line">insert into t_borrow values(6, 10, '2015-5-31');</span><br><span class="line">insert into t_borrow values(1, 9, '2015-6-10');</span><br><span class="line">insert into t_borrow values(2, 3, '2015-7-2');</span><br><span class="line">insert into t_borrow values(3, 5, '2015-6-5');</span><br><span class="line">insert into t_borrow values(4, 6, '2015-6-2');</span><br><span class="line">insert into t_borrow values(5, 9, '2015-5-22');</span><br><span class="line">insert into t_borrow values(6, 1, '2015-6-1');</span><br><span class="line">insert into t_borrow values(1, 3, '2015-6-1');</span><br><span class="line">insert into t_borrow values(2, 4, '2015-6-15');</span><br><span class="line">insert into t_borrow values(3, 8, '2015-5-15');</span><br><span class="line">insert into t_borrow values(4, 10, '2015-6-22');</span><br><span class="line">insert into t_borrow values(5, 7, '2015-6-13');</span><br><span class="line">insert into t_borrow values(6, 6, '2015-5-18');</span><br><span class="line">insert into t_borrow values(1, 8, '2015-5-19');</span><br><span class="line">insert into t_borrow values(2, 9, '2015-5-20');</span><br><span class="line">insert into t_borrow values(3, 6, '2015-6-15');</span><br><span class="line">insert into t_borrow values(4, 2, '2015-6-15');</span><br><span class="line">insert into t_borrow values(5, 2, '2015-6-15');</span><br><span class="line">select * from t_borrow;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="题目详解"><a class="header-anchor" href="#题目详解">¶</a>题目详解</h2><ol><li>写出建立该数据库表的 SQL 语句,要求定义主码完整性约束和引用完整性约束。</li></ol><blockquote><p>见前部分的解前初始化内容.</p></blockquote><hr><ol start="2"><li>找出借书超过 3 本的读者,输出借书卡号及所借图书册数。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select cno, count(*) cs from t_borrow br group by cno having count(*) &gt; 3;</span><br></pre></td></tr></tbody></table></figure><hr><ol start="3"><li>查询借阅了"Chinese Book"一书的读者,输出姓名及班级。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select c.cno, c.name cname, c.class classname </span><br><span class="line">from t_card c, t_books b, t_borrow bo </span><br><span class="line">where c.cno=bo.cno and </span><br><span class="line">      b.bno=bo.bno and </span><br><span class="line">  b.bname='Chinese Book';</span><br></pre></td></tr></tbody></table></figure><hr><ol start="4"><li>查询过期未还图书,输出借阅者(卡号)、书号及还书日期。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select cno, bno, rdate from t_borrow where rdate &lt; current_date();</span><br><span class="line">## 注意:current_date()函数是当前日期, 相当于oracle中的sysdate.</span><br></pre></td></tr></tbody></table></figure><hr><hr><ol start="5"><li>查询书名包括"Chinese"关键词的图书,输出书号、书名、作者。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select bno, bname, author from t_books where bname like '%Chinese%';</span><br></pre></td></tr></tbody></table></figure><hr><ol start="6"><li>查询现有图书中价格最高的图书,输出书名及作者。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select bname, author from t_books where price =(select max(price) from t_books);</span><br></pre></td></tr></tbody></table></figure><hr><ol start="7"><li>查询当前借了"Chinese Book"但没有借"English Book"的读者,输出其借书<br>卡号,并按卡号降序排序输出。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">select cno </span><br><span class="line">from t_borrow br2 </span><br><span class="line">where exists (</span><br><span class="line">select cno </span><br><span class="line">from t_borrow br, t_books b </span><br><span class="line">where b.bname='Chinese Book' and </span><br><span class="line">  br.bno=b.bno and </span><br><span class="line">  br.cno=br2.cno) and </span><br><span class="line">  not exists (</span><br><span class="line">  select cno </span><br><span class="line">  from t_borrow br, t_books b </span><br><span class="line">  where b.bname='English Book' and </span><br><span class="line">  br.bno=b.bno and </span><br><span class="line">  br.cno=br2.cno) </span><br><span class="line">group by cno </span><br><span class="line">order by cno desc;</span><br></pre></td></tr></tbody></table></figure><hr><ol start="8"><li>将"class_1"班同学所借图书的还期都延长一周。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">update t_borrow br set br.rdate=br.rdate + 7 </span><br><span class="line">where exists (</span><br><span class="line">select cno </span><br><span class="line">from t_card </span><br><span class="line">where class='class_1' and cno=br.cno);  </span><br><span class="line"></span><br><span class="line">## 查看一下更新详情</span><br><span class="line">select * from t_borrow;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><ol start="9"><li>从 T_BOOKS 表中删除当前无人借阅的图书记录</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">delete from t_books </span><br><span class="line">where t_books.bno not in (</span><br><span class="line">select distinct c.bno from t_borrow c);</span><br><span class="line"></span><br><span class="line">## 注意: 如果使用not exist语句将会产生如下错误提示:</span><br><span class="line">ERROR 1093 (HY000): You can't specify target table 't_books' for update in FROM clause , 推荐使用in语句.</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><ol start="10"><li>如果经常按书名查询图书信息,请建立合适的索引。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create index index_t_books_name on t_books(bname);</span><br></pre></td></tr></tbody></table></figure><hr><ol start="11"><li>在 BORROW 表上建立一个触发器, 完成如下功能:如果读者借阅的书名是"Computer Book", 就将该读者的借阅记录保存在 BORROW_SAVE 表中(注ORROW_SAVE 表结构同 BORROW 表) 。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">## 先创建t_borrow_save表</span><br><span class="line">create table t_borrow_save(cno int(10), bno int(10), rdate date);</span><br><span class="line"></span><br><span class="line">## 创建触发器</span><br><span class="line">create or replace trigger trg_borrow </span><br><span class="line">after insert </span><br><span class="line">on t_borrow </span><br><span class="line">for each row </span><br><span class="line">begin </span><br><span class="line">if :new.bno=4 </span><br><span class="line">then  </span><br><span class="line">insert into t_borrow_save(cno, bno, rdate)</span><br><span class="line">values(:new.cno, :new.bno, :new.rdate); </span><br><span class="line">end if;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">## 删除触发器</span><br><span class="line">drop trigger trg_borrow;</span><br><span class="line"></span><br><span class="line">## 注意此处, 在oracle数据运行通过.</span><br></pre></td></tr></tbody></table></figure><hr><ol start="12"><li>建立一个视图,显示"力 01"班学生的借书信息(只要求显示姓名和书名)。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create view view_t_borrow as</span><br><span class="line">select c.name cname, b.bname bname</span><br><span class="line">from t_borrow br, t_card c, t_books b</span><br><span class="line">where br.cno=c.cno and </span><br><span class="line">br.bno=b.bno and c.class='class_1';</span><br><span class="line"></span><br><span class="line">## 显示结果</span><br><span class="line">select * from view_t_borrow;</span><br></pre></td></tr></tbody></table></figure><hr><ol start="13"><li>查询当前同时借有"Computer Book"和"Math Book"两本书的读者,输出其借书卡号,并按卡号升序排序输出。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select a.cno </span><br><span class="line">from t_borrow a, t_books b</span><br><span class="line">where a.bno=b.bno and b.bname in ('Computer Book', 'Math Book')</span><br><span class="line">group by a.cno having count(*)=2 </span><br><span class="line">order by a.cno desc;</span><br></pre></td></tr></tbody></table></figure><hr><ol start="14"><li>假定在建 BOOKS 表时没有定义主码,写出为 BOOKS 表追加定义主码的语句。</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table t_books </span><br><span class="line">add constraint pk_t_books primary key (bno);</span><br></pre></td></tr></tbody></table></figure><hr><ol start="15"><li>对 CARD 表做如下修改:</li></ol><blockquote><p>a. 将 NAME 最大列宽增加到 10 个字符(假定原为 6 个字符);<br>b. 为该表增加 1 列 NAME(系名),可变长,最大 20 个字符。</p></blockquote><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table t_card modify name varchar(50);</span><br><span class="line">alter table t_card add name1 varchar(20);</span><br><span class="line">alter table t_Card drop column name1;</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://blog.csdn.net/tu451953337/article/details/45190849">http://blog.csdn.net/tu451953337/article/details/45190849</a><br>[2]. <a href="http://mrxiong.blog.51cto.com/287318/1651098/">http://mrxiong.blog.51cto.com/287318/1651098/</a><br>[3]. <a href="http://blog.csdn.net/jeamking/article/details/5953986">http://blog.csdn.net/jeamking/article/details/5953986</a><br>[4]. <a href="http://blog.163.com/yang_jianli/blog/static/1619900062011282225274/">http://blog.163.com/yang_jianli/blog/static/1619900062011282225274/</a><br>[5]. <a href="http://www.111cn.net/database/mysql/36105.htm">http://www.111cn.net/database/mysql/36105.htm</a><br>[6]. <a href="http://blog.csdn.net/wjeson/article/details/17166205">http://blog.csdn.net/wjeson/article/details/17166205</a><br>[7]. <a href="http://www.cnblogs.com/zzwlovegfj/archive/2012/07/04/2576989.html">http://www.cnblogs.com/zzwlovegfj/archive/2012/07/04/2576989.html</a><br>[8]. <a href="http://www.jb51.net/article/49207.htm">http://www.jb51.net/article/49207.htm</a></p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库题目整理及详解（二）</title>
      <link href="/2019/04/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2019/04/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>— 吴文英: 风入松·听风听雨过清明</p><blockquote><p>听风听雨过清明，愁草瘗花铭。楼前绿暗分携路，一丝柳，一寸柔情。料峭春寒中酒，交加晓梦啼莺。</p><p>西园日日扫林亭，依旧赏新晴。黄蜂频扑秋千索，有当时、纤手香凝。惆怅双鸳不到，幽阶一夜苔生。</p></blockquote><p>今早晚起，来到实验室大门紧闭，暗光尤凉啊，窗帘落幕，显得格外清幽；于是乎，接着昨天的数据库题目继续整理，享受这片刻安宁…</p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><blockquote><p>这部分和前一片博文内容一样，在书写上的格式、规范及环境配置等，详见：<a href="https://absentm.github.io/2019/04/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89/">数据库题目整理及详解（一），说明部分</a> 。</p></blockquote><blockquote><p>这一部分主要内容为：mysql数据库<strong>权限</strong>相关的SQL语句。</p></blockquote><hr><h2 id="题目解析"><a class="header-anchor" href="#题目解析">¶</a>题目解析</h2><p>2.考虑如下关系模式:</p><blockquote><p>Employee(Eno, Ename, Birthday, Title, Salary, Dno)<br>Department(Dno, Dname, MgrNo, Address, Phone)</p></blockquote><p>使用 SQL 提供的功能完成如下授权:</p><p>(1) 允许 WangLan 对两个关系进行任何操作,并可以将他的权限转授他人。<br>(2) 允许所有用户查询 Department 关系。<br>(3) 允许所有用户查询 Employee 关系的 Salary 属性进行修改。<br>(4) 允许 LiYong 对 Employee 关系的 Salary 属性进行修改。<br>(5) 允许 ShangHua 查询每个部门的最低、最高和平均工资。<br>(6) 定义一个角色 Secretary,可以对 Department 进行任何操作,对 Employee<br>除了不能修改 Salary 属性值之外,可以进行任何操作。<br>(7) LiHua 是秘书,拥有角色 Secretary 的权限。<br>(8) 回收(1)-(4)的权限。<br>(9) 不允许角色 Secretary 修改 Employee 的 Title 属性值。</p><hr><h3 id="初始化-创建数据库、建表、插入数据"><a class="header-anchor" href="#初始化-创建数据库、建表、插入数据">¶</a>初始化: 创建数据库、建表、插入数据</h3><p>1， 创建数据库：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database emp;         ## 创建名为：emp的数据库</span><br><span class="line">use emp;                     ## 使用emp数据库</span><br></pre></td></tr></tbody></table></figure><p>2， 创建department数据表：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table department (    ## 创建department表</span><br><span class="line">dno char(8) primary key,</span><br><span class="line">dname char(16) not null,</span><br><span class="line">mgrno int, </span><br><span class="line">address char(36),</span><br><span class="line">phone char(11));</span><br></pre></td></tr></tbody></table></figure><p>注意到，在创建department表时，最后一个属性phone当时错误写为：phont了（详见配图），修改表属性使用如下操作：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 修改写错的表属性：phone</span><br><span class="line">alter table department change phont phone char(11);  </span><br><span class="line"></span><br><span class="line">## 查看表结构</span><br><span class="line">desc department;</span><br></pre></td></tr></tbody></table></figure><p>3， 在department表中插入数据：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">insert into department (dno, dname, mgrno, address, phone) values ('d0001', 'dname001', 'mgrno01', 'add001', '18839952431');</span><br><span class="line"></span><br><span class="line">insert into department (dno, dname, mgrno, address, phone) values ('d0002', 'dname002', 'mgrno02', 'add002', '18238952440');</span><br><span class="line"></span><br><span class="line">insert into department (dno, dname, mgrno, address, phone) values ('d0003', 'dname003', 'mgrno03', 'add003', '18738992450');</span><br><span class="line"></span><br><span class="line">select * from department;     ## 查看一下插入的数据</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>4， 创建employee数据表</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table employee (</span><br><span class="line">eno char(8) not null,</span><br><span class="line">ename char(16) not null,</span><br><span class="line">birthday date,</span><br><span class="line">title char(22),</span><br><span class="line">salary int,</span><br><span class="line">dno char(8),</span><br><span class="line">primary key (eno),</span><br><span class="line">FOREIGN KEY (dno) REFERENCES department(dno));</span><br></pre></td></tr></tbody></table></figure><p>5，在employee表中插入数据：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">insert into employee (eno, ename, birthday, title, salary, dno) values ('e0001', 'wanglan', '1992-02-04', 'jingli', 8000, 'd0001');</span><br><span class="line"></span><br><span class="line">insert into employee (eno, ename, birthday, title, salary, dno) values ('e0002', 'liyong', '1989-03-14', 'guanliyuan', 10000, 'd0002');</span><br><span class="line"></span><br><span class="line">insert into employee (eno, ename, birthday, title, salary, dno) values ('e0003', 'shanghua', '1988-10-18', 'cto', 20000, 'd0003');</span><br><span class="line"></span><br><span class="line">select * from employee;     ## 查看一下插入的数据</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>6，添加用到的用户：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">## 添加数据库用户：wanglan</span><br><span class="line">insert into mysql.user(host, user, password) values('localhost', 'wanglan', password('wanglan123'));</span><br><span class="line"></span><br><span class="line">## 添加数据库用户：liyong</span><br><span class="line">insert into mysql.user(host, user, password) values('localhost', 'liyong', password('liyong123'));</span><br><span class="line"></span><br><span class="line">## 添加数据库用户：shanghua</span><br><span class="line">insert into mysql.user(host, user, password) values('localhost', 'shanghua', password('shanghua123'));</span><br><span class="line"></span><br><span class="line">## 注意mysql.user表的host字段，若值为：localhost，表示本地用户；</span><br><span class="line">若值为：%，表示外网用户；</span><br></pre></td></tr></tbody></table></figure><p>到这里先前的准备工作就做完了…</p><hr><h3 id="题目解答"><a class="header-anchor" href="#题目解答">¶</a>题目解答</h3><p>这里再次贴一下题目内容吧:</p><p>(1) 允许 WangLan 对两个关系进行任何操作, 并可以将他的权限转授他人。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on emp.* to wanglan@localhost identified by 'wanglan123' with grant option;</span><br><span class="line"></span><br><span class="line">## 注意mysql中要严格添加完整的操作哪个数据库的哪个表, 并且用户需要缀上host主机号, 如上:wanglan@localhost 或 wanglan@'%'外网用户.</span><br></pre></td></tr></tbody></table></figure><p>(2) 允许所有用户查询 Department 关系。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant select on emp.department to public;</span><br></pre></td></tr></tbody></table></figure><p>(3) 允许所有用户查询 Employee 关系的 Salary 属性进行修改。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">## 我们需要在 employee 上创建一个视图 emp_view:</span><br><span class="line">create view emp_view as select ename, title, dno from employee;</span><br><span class="line"></span><br><span class="line">## 然后,将emp_view上的查询权限授予所有用户:</span><br><span class="line">grant select on emp_view to public;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>(4) 允许 LiYong 对 Employee 关系的 Salary 属性进行修改。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## 注意, 更新用户权限后,应该刷新一下权限列表:</span><br><span class="line">flush privileges; </span><br><span class="line"></span><br><span class="line">grant update(salary) on table emp.employee to liyong@localhost;</span><br></pre></td></tr></tbody></table></figure><hr><p>(5) 允许 ShangHua 查询每个部门的最低、最高和平均工资。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 我们需要在 employee 上创建一个视图 deptsalary:</span><br><span class="line">create view deptsalary as select dname, min(salary) minsalary, max(salary) maxsalary, avg(salary) avgsalary from employee e, department d where e.dno=d.dno group by dname;</span><br><span class="line"></span><br><span class="line">## 然后,将deptsalary上的查询权限授予所有用户:</span><br><span class="line">grant select on deptsalary to shanghua@localhost;</span><br></pre></td></tr></tbody></table></figure><p>(6) 定义一个角色 Secretary,可以对 Department 进行任何操作,对 Employee<br>除了不能修改 Salary 属性值之外,可以进行任何操作。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## 首先创建一个角色 Secretary:</span><br><span class="line">CREATE ROLE Secretary;</span><br><span class="line"></span><br><span class="line">## 然后,对角色 Secretary 授权:</span><br><span class="line">GRANT ALL PRIVILIGES ON Department TO Secretary;</span><br><span class="line">GRANT SELECT, DELETE ON Employee TO Secretary;</span><br><span class="line">GRANT UPDATE(Eno, Ename, Birthday, Title, Dno)</span><br><span class="line">ON TABLE Employee TO Secretary;</span><br><span class="line"></span><br><span class="line">## 注意,mysql数据库并不需要配置**角色**, 一般都是通过创建用户分配权限完成, 这里给出的时SQL SERVICE版的写法.</span><br></pre></td></tr></tbody></table></figure><p>(7) LiHua 是秘书,拥有角色 Secretary 的权限。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT Secretary TO Lihua;</span><br></pre></td></tr></tbody></table></figure><p>(8) 回收(1) - (4)的权限。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">revoke all privileges on emp.* from wanglan@localhost;</span><br><span class="line"></span><br><span class="line">revoke select on table emp.department from public;</span><br><span class="line"></span><br><span class="line">revoke select on table emp_view from public;</span><br><span class="line"></span><br><span class="line">revoke update(salary) on table emp.employee from liyong@localhost;</span><br><span class="line"></span><br><span class="line">## 注意所有的内容都要书写完整.</span><br></pre></td></tr></tbody></table></figure><p>(9) 不允许角色 Secretary 修改 Employee 的 Title 属性值。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## SQL SERVICE版写法</span><br><span class="line">REVOKE UPDATE(Title) ON TABLE Employee FROM Secretary;</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://www.blogjava.net/etlan/archive/2007/07/12/129794.html">http://www.blogjava.net/etlan/archive/2007/07/12/129794.html</a><br>[2]. <a href="http://blog.163.com/xychenbaihu@yeah/blog/static/13222965520113353229427/">http://blog.163.com/xychenbaihu@yeah/blog/static/13222965520113353229427/</a><br>[3]. <a href="http://www.linuxidc.com/Linux/2014-09/107422.htm">http://www.linuxidc.com/Linux/2014-09/107422.htm</a><br>[4]. <a href="http://www.cnblogs.com/fslnet/p/3143344.html">http://www.cnblogs.com/fslnet/p/3143344.html</a><br>[5]. <a href="http://my.oschina.net/wojibuzhu/blog/229094">http://my.oschina.net/wojibuzhu/blog/229094</a><br>[6]. <a href="http://www.cnblogs.com/wanghetao/p/3806888.html">http://www.cnblogs.com/wanghetao/p/3806888.html</a><br>[7]. <a href="http://www.2cto.com/database/201506/409608.html">http://www.2cto.com/database/201506/409608.html</a><br>[8]. <a href="http://database.51cto.com/art/201011/234543.htm">http://database.51cto.com/art/201011/234543.htm</a><br>[9]. <a href="http://blog.csdn.net/andy_yf/article/details/7487519">http://blog.csdn.net/andy_yf/article/details/7487519</a></p><p>@@@@@@ 吃饭喽, 未完待续…</p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库题目整理及详解（一）</title>
      <link href="/2019/04/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2019/04/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86%E5%8F%8A%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>-----冯延巳： 鹊踏枝.清明</p><blockquote><p>六曲阑干偎碧树，杨柳风轻，展尽黄金缕。谁把钿筝移玉柱？穿帘海燕惊飞去。<br>满眼游丝兼落絮，红杏开时，一霎清明雨。浓睡觉来慵不语，惊残好梦无寻处？</p></blockquote><p>小假前夕，大Boss让当差，于是便可以名正言顺的重温一下数据库；时间还真是一把XXXX，夺走了记忆，失掉了“手熟尔”。</p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><p>1: 内容：sql语句相关：建表、查询、权限等；<br>2: 环境：Ubuntu 14.04 LTS下的Mysql5.5；<br>3: 环境搭建见：<a href="http://jingyan.baidu.com/article/425e69e6bbc6c7be14fc1640.html">ubuntu下mysql数据库的安装配置</a><br>4: 规范：解析中的<strong>SQL关键字</strong>都使用黑粗体标记了，并且有大小写的区分；Mysql中是对sql语句大小写敏感的，为了节省时间，在亲测中都使用小写，详见截图;<br>5: 每书写一条sql语句，最后都需要加英文分号（“;”）;<br>6: 每一行sql语句基本都亲测了一下，望诸君戮力，多有指正。</p><hr><h2 id="题目解析"><a class="header-anchor" href="#题目解析">¶</a>题目解析</h2><p>1: 设供应商-工程-零件数据库包含如下关系:</p><blockquote><p>Suppliers(Sno, Sname, Status, Scity)<br>Parts(Pno, Pname, Color, Weight)<br>Projects(Jno, Jname, Jcity)<br>SPJ(Sno, Pno, Jno, Quantity)</p></blockquote><p>其中,各关系的主码用下横线标示。Sno, Sname, Status, Scity 分别表示供应商的编号、名称、状态和所在城市;Pno, Pname, Color, Weight 分别表示零件的编号、名称、颜色和重量;Jno, Jname, Jcity 分别表示工程的编号、名称和所在城市; SPJ 是供应关系,Quantity 是特定供应商一次向特定工程供应的特定零件的数量。请使用 SQL 语句表示如下功能:</p><blockquote><p>题目都比较简单，开始之前，做部分初始化：</p></blockquote><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database stu;         ## 创建名为：stu的数据库</span><br><span class="line">use stu;                     ## 使用stu数据库</span><br></pre></td></tr></tbody></table></figure><p>(1) 使用 SQL 创建基本表,确定每个属性的类型、缺省值和约束条件。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Suppliers (</span><br><span class="line">Sno CHAR (8) PRIMARY KEY,</span><br><span class="line">Sname CHAR (8) NOT NULL,</span><br><span class="line">Status INT,</span><br><span class="line">Scity CHAR(10));</span><br></pre></td></tr></tbody></table></figure><hr><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Parts (</span><br><span class="line">Pno CHAR (8) PRIMARY KEY,</span><br><span class="line">Pname CHAR(16) NOT NULL,</span><br><span class="line">Color CHAR(4),</span><br><span class="line">Weight NUMERIC(7, 2));</span><br></pre></td></tr></tbody></table></figure><hr><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Projects (</span><br><span class="line">Jno CHAR (8) PRIMARY KEY,</span><br><span class="line">Jname CHAR(20) NOT NULL,</span><br><span class="line">Jcity CHAR(10));</span><br></pre></td></tr></tbody></table></figure><p>注意, 该处在操作时，将表名写为：project了，于是使用 alter语句修改表名：<code>alter table project rename to projects;</code></p><hr><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE SPJ (</span><br><span class="line">Sno CHAR (8),</span><br><span class="line">Pno CHAR(8),</span><br><span class="line">Jno CHAR(8),</span><br><span class="line">Quantity INT,</span><br><span class="line">PRIMARY KEY (Sno,Pno,Jno),</span><br><span class="line">FOREIGN KEY (Sno) REFERENCES Suppliers(Sno),</span><br><span class="line">FOREIGN KEY (Pno) REFERENCES Parts(Pno),</span><br><span class="line">FOREIGN KEY (Jno) REFERENCES Projects(Jno) );</span><br></pre></td></tr></tbody></table></figure><p>该处使用了外键，注意单词一定不要拼错，在测试中 <code>PRIMARY KEY、FOREIGN KEY</code>的内容都需要使用括号括起来，不然会报语法错误的提示.</p><hr><p>(2) 求上海的所有供应商的信息。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Suppliers WHERE Scity=‘上海’;</span><br></pre></td></tr></tbody></table></figure><p>(3) 求位于北京的所有工程的信息。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Projects WHERE Jcity=‘北京’;</span><br></pre></td></tr></tbody></table></figure><p>(4) 求数量在 100-150 的供应。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM SPJ WHERE Quantity BETWEEN 100 AND 150;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意此处: 使用<code>between ... and</code> 语句。</p></blockquote><p>(5) 求为工程 J1 提供零件的供应商号。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno FROM SPJ WHERE Jno=‘J1’;</span><br></pre></td></tr></tbody></table></figure><p>(6) 求供应工程 J1 红色零件的供应商号。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno</span><br><span class="line">FROM SPJ, Parts</span><br><span class="line">WHERE SPJ.Pno=Parts.Pno AND Jno=‘J1’ AND Color=‘红色’;</span><br></pre></td></tr></tbody></table></figure><p>(7) 求至少提供一种红色零件的供应商名称。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname</span><br><span class="line">FROM SPJ, Parts, Suppliers</span><br><span class="line">WHERE SPJ.Pno=Parts.Pno AND SPJ.Sno=Suppliers.Sno AND Color=‘红色’;</span><br></pre></td></tr></tbody></table></figure><p>(8) 求不提供零件 P2 的供应商名称。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname</span><br><span class="line">FROM Suppliers</span><br><span class="line">WHERE NOT EXISTS</span><br><span class="line">(SELECT *</span><br><span class="line">FROM SPJ</span><br><span class="line">WHERE SPJ.Sno= Suppliers.Sno AND Pno=‘P2’);</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意此处: 使用<code>not exists</code> 语句。</p></blockquote><p>(9) 求没有使用天津供应商生产的红色零件的工程号。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT Jno</span><br><span class="line">FROM Projects</span><br><span class="line">WHERE NOT EXISTS</span><br><span class="line">(SELECT *</span><br><span class="line"> FROM SPJ, Parts, SuppliersWHERE SPJ.Sno= Suppliers.Sno AND</span><br><span class="line"> Parts.Pno=SPJ.Pno AND</span><br><span class="line"> Color=‘红色’ AND Scity=‘天津’);</span><br></pre></td></tr></tbody></table></figure><p>(10) 求使用了本地供应商提供的零件的工程号。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT Projects.Jno, Projects.Jname</span><br><span class="line">FROM Projects,Suppliers,SPJ</span><br><span class="line">WHERE SPJ.Sno= Suppliers.Sno AND</span><br><span class="line">Projects.Jno=SPJ.Jno AND</span><br><span class="line">Projects.Jcity= Suppliers.Scity;</span><br></pre></td></tr></tbody></table></figure><p>或</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT Jno,Jname</span><br><span class="line">FROM Projects</span><br><span class="line">WHERE EXISTS (</span><br><span class="line">SELECT *</span><br><span class="line">FROM SPJ, Suppliers</span><br><span class="line">WHERE SPJ.Sno= Suppliers.Sno AND</span><br><span class="line">Projects.Jno=SPJ.Jno AND</span><br><span class="line">Projects.Jcity= Suppliers.Scity);</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意此处: 使用<code>exists</code> 语句。</p></blockquote><p>(11)  求未使用本地供应商提供的零件的工程号和工程名称。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT Jno,Jname</span><br><span class="line">FROM Projects</span><br><span class="line">WHERE NOT EXISTS (</span><br><span class="line">SELECT *</span><br><span class="line">FROM SPJ, Suppliers</span><br><span class="line">WHERE SPJ.Sno= Suppliers.Sno AND</span><br><span class="line">            Projects.Jno=SPJ.Jno AND</span><br><span class="line">            Projects.Jcity= Suppliers.Scity);</span><br></pre></td></tr></tbody></table></figure><p>(12) 求至少用了供应商 S1 所供应的全部零件的工程号。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT Jno</span><br><span class="line">FROM Projects</span><br><span class="line">WHERE NOT EXISTS (</span><br><span class="line">SELECT *</span><br><span class="line">FROM SPJ SPJ1</span><br><span class="line">WHERE SPJ1.Sno = ‘S1’ AND</span><br><span class="line">NOT EXISTS (</span><br><span class="line">SELECT *</span><br><span class="line">FROM SPJ SPJ2</span><br><span class="line">WHERE SPJ2.Jno= Projects.Jno AND</span><br><span class="line">SPJ2.Pno= SPJ1.Pno));</span><br></pre></td></tr></tbody></table></figure><p>(13) 求提供所有零件的供应商名称。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname</span><br><span class="line">FROM Suppliers</span><br><span class="line">WHERE NOT EXISTS (</span><br><span class="line">SELECT *</span><br><span class="line">FROM SPJ SPJ1</span><br><span class="line">WHERE NOT EXISTS (</span><br><span class="line">SELECT *</span><br><span class="line">            FROM SPJ SPJ2</span><br><span class="line">            WHERE SPJ2.Sno= Suppliers.Sno AND</span><br><span class="line">            SPJ2.Pno= SPJ1.Pno));</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意此处: 使用建立<strong>别名</strong>的机制。</p></blockquote><p>(14) 求提供了零件的供应商的个数。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT distinct Sno FROM SPJ;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意此处的<code>distinct</code>语句。</p></blockquote><p>(15) 求所有零件的平均重量。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT avg(weight) FROM Parts;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意此处的<code>avg</code>函数，用于求取平均值。</p></blockquote><p>(16) 求供应商 S1 提供的每种零件的总数量。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT Pno, sum(quantity) FROM SPJ WHERE Sno=‘S1’ GROUP BY Pno;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意此处的<code>sum</code>函数，用于求和；以及<code>GROUP BY</code>语句用于分组。</p></blockquote><p>(17) 求供应商 S1 供应工程 J1 的每种零件的总重量。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT sum(weight)</span><br><span class="line">FROM Parts, SPJ</span><br><span class="line">WHERE SPJ.Pno=Parts.Pno AND Sno=‘S1’ AND Jno=‘J1’</span><br><span class="line">GROUP BY Parts.Pno;</span><br></pre></td></tr></tbody></table></figure><hr><p>@@@@@@@<strong>看来这部分要写成系列的了，今天就到这儿，未完待续…</strong></p><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://www.shuojuzi.com/s/shicidaquan/128764.html">http://www.shuojuzi.com/s/shicidaquan/128764.html</a><br>[2]. <a href="https://www.douban.com/note/155415235/">https://www.douban.com/note/155415235/</a><br>[3]. <a href="http://www.cnblogs.com/wzmenjoy/p/4244545.html">http://www.cnblogs.com/wzmenjoy/p/4244545.html</a><br>[4]. <a href="http://www.tanbo.name/html/544.html">http://www.tanbo.name/html/544.html</a><br>[5]. <a href="http://jxtm.jzu.cn/?p=258">http://jxtm.jzu.cn/?p=258</a><br>[6]. <a href="http://www.jb51.net/article/23966.htm">http://www.jb51.net/article/23966.htm</a><br>[7]. <a href="http://jingyan.baidu.com/article/425e69e6bbc6c7be14fc1640.html">http://jingyan.baidu.com/article/425e69e6bbc6c7be14fc1640.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Database Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java中的单例类</title>
      <link href="/2019/03/31/Java%E4%B8%AD%E7%9A%84%E5%8D%95%E4%BE%8B%E7%B1%BB/"/>
      <url>/2019/03/31/Java%E4%B8%AD%E7%9A%84%E5%8D%95%E4%BE%8B%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h3 id="定义"><a class="header-anchor" href="#定义">¶</a>定义:</h3><p>如果一个类始终只能创建一个实例，则称这样的类为“单例类”（SingleTon）。</p><hr><h3 id="应用场景"><a class="header-anchor" href="#应用场景">¶</a>应用场景</h3><p>在一些特殊的场景下，要求不允许自由的创建该类的对象，而只允许为该类创建一个对象。</p><p>为了避免其他类自由的创建该类的实例，我们使用private关键字标记标记该类的构造器，从而隐藏该类所有的其他构造器。</p><hr><h3 id="语法规则"><a class="header-anchor" href="#语法规则">¶</a>语法规则</h3><p>&lt; 1 &gt; 构造器：使用private关键字修饰，隐藏其他所有的构造器。<br>&lt; 2 &gt; 成员方法：使用public关键字修饰，用于创建该类的实例；需要static关键字限定，<br>因为调用该方法之前还不存在且不能存在对象，所有调用该方法的不能是对象，只能是类。<br>&lt; 3 &gt; 成员变量：private static 修饰，用来保存曾经创建的对象，起到缓存的作用，<br>通过这种方法可以知道该类是否曾经创建过对象，从而保证了只创建该类的一个对象。</p><hr><h3 id="实例"><a class="header-anchor" href="#实例">¶</a>实例</h3><p>&lt; 1 &gt; SingleTon.java 类的构造：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by dm on 15/10/28.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleTon</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingleTon instance;  <span class="comment">// 使用一个变量来缓存创建过的对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingleTon</span><span class="params">()</span> { }  <span class="comment">// 对构造器使用private修饰，隐藏该构造器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 提供一个静态方法，用于返回该类的实例；</span></span><br><span class="line"><span class="comment">     * 该方法可以加入自定义控制，保证只产生一个实例。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> instance</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingleTon <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果instance == null 表明还未创建过该类的实例</span></span><br><span class="line">        <span class="comment">// 如果instance != null 表明已经创建过该类的实例</span></span><br><span class="line">        <span class="comment">// 从而保证只创建该类的一个实例</span></span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>) {</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">SingleTon</span>(); <span class="comment">// 缓存该类的实例</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><hr><p>&lt; 2 &gt; MainTest.java 使用测试：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by dm on 15/10/28.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// SingleTonTest</span></span><br><span class="line">        <span class="comment">// 不能通过该类的构造器生成对象，只能通过类调用实例</span></span><br><span class="line">        <span class="type">SingleTon</span> <span class="variable">singleTon1</span> <span class="operator">=</span> SingleTon.getInstance();</span><br><span class="line">        <span class="type">SingleTon</span> <span class="variable">singleTon2</span> <span class="operator">=</span> SingleTon.getInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 单例类使得只产生一个对象，指向同一块内存地址，故返回：true</span></span><br><span class="line">        System.out.println(<span class="string">"singleTon1 == singleTon2 ??? "</span>);</span><br><span class="line">        System.out.println(singleTon1 == singleTon2);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github开源编辑器Atom常用插件及安装方法</title>
      <link href="/2019/01/12/Github%E5%BC%80%E6%BA%90%E7%BC%96%E8%BE%91%E5%99%A8Atom%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%E5%8F%8A%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95/"/>
      <url>/2019/01/12/Github%E5%BC%80%E6%BA%90%E7%BC%96%E8%BE%91%E5%99%A8Atom%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%E5%8F%8A%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="简记"><a class="header-anchor" href="#简记">¶</a>简记</h2><blockquote><p>工欲善其事，必先利其器！</p></blockquote><blockquote><p>这款被称为“21世纪”的代码编辑器——Atom， 是开源免费跨平台的，并且整合 GIT 并提供类似 SublimeText 的包管理功能，</p></blockquote><blockquote><p>同时，支持插件扩展，可配置性非常高……，乍一看，像极了Sublime Text，但当你在使用时却感觉还是特别爽！！！</p></blockquote><p>更多：<a href="http://www.iplaysoft.com/atom-editor.html">Atom中文简介</a></p><hr><h2 id="预览"><a class="header-anchor" href="#预览">¶</a>预览</h2><p>先放几张靓图，感受一下！</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-black.png" alt="Atom-black"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-split.png" alt="Atom-split"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-Solarized.png" alt="Atom-Solarized"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-Solarized.png" alt="Atom-Solarized-split"></p><hr><h2 id="基于Github的常用插件"><a class="header-anchor" href="#基于Github的常用插件">¶</a>基于Github的常用插件</h2><p>目前Atom编辑器最新的版本是: v1.3.1，附上官网：<a href="https://atom.io/">Atom官网</a>，长这样的：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-Atom.png" alt="Atom-Atom"></p><p>当然， 你也可以在Github上直接找到下载地址：<a href="https://github.com/atom/atom/releases/tag/v1.3.1">Github上的下载地址</a></p><hr><h3 id="安装插件前准备"><a class="header-anchor" href="#安装插件前准备">¶</a>安装插件前准备</h3><p>[1] 先了解下Atom的设置界面：</p><p>打开Atom后使用键盘快捷键“Alt”，可以打开和隐藏菜单栏，不妨试试看，选择File -&gt; Settings，便可以打开设置界面（如图）：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-Atom.png" alt="Atom-Atom-setting"></p><p>设置界面主要有六个部分：</p><p>1: Settings: 通用设置；<br>2: Keybindings: 快捷键设置；<br>3: Packages: 插件管理；<br>4: Themes: 设置和安装主题；<br>5: Updates: 更新插件<br>6: Install: 安装插件 或主题</p><p>在Settings界面，我们先做一下常用的设置：</p><p>1: Core Settings -&gt; File Encoding: utf-8;<br>2: Editor Settings 中：<br>Audo Indent 选上;<br>Font Family中 Windows默认使用Consolas字体，很适合编程，可以自定义，写上字体名称即可；<br>Fonts Size: 设置字体大写；<br>Line Height: 设置行高，如1.3；<br>Show Indent Guide：缩进下垂线，选上；<br>Show Line Number： 行号，选上；<br>Soft Wrap: 超出行长度限制后，自动折行；<br>Tab Length: 4；</p><p><strong>其他的都保持默认吧！！！</strong></p><hr><p>[2] 翻墙：加速插件下载速度</p><p>就用蓝灯吧，GitHub搜索lantern，Windows自动安装无需任何设置，记得使用Google Chrome不一样的体验，附上lantern地址：<a href="https://github.com/getlantern/lantern">lantern Github下载地址</a>，打开浏览器是这样的：{Youtube, facebook,都上去了！速度还可以}</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-lantern.png" alt="Atom-lantern"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-YouTuBe.png" alt="Atom-YouTuBe"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-FaceBook.png" alt="Atom-FaceBook"></p><hr><h3 id="插件安装"><a class="header-anchor" href="#插件安装">¶</a>插件安装</h3><p>本文推荐使用Atom自带插件管理器进行安装</p><h4 id="安装方法"><a class="header-anchor" href="#安装方法">¶</a>安装方法</h4><p><strong>在Settings界面的Install选项中，可以搜索插件或者主题进行下载安装，有的可能会提醒重启Atom才能激活</strong>，界面下边还有Hot推荐插件列表：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-plugins.png" alt="Atom-plugins"></p><hr><h4 id="插件-1-minimap"><a class="header-anchor" href="#插件-1-minimap">¶</a>插件[1]  minimap</h4><p>顾名思义，这款插件在窗口的右边栏打上遮罩，为 Atom 加上 Sublime Text 的源码预览图，提供丰富的自定义选项，值得一用，效果如1。</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-minimap.png" alt="Atom-minimap"></p><hr><h4 id="插件-2-activity-power-mode"><a class="header-anchor" href="#插件-2-activity-power-mode">¶</a>插件[2]  activity-power-mode</h4><p>Atom装逼插件，配上个青轴机械键盘，我看见代码在跳舞啊，动次动次动动次！！！</p><p><a href="https://atom.io/packages/activate-power-mode">Atom-activity-power-mode1</a></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-activity-power-mode2.gif" alt="Atom-activity-power-mode2"></p><p>装上之后使用快捷键：Ctrl + Alt + o 激活</p><hr><h4 id="插件-3-autocomplete-plus"><a class="header-anchor" href="#插件-3-autocomplete-plus">¶</a>插件[3]  autocomplete-plus</h4><p>当输入的时候，提供可能的候选项。<br><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-autocomplete-plus.gif" alt="Atom-autocomplete-plus"></p><hr><h4 id="插件-4-javascript-snippets"><a class="header-anchor" href="#插件-4-javascript-snippets">¶</a>插件[4]  javascript-snippets</h4><p>输入特殊的字符后自动扩展成对应的代码片段。<br><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-javascript-snippets.gif" alt="Atom-javascript-snippets"></p><hr><h4 id="插件-5-git-plus"><a class="header-anchor" href="#插件-5-git-plus">¶</a>插件[5]  git plus</h4><p>在 Atom 里面执行 Git 命令，不用来回切换终端和编辑器。</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Atom-git_plus.gif" alt="Atom-git_plus"></p><hr><h4 id="插件-6-merge-conflicts"><a class="header-anchor" href="#插件-6-merge-conflicts">¶</a>插件[6]  merge-conflicts</h4><p>解决Atom中合并冲突插件！<br><a href="https://atom.io/packages/merge-conflicts">merge-conflicts官方地址</a></p><hr><h4 id="插件-7-Script"><a class="header-anchor" href="#插件-7-Script">¶</a>插件[7]  Script</h4><p>可以根据文件名称，或所选的代码块，或行号执行代码，支持大多数编程语言！！！<br><a href="https://atom.io/packages/script">Script官方地址</a></p><hr><h4 id="插件-8-atom-ctags"><a class="header-anchor" href="#插件-8-atom-ctags">¶</a>插件[8]  atom-ctags</h4><p>使用 ctags 来强化自动完成功能，需借助于 autocomplete-plus。<br><a href="https://atom.io/packages/atom-ctags">atom-ctags官方地址</a></p><hr><h4 id="插件-9-autocomplete-python"><a class="header-anchor" href="#插件-9-autocomplete-python">¶</a>插件[9] autocomplete-python</h4><p>Python包、变量、方法、函数声明等自动匹配<br><a href="https://atom.io/packages/autocomplete-python">autocomplete-python官方地址</a></p><hr><h4 id="插件-10-color-picker"><a class="header-anchor" href="#插件-10-color-picker">¶</a>插件[10]  color-picker</h4><p>颜色拾取器，在编辑器里面挑选颜色。通过右键选择 Color picker ，或者 cmd + shift + c/ctrl + alt + c 快捷键调出颜色选择面板。支持 HEX, HEXA, RGB, RGBA, HSL, HSLA 形式指定的颜色值。<br><a href="https://atom.io/packages/color-picker">color-picker官方地址</a></p><hr><h4 id="插件-11-python-tools"><a class="header-anchor" href="#插件-11-python-tools">¶</a>插件[11]  python-tools</h4><p>Python提高生产力的必备工具！！！</p><p>默认快捷键：ctrl+alt+u<br><a href="https://atom.io/packages/python-tools">python-tools官方地址</a></p><hr><h4 id="插件-12-xml-formatter"><a class="header-anchor" href="#插件-12-xml-formatter">¶</a>插件[12]  xml-formatter</h4><p>XML代码格式化工具， 默认快捷键：SHIFT-CTRL-X<br><a href="https://atom.io/packages/xml-formatter">xml-formatter官方地址</a></p><hr><h4 id="插件-13-autocomplete-paths"><a class="header-anchor" href="#插件-13-autocomplete-paths">¶</a>插件[13]  autocomplete-paths</h4><p>自动匹配文件路径工具！<br><a href="https://atom.io/packages/autocomplete-paths">autocomplete-paths官方地址</a></p><hr><h4 id="插件-14-atom-html-preview"><a class="header-anchor" href="#插件-14-atom-html-preview">¶</a>插件[14]  atom-html-preview</h4><p>html文档预览工具， 默认快捷键：CTRL-SHIFT-H<br><a href="https://atom.io/packages/atom-html-preview">atom-html-preview官方地址</a></p><hr><h4 id="插件-15-atom-beautify"><a class="header-anchor" href="#插件-15-atom-beautify">¶</a>插件[15]  atom-beautify</h4><p>格式化代码，更统一的代码风格， 支持HTML, CSS, JavaScript, PHP, Python, Ruby, Java, C, C++, C#, Objective-C, CoffeeScript, TypeScript, and SQL等语言代码！<strong>必备！！！</strong><br><a href="https://atom.io/packages/atom-beautify">atom-beautify官方地址</a></p><h4 id="插件-16-file-icons"><a class="header-anchor" href="#插件-16-file-icons">¶</a>插件[16]  file-icons</h4><p>显示文件类型对应的图标，升级插件后可能需要重启Atom。<br><a href="https://atom.io/packages/file-icons">file-icons官方地址</a></p><hr><h4 id="插件-17-java-importer"><a class="header-anchor" href="#插件-17-java-importer">¶</a>插件[17]  java-importer</h4><p>帮助Java用户自动导入依赖的包。<br><a href="https://atom.io/packages/java-importer">java-importer官方地址</a></p><hr><h4 id="插件-18-jshint"><a class="header-anchor" href="#插件-18-jshint">¶</a>插件[18]    jshint</h4><p>验证你的 JavaScript ，写更专业的 JavaScript 代码。<br><a href="https://atom.io/packages/jshint">jshint官方地址</a></p><hr><h4 id="插件-19-csslint"><a class="header-anchor" href="#插件-19-csslint">¶</a>插件[19]  csslint</h4><p>CSSLint 会报告出不合规定的 CSS 规则！<br><a href="https://atom.io/packages/csslint">csslint官方地址</a></p><hr><h4 id="插件-20-csscomb"><a class="header-anchor" href="#插件-20-csscomb">¶</a>插件[20]  csscomb</h4><p>CSSComb 的一个扩展工具， CSSComb 帮你写出更漂亮的 CSS ！<br><a href="https://atom.io/packages/csscomb">csscomb官方地址</a></p><hr><h4 id="插件-21-autoprefixer"><a class="header-anchor" href="#插件-21-autoprefixer">¶</a>插件[21]  autoprefixer</h4><pre><code>AutoPrefix的一个扩展工具，自动为 CSS 属性添加特定的前缀。</code></pre><p><a href="https://atom.io/packages/autoprefixer">autoprefixer官方地址</a></p><hr><h4 id="插件-22-emmet"><a class="header-anchor" href="#插件-22-emmet">¶</a>插件[22]  emmet</h4><pre><code>手写 HTML 多少显得专业，但是手写的问题在于得大量的代码。Emmet大幅提升手写的效率。非常值得一装。</code></pre><p><a href="https://atom.io/packages/emmet">emmet官方地址</a></p><hr><h4 id="插件-23-vim-mode"><a class="header-anchor" href="#插件-23-vim-mode">¶</a>插件[23]  vim-mode</h4><pre><code>在Atom中使用vim!</code></pre><p><a href="https://atom.io/packages/vim-mode">vim-mode官方地址</a></p><hr><h4 id="插件-24-sync-settings同步Atom"><a class="header-anchor" href="#插件-24-sync-settings同步Atom">¶</a>插件[24]  sync-settings同步Atom</h4><pre><code>安装了这么多的插件，并且这么多的设置，如何备份同步呢？Atom并没有账号支持啊？其实，sync-settings插件可以完成相关工作，非常出色！可以同步Atom的设置文件,自定义快捷键,用户风格,初始化脚本及代码片段,还支持已安装的插件同步</code></pre><p><a href="https://atom.io/packages/sync-settings">sync-settings官方地址</a></p><p><strong>sync-settings 设置方法：</strong></p><p>1: 进入Atom设置中心找到该插件，进去setting；</p><p>2: 打开自己的github创建一个<a href="https://github.com/settings/tokens/new">a new person access token</a> ， 然后复制生成的token序列， 粘贴到sync-settings插件的setting里面；</p><p>3: 再打开github的gist服务，创建一个gist，并复制生成gist id（<strong>注意这个id就是你创建的gist服务对应的URL中除去你的用户名，之后的部分</strong>），也粘贴到sync-settings插件的setting里面<br>4:  配置完毕后， 在文档编辑页面,按下全局命令搜索面板(Ctrl+shift+p)，搜索sync-，会有可选项：</p><ul><li>sync-settings:backup – 这条命令是备份当前的配置</li><li>sync-settings:restore – 这条命令是回复配置,是直接覆盖的;</li><li>sync-settings:view-backup – 这条是当你执行备份后到线上查询你的备份的,也就是到你的gist code里面</li><li>sync-settings:check-backup – 这条是查询最后一次是否正常</li></ul><hr><h3 id="注意"><a class="header-anchor" href="#注意">¶</a>注意</h3><p>1: Atom提供的插件非常多，都来自于Github，遇到问题可以直接在Github上提问；<br>2: 插件更新后，可能会失效，重启是个不错的解决办法 ；<br>3: 推荐几个常用功能，默认已安装：</p><p>1&gt;. ctrl + g: 只要 ctrl + g 后输入行号, 就能跳转到指定的行；<br>2&gt;. ctrl + shift + p: 调出功能详情，如按下快捷键后输入pane命令，查找split列表项，点击后实现分屏功能；<br>3&gt;. Atom-Material这个主题真心不错，是Android material风格。</p><hr><p>@@@@@@@@@@@@@@@@@—END—@@@@@@@@@@@@@@@@@</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Git </tag>
            
            <tag> 编辑器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git+GitHub+Hexo搭建独立博客之综述</title>
      <link href="/2018/06/19/Git-GitHub-Hexo%E6%90%AD%E5%BB%BA%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2%E4%B9%8B%E7%BB%BC%E8%BF%B0/"/>
      <url>/2018/06/19/Git-GitHub-Hexo%E6%90%AD%E5%BB%BA%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2%E4%B9%8B%E7%BB%BC%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>在后博客时代里，我方才接触到博客的玩法。这对于一枚计算机专业的小硕来说：简直了！ 不过还好！</p><p>再来！在后博客时代里，基于内容付费模式的新兴玩法激发了更多原创者们的创作热情。这不，我也来了（自己都笑哭了）。虽然，我仍恬不知耻地在自己整理的Notes后添加了 “赞赏”。</p><p>言归正传。</p><p>在本文中，将会得到如下内容：</p><p>(1). 如何搭建：使用Github Page提供的300M免费空间，以开源博客搭建框架Hexo为骨骼，搭建一个独立的静态博客站点;<br>(2). 如何配色：可以通过配置不同的主题配色，如NexT，Concise，Light等Themes，给自己的博客穿上漂亮的衣服，并拥有良好的手感–也叫"用户体验";<br>(3). 如何配置第三方服务：主要是引入第三方服务，使自己的博客具备"赞赏"、“社区评论”、"站内搜索"等功能服务，来丰满整个博客血肉;<br>(4). 如何优化站点[SEO]：对网站进行SEO优化，有利于提高搜索引擎的收录速度及网页排名，也相应地提高网站的鲁棒性;<br>(5). 如何多PC、多平台同步写博客：将使用版本控制工具Git管理自己的博客，同时很好地解决了多PC、多平台[Linux、Windows、Mac]间协作发文章的功能需求;<br>(6). 同时，还会附上遇到的各种问题的解决方案；也可以在Notes最后留言哦。</p><p>下图为我的博客展示：[是不是有点多此一举的手法？请忍受！]</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/AbsentM_NOTES_SHOW.png" alt="AbsentM's Notes展示"></p><hr><h2 id="需要点亮的技能树"><a class="header-anchor" href="#需要点亮的技能树">¶</a>需要点亮的技能树</h2><ul><li>Git: 基本的用法（add、commit、push），SSH-key的设置等；</li><li>Github的使用: 还没用上的赶紧注册账号吧；</li><li>MarkDown: 大道至简的设计风格，流畅的写作方式，极为精炼的语法，可以很好的写作和排版你的文章内容；</li><li>Hexo: 使用Hexo的简洁语法来完成文章的发布；</li></ul><hr><h2 id="将会用到的工具集"><a class="header-anchor" href="#将会用到的工具集">¶</a>将会用到的工具集</h2><ol><li>nodejs、npm、hexo等基本命令创建一个博客站点；</li><li>评论系统：多说社会化评论组件；</li><li>图床工具：七牛云存储；</li><li>站内搜索：swiftype；</li><li>流量统计：LeanCloud云平台；</li><li>私有项目托管仓库：Code(CSDN出品)；</li><li>能正常使用的邮箱：可能需要注册一堆账号；</li><li>一定的PS技能。</li></ol><p>暂且能想到的就这么多了。说道这里，是不是感觉：整个网站的搭建就是一堆玩意东拼西凑人工合成的？</p><p>没错！</p><blockquote><p>感谢开放的互联网精神，感谢开源社区提供的免费帮助，世界因善良而变得美好！</p></blockquote><hr><p><strong>接下来，我们完成接下来的 1， 2， 3 ------ 4， 5， 6！</strong></p><hr><h2 id="如何建站"><a class="header-anchor" href="#如何建站">¶</a>如何建站</h2><p>需要使用到如下工具：</p><ul><li>Node.js</li><li>git</li></ul><p>详细的建站过程可参见官方文档：<a href="https://hexo.io/zh-cn/docs/">hexo搭建博客之建站官方文档</a></p><hr><h2 id="如何设置主题"><a class="header-anchor" href="#如何设置主题">¶</a>如何设置主题</h2><p>现在，使用最为流行的大概就是 NexT 主题了. 其实，相关的主题有很多，可以在这里挑选一款自己喜欢的主题进行配置：<a href="https://hexo.io/themes/">hexo官方主题</a>．</p><p>我的使用的是 NexT 主题，下面的配置过程基本上就时以此为本了，其他的相关主题的配置类似；</p><p>注意，当我们通过第一步的建站和主题环境配置后，会在建站的相关目录中生成 _config.yml 文件两个，且名称一样．其中，在根目录下的该配置文件是 hexo 的配置文件；在 themes 目录下的该配置文件是主题的配置文件．即，接下来的配置主要是修改这两个配置文件．</p><blockquote><p>精于心，简于形</p></blockquote><p>NexT 主题的配置方法详见官网：<a href="http://theme-next.iissnan.com/getting-started.html">NexT 主题配置官方文档</a> 和 <a href="http://theme-next.iissnan.com/theme-settings.html">详细配置方法</a></p><hr><h2 id="如何配置第三方服务"><a class="header-anchor" href="#如何配置第三方服务">¶</a>如何配置第三方服务</h2><p>这里的第三方服务主要包括：</p><ul><li>社区评论：如多说评论组件，Disqus评论组件</li><li>站内搜索：Swiftype搜索组件</li><li>流量统计：站内流量统计和文章阅读量统计</li><li>音乐服务：网易云音乐外链服务</li></ul><p>具体的配置过程可参看如下链接：</p><ol><li><a href="http://theme-next.iissnan.com/third-party-services.html">官方第三方服务配置文档</a></li><li><a href="https://notes.wanghao.work/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html#%E9%85%8D%E7%BD%AELeanCloud">文章阅读次数配置文档 - 基于 LeanCloud</a></li></ol><hr><h2 id="如何优化站点"><a class="header-anchor" href="#如何优化站点">¶</a>如何优化站点</h2><p>包括：robots.txt，sitemap 和 图床( 因为 github 给的免费空间存储容量有限，大批量的图片不能完全存储在github page 上，可使用图床在需要的图片的地方插入链接即可 )的使用.</p><p>详细的配置文档请参考如下链接：</p><ol><li>优化：<a href="http://www.jeyzhang.com/hexo-website-seo.html">优化站点文档说明</a></li><li>七牛图床：<a href="http://wuxiaolong.me/2014/10/30/qiniu-photo-bed/">七牛云使用文档</a></li></ol><hr><h2 id="使用-Markdown-写博客"><a class="header-anchor" href="#使用-Markdown-写博客">¶</a>使用 Markdown 写博客</h2><p>GitHub page 支持我们使用 Markdown 写文章，这是最赞的功能．可以通过如下命令添加新文章：</p><pre><code>sudo hexo n "---文章的名字---"</code></pre><p>这条命令可以在站点的 <strong>Source/_post/</strong> 目录下生成：＂—文章的名字—＂.md 文章内容．</p><p>之后便可以使用便捷的 Markdown 语法写文章了， Markdown 语法请参看这里: <a href="http://www.appinn.com/markdown/">Markdown 语法说明</a>．</p><p>同时，推荐几款 Markdown 编辑器（使用网页版的很方便）：</p><ol><li>作业部落：<a href="https://www.zybuluo.com">https://www.zybuluo.com</a></li><li>马克飞象：<a href="https://maxiang.io/">https://maxiang.io/</a></li><li>有道云笔记：<a href="http://note.youdao.com/">http://note.youdao.com/</a></li><li>CSDN 的Markdown编辑器等</li></ol><p>当我们完成文章的书写功能后，可通过如下命令发布文章，重新部署站点：</p><pre><code>sudo hexo cleansudo hexo g -d</code></pre><h2 id="如何多PC、多平台同步写博客"><a class="header-anchor" href="#如何多PC、多平台同步写博客">¶</a>如何多PC、多平台同步写博客</h2><p>搭配的博客环境一般在一台电脑上，这样当我们拥有多台电脑想要协同办公的时候，就需要同步自己博客站点的环境配置．使用 Git 是一个进行协同控制的好方法．</p><p>我们可以在 CSDN code平台，或OSChina平台创建一个私有仓库，合并自己建站时从Github上克隆的主题的**.gitignore**文件；</p><p>同时删除站点目录和主题目录下与Git相关的文件和目录，如.git目录，只保留从私有仓库克隆下的git配置文件，如果不删除这些内容的话，这些文件是不能进行版本控制的，我们就不能管理这些配置文件了；</p><p>也即，站点形成了这样的三层目录关系：最外层：私有仓库目录，中间层：站点目录（记得剔除git配置文件），最内层：主题目录（记得剔除主题git相关配置文件）．</p><p>每次完成文章写作后，可以通过如下命令同步博客内容和配置：</p><pre><code>sudo git add .sudo git commit -m "xxxx"sudo git push</code></pre><p>当我们换一台机器写博客的时候，从私有仓库中克隆下来站点的所有内容即可：</p><pre><code>sudo git pull</code></pre><p>如果是在另一台电脑第一次pull，还需要重新搭建一下建站环境．</p><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p><a href="https://gitee.com/absentm/gitRes/raw/master/NotePics/AbsentM_NOTES_SHOW.png">1</a>. <a href="http://www.jeyzhang.com/hexo-github-blog-building.html">http://www.jeyzhang.com/hexo-github-blog-building.html</a><br><a href="https://hexo.io/zh-cn/docs/">2</a>. <a href="https://hexo.io/zh-cn/docs/index.html">https://hexo.io/zh-cn/docs/index.html</a><br><a href="https://hexo.io/themes/">3</a>. <a href="https://github.com/iissnan/hexo-theme-next/wiki">https://github.com/iissnan/hexo-theme-next/wiki</a><br><a href="http://theme-next.iissnan.com/getting-started.html">4</a>. <a href="http://wuxiaolong.me/2014/10/30/qiniu-photo-bed/">http://wuxiaolong.me/2014/10/30/qiniu-photo-bed/</a><br><a href="http://theme-next.iissnan.com/theme-settings.html">5</a>. <a href="http://theme-next.iissnan.com/third-party-services.html">http://theme-next.iissnan.com/third-party-services.html</a></p><hr><p><strong>END</strong></p><hr>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Git </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>写在父亲节</title>
      <link href="/2018/06/19/%E5%86%99%E5%9C%A8%E7%88%B6%E4%BA%B2%E8%8A%82/"/>
      <url>/2018/06/19/%E5%86%99%E5%9C%A8%E7%88%B6%E4%BA%B2%E8%8A%82/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/%E7%88%B8%E7%88%B8%E7%9A%84%E8%8D%89%E9%9E%8B_Illustration.jpeg" alt="Illustration"></p><center>illustration by <a href="https://www.anujink.com/?source=post_page---------------------------">Anuj Shrestha</a> </center><h2 id="爸爸的草鞋"><a class="header-anchor" href="#爸爸的草鞋">¶</a>爸爸的草鞋</h2><p>@陈楚生　Share from NetEase Music</p><hr><blockquote><p>草鞋是船 爸爸是帆<br>奶奶的叮咛载满舱<br>满怀少年十七的梦想<br>充满希望的启航 启航<br></p></blockquote><blockquote><p>船儿行到黄河岸<br>厚厚的黄土堆上船<br>夜来停泊青纱帐<br>天明遥遥山海关<br></p></blockquote><blockquote><p>草鞋是船 爸爸是帆<br>奶奶的叮咛载满舱<br>一股离乡的惆怅噎满腔<br>暮然回首又要启航 启航<br></p></blockquote><blockquote><p>一路跋涉到江南<br>洞庭湖景无瑕看<br>峨眉山下好荒凉<br>不堪回首泪暗弹<br></p></blockquote><blockquote><p>草鞋是船 爸爸是帆<br>故国的叮咛不敢忘<br>强忍无奈小别的悲怆<br>信誓旦旦又将启航 启航<br></p></blockquote><blockquote><p>船儿行到澎湖湾<br>多了妈妈来操桨<br>深情款款撑起疲惫的帆<br>又冲破了许多风浪<br></p></blockquote><blockquote><p>草鞋是船 爸爸是帆<br>远远的故乡在召唤<br>满载半世纪飘泊的沧桑<br>倦航的船儿快来靠港 靠港<br>倦航的船儿快来靠港 靠港<br>倦航的船儿快来靠港 靠港<br></p></blockquote><hr><audio src="/images/chen_bbdcx.mp3" controls="controls" preload="preload" autoplay="autoplay">Your browser does not support the audio element.</audio><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello new world</title>
      <link href="/2018/06/18/hello-new-world/"/>
      <url>/2018/06/18/hello-new-world/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start">¶</a>Quick Start</h2><h3 id="Create-a-new-post"><a class="header-anchor" href="#Create-a-new-post">¶</a>Create a new post</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a class="header-anchor" href="#Run-server">¶</a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a class="header-anchor" href="#Generate-static-files">¶</a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a class="header-anchor" href="#Deploy-to-remote-sites">¶</a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用优盘安装 Windows 系统教程</title>
      <link href="/2018/03/28/%E4%BD%BF%E7%94%A8U%E7%9B%98%E5%AE%89%E8%A3%85windows%E7%B3%BB%E7%BB%9F%E6%95%99%E7%A8%8B/"/>
      <url>/2018/03/28/%E4%BD%BF%E7%94%A8U%E7%9B%98%E5%AE%89%E8%A3%85windows%E7%B3%BB%E7%BB%9F%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>计算机专业的童鞋们大多遇到好多需要帮忙装系统的经历，每次都是不胜其烦。其实，对于但凡有点电脑使用经验的童鞋来说，现在安装或者重装系统，就显得特别简单了。这里做一个稍作详细点的整合教程记录，以后有装系统的差事，就可以分享链接让他们自己学着安装了。</p><p>本教程适用于windows7、windows8及8.1、windows10系列系统的安装，亲测！</p><hr><h2 id="准备工作"><a class="header-anchor" href="#准备工作">¶</a>准备工作</h2><p>1: 一台能上网的电脑</p><p>需要一台完好的且能上网的电脑来帮助我们做接下来的准备工作以及U盘启动的制作。</p><p>2: U盘</p><p>自备啊，需要准备一个4G及以上内存大小的U盘，推荐使用8G大小的，使用前请备份好u盘内资料，因为制作启动盘的过程需要格式化U盘。</p><p>3: windows系统镜像</p><p>在网上下载好所需要安装系统的镜像文件：XXX.iso格式的文件（如：<code>cn_windows_7_ultimate_x64_dvd_x15-66043.iso</code>）。这里给出<strong>MSDN，我告诉你</strong>提供的纯天然的镜像文件地址，推荐到这里下载哦：<a href="http://www.itellyou.cn/">MSDN windows系统镜像文件下载地址</a>。</p><p>4: 老毛桃装机软件<br>百度搜索：<strong>老毛桃</strong>，进入官网下载老毛桃装机软件，附上官网：<a href="http://www.laomaotao.in/">老毛桃官网</a>，下载软件后安装到自己的电脑上，准备以后制作启动盘。</p><p>5: 系统激活工具<br>这个主要是安装的系统大多都是没有激活的，安装系统完成后需要激活系统，这里推荐使用<strong>小马哥的一键激活</strong>，自行百度。</p><hr><h2 id="制作U盘启动盘"><a class="header-anchor" href="#制作U盘启动盘">¶</a>制作U盘启动盘</h2><p>（1）、将准备好的U盘插在能上网的电脑上，双击安装过的老毛桃装机软件，出现如下界面，使用<strong>默认模式</strong>，软件将自动识别到插入的U盘，若未识别，则手动添加U盘。如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-default.png" alt="Windows-install-default"></p><p>（2）、然后点击“一键制作启动U盘”按钮即可，此时会弹出一个警告框，提示将删除u盘中的所有数据。在确认已经将重要数据做好备份的情况下，我们点击“确定”。如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-sure.png" alt="Windows-install-sure"></p><p>（3）、接下来程序开始制作u盘启动盘，整个过程可能需要几分钟，大家在此期间切勿进行其他操作，如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-wait.png" alt="Windows-install-wait"></p><p>（4）、U盘启动盘制作完成后，会弹出一个窗口，询问是否要启动电脑模拟器测试u盘启动情况，我们点击“是（Y）”，如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-mock.png" alt="Windows-install-mock"></p><p>（5）、启动“电脑模拟器”后我们就可以看到u盘启动盘在模拟环境下的正常启动界面了，按下键盘上的“Ctrl+Alt”组合键释放鼠标,最后可以点击右上角的关闭图标退出模拟启动界面，如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-mock.png" alt="Windows-install-mock-q"></p><p>到此为止，老毛桃装机版u盘启动盘制作过程就结束了。之后我们需要将下载好的windowsXXX.iso镜像文件一同拷贝到U盘中，准备一会的系统安装使用。</p><hr><h2 id="运行老毛桃PE系统"><a class="header-anchor" href="#运行老毛桃PE系统">¶</a>运行老毛桃PE系统</h2><p>本部分主要说明如何设置待修电脑BIOS设置U盘为第一启动项，之后进入老毛桃PE系统，进行安装系统说明。</p><h3 id="设置BIOS-U盘为第一启动项"><a class="header-anchor" href="#设置BIOS-U盘为第一启动项">¶</a>设置BIOS U盘为第一启动项</h3><p>（1）、首先将制作好的老毛桃启动U盘插入到待安装系统的电脑上，在开启电脑后按下启动快捷键引导u盘启动，可在BIOS中进行设置，各个不同的主板使用的快捷键不同，常见型号的BIOS快捷键如下链接所示：<a href="http://www.laomaotao.in/softhelp/bios/1032.html">不同电脑启动BIOS快捷键大全</a>。进入boot菜单界面后，通过键盘上的上下方向键将光标移至“Boot Device Priority”选项，按Enter键打开子菜单。如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-bios.png" alt="Windows-install-bios"></p><p>（2）、接着我们只需在子菜单中找到u盘对应的选项，然后通过键盘上的“+”、“-”键将其调节到最上方，作为开机第一启动项即可，并按F10键保存设置。随后会弹出一个窗口，选择“OK”即可。如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-usb.png" alt="Windows-install-usb"></p><p>（3）、完成开机启动设置后重启电脑，便会自动进入到老毛桃主菜单页面。这样我们便可以如愿在电脑上使用老毛桃u盘启动盘解决遇到的问题了。</p><p>本部分可以参考这一链接进行设置：<a href="http://www.laomaotao.in/softhelp/bios/865.html">将u盘启动盘设置为开机首选方法</a>。</p><hr><h3 id="进入老毛桃PE系统"><a class="header-anchor" href="#进入老毛桃PE系统">¶</a>进入老毛桃PE系统</h3><p>（1）、如果以上过程成功的话，就会进入如下老毛桃主菜单界面，进入老毛桃主菜单界面后，将光标移至“【02】运行老毛桃 Win2003PE系统(装机推荐)”后按回车键确认，如下图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-laomaotao.png" alt="Windows-install-laomaotao"></p><hr><h3 id="分区（如果不需要分区操作的可以跳过这一步）"><a class="header-anchor" href="#分区（如果不需要分区操作的可以跳过这一步）">¶</a>分区（如果不需要分区操作的可以跳过这一步）</h3><p>（1）、如果电脑需要重新分区的话，可使用老毛桃PE系统自带的DiskGenius分区工具进行快速分区。进入pe系统桌面后，鼠标左键双击打开DiskGenius分区工具，在工具主窗口中，点击“快速分区”，如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-DiskGenius.png" alt="Windows-install-DiskGenius"></p><p>（2）、随后会弹出快速分区设置窗口，在这里，我们可以设置分区表类型、分区数目以及文件系统大小。完成设置后，点击“确定”按钮即可，如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-diskNums.png" alt="Windows-install-diskNums"></p><p>（3）、接着工具便会进行格式化分区操作，将磁盘按照设置分配成多个文件系统，如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-formatdisks.png" alt="Windows-install-formatdisks"></p><p>（4）、待快速分区操作完成后，通过工具磁盘列表或打开我的电脑，可以发现磁盘分区已经设置好了，如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-finished.png" alt="Windows-install-finished"></p><hr><h3 id="U盘开始安装系统"><a class="header-anchor" href="#U盘开始安装系统">¶</a>U盘开始安装系统</h3><p>（1）、完成以上操作后，双击桌面上的<strong>老毛桃PE一键装机</strong>工具，程序会自动检测硬盘分区中存在符合条件的系统镜像文件并且显示出来以我们供选择，若工具没有识别到您所存放的用于安装系统的镜像文件，则可以通过点击右边的“更多”按钮进入深层目录进行选择，即之前我们下载好的.iso格式文件。如下图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-loadimages.png" alt="Windows-install-loadimages"></p><p>（2）、当选择所准备好的原版win7系统镜像文件后，会出现5个不同的win7版本选择，在此我们选择其中的win7旗舰版进行安装，如有特殊版本喜好，您可以自行选择其他版本。接着我们需要在下方硬盘分区列表当中选择一个硬盘分区做为安装系统时所需要占用的分区，在此我们默认选择下方第一个分区即可。点击确定按钮会进入到下一步操作步骤，我们无需对下方的选项进行任何修改操作，直接点击确定即可执行安装操作。如下图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-rollback.png" alt="Windows-install-rollback"></p><p>（3）、随后工具会先将我们所准备的原版win7系统镜像包解压到特定的分区，待解压工作完成后将自动重启计算机进行后续的系统安装步骤。如下图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-show.png" alt="Windows-install-show"></p><p>（4）、<strong>结束以上步骤后，基本上就使用U盘完成了系统的安装，再次重启电脑，别忘了，把U盘弹出，或者干脆设置BIOS启动项为硬盘启动，这样便可以防止开机自动加载U盘。</strong></p><hr><h3 id="系统激活"><a class="header-anchor" href="#系统激活">¶</a>系统激活</h3><p>安装完系统，下载驱动程序安装或更新驱动程序，然后检查下控制面板系统是否激活？位置在：控制面板\系统和安全\系统；若没有激活自行百度使用小马哥激活工具，激活系统，完成后如下所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Windows-install-active.png" alt="Windows-install-active"></p><hr><p>@@@@@@@@ ---- 那么，到这里，整个系统的安装过程就完成了。 ---- @@@@@@@@</p><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>（1）: <a href="http://www.itellyou.cn/">http://www.itellyou.cn/</a><br>（2）: <a href="http://www.laomaotao.in/">http://www.laomaotao.in/</a><br>（3）: <a href="http://www.laomaotao.in/softhelp/bios/1032.html">http://www.laomaotao.in/softhelp/bios/1032.html</a><br>（4）: <a href="http://www.laomaotao.in/softhelp/bios/865.html">http://www.laomaotao.in/softhelp/bios/865.html</a><br>（5）: <a href="http://www.laomaotao.in/lmtjc/772.html">http://www.laomaotao.in/lmtjc/772.html</a><br>（6）: <a href="http://www.laomaotao.org/jiaocheng/92/upqdzz.html">http://www.laomaotao.org/jiaocheng/92/upqdzz.html</a><br>（7）: <a href="http://www.laomaotao.org/jiaocheng/92/upqdzz.html">http://www.laomaotao.org/jiaocheng/92/upqdzz.html</a><br>（8）: <a href="http://www.laomaotao.org/softhelp/syjc/10.html">http://www.laomaotao.org/softhelp/syjc/10.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 系统安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 14.04 LTS 安装与配置</title>
      <link href="/2018/01/12/Ubuntu-14-04-LTS-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/01/12/Ubuntu-14-04-LTS-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="简记"><a class="header-anchor" href="#简记">¶</a>简记</h2><p>最近项目环境重新移植到阔别1年多的Linux系统上，重新在实验室台式机上安装windows10 + ubuntu 14.04.3双系统，搭建环境。</p><p>下面简单记录一下安装和常用的软件配置，算是个整合吧（个人喜好设置）。</p><hr><h2 id="安装"><a class="header-anchor" href="#安装">¶</a>安装</h2><p>我的双系统安装方式一直没变过，在原有的windwos10上，分出一块未使用的磁盘空间，格式化，删除卷，不分配，大约90G，用于ubuntu系统；</p><p>安装方式（最为快捷）：U盘安装。系统安装方式的快速变革，安装ubuntu已经不是难事，简单记叙一下吧：</p><ol><li><a href="http://Ubuntu.XXX">Ubuntu.XXX</a>…iso 镜像文件下载： <a href="http://www.ubuntu.com/download">Ubuntu官方下载地址</a> ，我使用的是长期支持的14.04 LTS 版本，64位 。</li><li>U盘刻录工具：Universal-USB-Installer-1.9.6.3.exe，下载地址为： <a href="http://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3/#button">Universal-USB-Installer下载地址</a> 。</li><li>U盘烧录镜像文件：详细的烧录方法请移步: <a href="http://www.ubuntu.org.cn/download/desktop/create-a-usb-stick-on-windows">How to create a bootable USB stick on Windows</a>，有图有真相 。</li><li>重启系统，设置BIOS Boot 启动优先级，从优盘启动，各个电脑厂商的按键不同：如Dell 的开机按F2, 联想的开机按F12, 较老的机器按键Del 。</li><li>之后进入安装界面，傻瓜式安装，注意在分区时如果识别到了windows系统，使用推荐方式，如果未识别到则手动分区：分一个交换分区swap(大小内存的2倍)和一个挂在“/”目录下的ext4文件格式的主分区就ok了，可参看这个图文教程：<a href="http://www.bkjia.com/xtzh/760107.html">U盘安装咱中国人自己的操作系统UbuntuKylin14.04LST</a>。</li><li>安装成功了！！！</li></ol><hr><h2 id="配置"><a class="header-anchor" href="#配置">¶</a>配置</h2><p>现在的Ubuntu使用上已经很舒服了，这里整理了一些基本环境配置的安装及使用，比较符合个人的使用习惯，简单记录：</p><h3 id="ubuntu设置相关"><a class="header-anchor" href="#ubuntu设置相关">¶</a>ubuntu设置相关</h3><p>1: 更新源列表： 新安装系统后，在“软件与更新”中找到，软件源设置<strong>从主服务器下载</strong>（默认的中国），更新源列表，也可以在终端键入： <code>sudo apt-get update</code>, 之后更新系统，升级最新的内核：<code>sudo apt-get upgrade</code>, 更新完成重启；</p><p>2: 安装驱动： 在终端，安装基本编译环境：<code>sudo apt-get install apt-get install build-essential</code>, 之后在“软件与更新”中的<strong>附加驱动</strong>选项中，安装推荐驱动，为之后开启3D特效做铺垫， 驱动安装完成后，重启；</p><p>3: 安装vim和git : vim配置和git配置请看上篇博客：<a href="https://absentm.github.io/2021/01/10/%E6%88%91%E7%9A%84vim%E9%85%8D%E7%BD%AE-vimrc%EF%BC%9Agit-github%E7%AE%A1%E7%90%86/">我的Vim配置</a></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install vim </span><br><span class="line"><span class="built_in">sudo</span> apt-get install vim-doc</span><br><span class="line"><span class="built_in">sudo</span> apt-get install vim-script</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ctags</span><br><span class="line"><span class="built_in">sudo</span> apt-get install git    </span><br></pre></td></tr></tbody></table></figure><p>4: 安装oracle JDK:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-software-properties</span><br><span class="line"><span class="built_in">sudo</span> add-apt-repository ppa:webupd8team/java</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"></span><br><span class="line"><span class="string">" Oracle JDK 6(旧版本)</span></span><br><span class="line"><span class="string">sudo apt-get install oracle-java6-installer</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> Oracle JDK 7(较新的稳定版本)</span><br><span class="line"><span class="built_in">sudo</span> apt-get install oracle-java7-installer</span><br><span class="line"></span><br><span class="line"><span class="string">" Oracle JDK 8(最新预览版本)</span></span><br><span class="line"><span class="string">sudo apt-get install oracle-java8-installer</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 设置java</span><br><span class="line"><span class="built_in">sudo</span> update-alternatives --config java</span><br><span class="line">有 2 个候选项可用于替换 java (提供 /usr/bin/java)。</span><br><span class="line"></span><br><span class="line">选择                    路径                          优先级     状态</span><br><span class="line">*0   /usr/lib/jvm/java-7-oracle/jre/bin/java         1072    自动模式</span><br><span class="line">1    /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java  1071    手动模式</span><br><span class="line">2    /usr/lib/jvm/java-7-oracle/jre/bin/java         1072    手动模式</span><br><span class="line">    </span><br><span class="line">要维持当前值[*]请按回车键，或者键入选择的编号：（按了回车，没改）</span><br><span class="line">    </span><br><span class="line"><span class="built_in">sudo</span> update-alternatives --config javac</span><br><span class="line">（同上）</span><br><span class="line">    </span><br><span class="line"><span class="string">" 查看java 和javac版本: java -version; javac -version</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">```  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5: 安装gcc/g++ 或更新gcc/g++（同时解决飞鸽安装出错问题，见下文）: [Ubuntu 14.04 LTS 版升级到 GCC 4.9](http://blog.sina.com.cn/s/blog_54dd80920102vvt6.html)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">``` bash</span></span><br><span class="line"><span class="string">sudo add-apt-repository ppa:ubuntu-toolchain-r/test</span></span><br><span class="line"><span class="string">sudo apt-get update</span></span><br><span class="line"><span class="string">sudo apt-get install gcc-4.9 g++-4.9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(保留原来的4.8.2版本，便于快速切换)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 10 </span></span><br><span class="line"><span class="string">sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 20 </span></span><br><span class="line"><span class="string">sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 10 </span></span><br><span class="line"><span class="string">sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.9 20 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sudo update-alternatives --config gcc</span></span><br><span class="line"><span class="string">有 2 个候选项可用于替换 gcc (提供 /usr/bin/gcc)。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">选择          路径               优先级      状态</span></span><br><span class="line"><span class="string">**0          /usr/bin/gcc-4.9   20        自动模式</span></span><br><span class="line"><span class="string">1            /usr/bin/gcc-4.8   10        手动模式</span></span><br><span class="line"><span class="string">2            /usr/bin/gcc-4.9   20        手动模式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ sudo update-alternatives --config g++</span></span><br><span class="line"><span class="string">有 2 个候选项可用于替换 g++ (提供 /usr/bin/g++)。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">选择          路径                优先级      状态</span></span><br><span class="line"><span class="string">**0          /usr/bin/g++-4.9    20        自动模式</span></span><br><span class="line"><span class="string">1            /usr/bin/g++-4.8    10        手动模式</span></span><br><span class="line"><span class="string">2            /usr/bin/g++-4.9    20        手动模式</span></span><br></pre></td></tr></tbody></table></figure><p>6: 解决安装双系统后系统时间不一致问题</p><blockquote><ul><li>Ubuntu中不使用UTC时间，而启用本地时间:</li><li>编辑<code>/etc/default/rcS</code>，把其中的内容"UTC=yes"改成"UTC=no",保存后重启系统就可以了</li></ul></blockquote><hr><h3 id="常用软件安装"><a class="header-anchor" href="#常用软件安装">¶</a>常用软件安装</h3><p>1: 搜狗输入法：<a href="http://pinyin.sogou.com/linux/?r=pinyin">搜狗输入法Linux下载地址</a>，之后双击安装；</p><blockquote><p>搜狗拼音输入法安装后，可能会发现整个输入法都不能使用了，解决办法如下：<br>1&gt; 在终端输入：<code>im-config</code>,这时会出现一个对话框，点击OK，有一个对话框，点击Yes，你会看到下面的对话框。如果上面是fcitx，就不用管，直接关闭；如果不是，就修改上面的ibus为fcitx.点击OK即可。又会出现一个对话框，接着就是OK，最后重启电脑。<br>2&gt; 之后，在终端中输入：fcitx-config-gtk3出现对话框如下。点击对话框左下角的（+）按钮，弹出另一个对话框如上图所示。然后，取消Only Show Current Language（很重要，否则不能找到刚安装过的搜狗输入法!）最后，在输入框中输入sogou，选中点击OK即可。添加完后将其放置到列表的最下方，注意，是最下方！！！然后默认输入法就是搜狗输入法了。</p></blockquote><p>2: 键鼠共享软件synergy安装； <a href="http://www.veryhuo.com/down/html/90202.html">synergy_1.7.2_for_linux.deb下载地址</a>，之后双击安装，具体设置，之后博客更新；</p><p>3: Latern: <a href="https://github.com/getlantern/lantern">下载地址</a>，双击安装；</p><p>4: 飞鸽传书：<a href="http://www.ipmsg.org.cn/ipmsg/download.html">下载地址</a>，下载后解压，在命令行中:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ chomod +x QIpmsg   <span class="comment"># 设置权限</span></span><br><span class="line">$ ./QIpmsg           <span class="comment"># 运行</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>可能会出错：libc.so.6: version “CXX…” not found, 解决办法：更新gcc版本，如上述步骤5.</p></blockquote><p>5: Flash: <code>$ apt-get install flashplugin-installer</code></p><hr><h3 id="3D特效开启"><a class="header-anchor" href="#3D特效开启">¶</a>3D特效开启</h3><p>Linux的3D特效特别的炫酷，参看文档：<a href="http://www.360doc.com/content/14/0919/22/11681374_410808557.shtml">Ubuntu 14.04 Linux 3D桌面完全教程</a></p><p>我的设置开启少许即可，多了出问题，下面记叙过程和坑：</p><p>1: Docky</p><p>在<strong>Ubuntu软件中心</strong>搜索Docky下载，安装仿Mac任务栏，小而精。微调3D面板，之后长这样的：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Ubuntu-14.04-Docky.png" alt="Ubuntu-14.04-Docky"></p><p>2: compiz</p><p>在<strong>Ubuntu软件中心</strong>搜索compiz安装，安装好后，在屏幕左侧Unity程序启动栏中多了一个“CompziConfig设置管理器”，灰色的“扳手窗口”图标。<br>　　<br><strong>提示：不需要安装Compiz Fusion图标，因为Ubuntu 12.04版没有fusion-icon也一样能完成3D桌面特效的调试工作。</strong></p><p>另外，安装额外的部分：<code>sudo apt-get install compiz-plugins-extra</code></p><p>3: Ubuntu特效设置<br>由于该版本已经自带部分3D特效，我只开了部分比较爆款的特效，设置如下：</p><blockquote><ul><li>ubuntu系统设置 -&gt; 外观 -&gt; 行为 -&gt; 自动隐藏启动器（开启）；</li><li>ubuntu系统设置 -&gt; 外观 -&gt; 行为 -&gt; 显示位置（左上角）</li><li>ubuntu系统设置 -&gt; 外观 -&gt; 行为 -&gt; 开启工作区（4个）</li><li>ubuntu系统设置 -&gt; 外观 -&gt; 行为 -&gt; 显示窗口菜单（在菜单栏），见图：</li></ul></blockquote><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Ubuntu-14.04-settings.png" alt="Ubuntu-14.04-settings"></p><p>4: compiz特效开启（见下图）</p><p>使用自带的工作区，因此在cimpizconfig管理器中就不要使用桌面立方体特效了，后果真的很严重，解决办法见上文的完全教程。</p><p>下面cimpizconfig管理器中设置（只开2处，就很完美了）：</p><ul><li>cimpizconfig管理器 -&gt; 震颤窗口（点选） -&gt; 进入设置映射效果和聚焦效果： 破碎</li><li>cimpizconfig管理器 -&gt; 进入Animations(动画插件默认已开) -&gt; 将close Animation、Minimize Animation、Unanimation、Shade Animation的随机效果全部点选；Focus Animation: 聚焦效果设置为：Dodge(躲闪)，持续时间： 400；</li><li>其他所有的部分保持默认吧。</li><li>设置结束！！！</li></ul><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Ubuntu-14.04-compizconfig1.png" alt="Ubuntu-14.04-compizconfig1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Ubuntu-14.04-compizconfig2.png" alt="Ubuntu-14.04-compizconfig2"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Ubuntu-14.04-compizconfig3.png" alt="Ubuntu-14.04-compizconfig3"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Ubuntu-14.04-workspace.png" alt="Ubuntu-14.04-workspace"></p><hr><h2 id="常见问题及解决方案"><a class="header-anchor" href="#常见问题及解决方案">¶</a>常见问题及解决方案</h2><p>&lt;1&gt;. 报错：E: Sub-process /usr/bin/dpkg returned an error code (1):</p><p>解决办法：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> /var/lib/dpkg/info /var/lib/dpkg/info.bak //现将info文件夹更名</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> /var/lib/dpkg/info //再新建一个新的info文件夹</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br></pre></td></tr></tbody></table></figure><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get -f install xxx</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> /var/lib/dpkg/info/* /var/lib/dpkg/info.bak</span><br></pre></td></tr></tbody></table></figure><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 执行完上一步操作后会在新的info文件夹下生成一些文件，现将这些文件全部移到info.bak文件夹下</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /var/lib/dpkg/info //把自己新建的info文件夹删掉</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> /var/lib/dpkg/info.bak /var/lib/dpkg/info //把以前的info文件夹重新改回名字</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>或 2：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// shell</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> /usr/share/fonts/X11/* /usr/share/fonts/truetype/*</span><br><span class="line"><span class="keyword">do</span> <span class="built_in">sudo</span> <span class="built_in">touch</span> <span class="string">"<span class="variable">$i</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure><p>或 3：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update --fix-missing</span><br><span class="line"><span class="built_in">sudo</span> apt-get autoremove &amp;&amp; <span class="built_in">sudo</span> apt-get clean &amp;&amp; <span class="built_in">sudo</span> apt-get install -f</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="http://www.ubuntu.org.cn">http://www.ubuntu.org.cn</a><br>[2]. <a href="http://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3/#button">http://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3/#button</a><br>[3]. <a href="http://www.ubuntu.org.cn/download/desktop/create-a-usb-stick-on-windows">http://www.ubuntu.org.cn/download/desktop/create-a-usb-stick-on-windows</a><br>[4]. <a href="http://www.bkjia.com/xtzh/760107.html">http://www.bkjia.com/xtzh/760107.html</a><br>[5]. <a href="http://blog.csdn.net/mduanfire/article/details/50492939">http://blog.csdn.net/mduanfire/article/details/50492939</a><br>[6]. <a href="http://blog.sina.com.cn/s/blog_54dd80920102vvt6.html">http://blog.sina.com.cn/s/blog_54dd80920102vvt6.html</a><br>[7]. <a href="http://pinyin.sogou.com/linux/?r=pinyin">http://pinyin.sogou.com/linux/?r=pinyin</a><br>[8]. <a href="http://www.veryhuo.com/down/html/90202.html">http://www.veryhuo.com/down/html/90202.html</a><br>[9]. <a href="https://github.com/getlantern/lantern">https://github.com/getlantern/lantern</a><br>[10]. <a href="http://www.ipmsg.org.cn/ipmsg/download.html">http://www.ipmsg.org.cn/ipmsg/download.html</a><br>[11]. <a href="http://www.360doc.com/content/14/0919/22/11681374_410808557.shtml">http://www.360doc.com/content/14/0919/22/11681374_410808557.shtml</a><br>[12]. <a href="http://yanue.net/post-123.html">http://yanue.net/post-123.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10 Android adb 环境变量配置</title>
      <link href="/2018/01/04/Windows10-Android-adb-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/01/04/Windows10-Android-adb-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h1 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h1><p>2018 新开年，大家都在微信小游戏 『 跳一跳 』 中玩了个痛快。很快这个游戏被开发者玩坏了：<a href="https://github.com/burningcl/wechat_jump_hack">腾讯微信跳一跳破解（目前最高19844分）</a>。</p><p>自己也尝试了一把，真机测试能够达到 『 495 分 』，不想再刷了，附上机器跳一跳第二把的视频：</p><p align="center"><video src="/images/tyt.mp4" width="38%" height="38%" controls="controls">Your browser does not support the video tag.</video></p><blockquote><p>人类还是干不过机器</p></blockquote><p>言归正传，在破解的过程中需要 ADB 调试支持，这里顺手记录一下 Windows 10 环境下 ADB 的环境变量配置过程。</p><h1 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h1><p>本文中的 ADB 使用 Android SDk 中自带的 adb.exe 工具。</p><h1 id="环境变量配置"><a class="header-anchor" href="#环境变量配置">¶</a>环境变量配置</h1><p>在 windows 系统中的配置过程还是挺简单的，需要先知道通常的环境变量配置都在什么位置。具体如下：</p><blockquote><p>控制面板 -&gt; 系统 -&gt; 高级系统设置 -&gt; 系统属性 -&gt; 高级 -&gt; 环境变量</p></blockquote><h2 id="新建系统变量"><a class="header-anchor" href="#新建系统变量">¶</a>新建系统变量</h2><p>在电脑中找到以下两个路径：</p><ol><li>E:\DevEnvironment\android-sdk-windows\platform-tools</li><li>E:\DevEnvironment\android-sdk-windows\tools</li></ol><p><strong>新建变量名:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANDROID_TOOL_HOME</span><br></pre></td></tr></tbody></table></figure><p><strong>变量值:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E:\DevEnvironment\android-sdk-windows\platform-tools;E:\DevEnvironment\android-sdk-windows\tools</span><br></pre></td></tr></tbody></table></figure><p><strong>注意：</strong> 不同的目录间使用 『 ; 』 隔开。</p><h2 id="添加到-Path"><a class="header-anchor" href="#添加到-Path">¶</a>添加到 Path</h2><p>将新建的 『 ANDROID_TOOL_HOME 』 环境变量添加的系统变量的 『 Path 』 中：</p><blockquote><p>%ANDROID_TOOL_HOME%</p></blockquote><p><strong>注意：</strong> 使用 『 ; 』 将 Path 中不同环境变量值隔开。</p><h2 id="测试"><a class="header-anchor" href="#测试">¶</a>测试</h2><p>Win + R 快捷键，输入 『 cmd 』，打开命令提示符后，输入 adb 测试配置是否成功。</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/adb-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95.png" alt="ADB-测试"></p><h1 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h1><p>[1]. <a href="https://jingyan.baidu.com/article/17bd8e52f514d985ab2bb800.html">https://jingyan.baidu.com/article/17bd8e52f514d985ab2bb800.html</a><br>[2]. <a href="https://sspai.com/post/40471">https://sspai.com/post/40471</a></p><h1 id="END"><a class="header-anchor" href="#END">¶</a>END</h1><hr>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> adb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python爬虫程序：电视剧琅琊榜全集的自动化处理</title>
      <link href="/2017/12/05/Python%E7%88%AC%E8%99%AB%E7%A8%8B%E5%BA%8F%EF%BC%9A%E7%94%B5%E8%A7%86%E5%89%A7%E7%90%85%E7%90%8A%E6%A6%9C%E5%85%A8%E9%9B%86%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A4%84%E7%90%86/"/>
      <url>/2017/12/05/Python%E7%88%AC%E8%99%AB%E7%A8%8B%E5%BA%8F%EF%BC%9A%E7%94%B5%E8%A7%86%E5%89%A7%E7%90%85%E7%90%8A%E6%A6%9C%E5%85%A8%E9%9B%86%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="题外话"><a class="header-anchor" href="#题外话">¶</a>题外话</h2><p>电视剧《琅琊榜》的大热期已过，一直没时间看看究竟演的啥？于是，在度娘上找到下载地址，准备细细品味（强迫症！非要下载下来看）。</p><p>附上地址：<a href="http://www.dy2018.com/i/95650.html">琅琊榜高清下载地址</a>，坑，就在整个网页54集的电视剧居然没有给一个“全选”按钮，非得点一个链接才能下载一集。这样的事情，就促成了强迫症做下了接下来的事情…</p><p>这样学习挺有意思的。</p><h2 id="自动化处理的思路"><a class="header-anchor" href="#自动化处理的思路">¶</a>自动化处理的思路</h2><p>查看整个下载地址：<a href="http://www.dy2018.com/i/95650.html">http://www.dy2018.com/i/95650.html</a></p><p>该网页是静态页面，我的目的是使用Python将网页标签中对应的每一集的download链接爬出来，保存在windows剪切板或文本文件中，之后直接把下载链接复制到迅雷或QQ旋风等下来器中，完成下载，这样一看就很简单了, 高手勿喷啊&gt;&gt;。</p><p>下面是详细的过程。</p><h2 id="开发环境"><a class="header-anchor" href="#开发环境">¶</a>开发环境</h2><ol><li>win10 64位， win7以上应该都可以;</li><li>Python 2.7.10_x64;</li><li>IDE: Pycham Community Edition 5.0.1;</li><li>所需要的python库：urllib2、bs4、chardet、python_win32 API等.</li></ol><h2 id="代码描述"><a class="header-anchor" href="#代码描述">¶</a>代码描述</h2><p>代码清单包含：<a href="http://clipBoardUtil.py">clipBoardUtil.py</a>、lybTv_main.py、lybTvSpider_Py2.py、<a href="http://fileRename.py">fileRename.py</a>、lyb_urls.txt 五个文件。</p><p>整个目录结构如下图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Python-spider-code.png" alt="Python-spider-code"></p><hr><p>[1]. 首先创建lybTvSpider_Py2.py文件，获取网页源码进行解析，是功能实现的主要内容。</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lybTvSpider_Py2.py</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># python-version: 2.x</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="keyword">import</span> chardet</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LybTvSpider</span>:</span><br><span class="line">    <span class="string">"琅琊榜电视剧爬虫工具类"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">"构造函数"</span></span><br><span class="line">        <span class="variable language_">self</span>.__headers = (<span class="string">'User-Agent'</span>,</span><br><span class="line">                          <span class="string">'Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.154 Safari/537.36'</span>)</span><br><span class="line">        <span class="variable language_">self</span>.__opener = urllib2.build_opener()</span><br><span class="line">        <span class="variable language_">self</span>.__opener.addheaders = [<span class="variable language_">self</span>.__headers]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">open_url</span>(<span class="params">self, url</span>):</span><br><span class="line">        <span class="string">"指定URL，打开链接地址"</span></span><br><span class="line">        content = <span class="variable language_">self</span>.__opener.<span class="built_in">open</span>(url).read()</span><br><span class="line">        encoding = chardet.detect(content)[<span class="string">'encoding'</span>]</span><br><span class="line">        content = content.decode(encoding, <span class="string">'ignore'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> content</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_tvs</span>(<span class="params">self, content</span>):</span><br><span class="line">        <span class="string">"获取每集电视相关的网页标签, 特征值的获取： &lt;td style='WORD-WRAP: break-word&gt;&lt;a&gt;&lt;/a&gt;&lt;/td&gt;"</span></span><br><span class="line">        soup = bs4.BeautifulSoup(content)</span><br><span class="line">        <span class="comment"># 查找所有的带属性"style='WORD-WRAP: break-word"的'td'标签，</span></span><br><span class="line">        tvs_list = soup.findAll(<span class="string">'td'</span>, style=<span class="string">'WORD-WRAP: break-word'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tvs_list</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_download_url</span>(<span class="params">self, tvs_list</span>):</span><br><span class="line">        <span class="string">"获取每集电视中的下载地址"</span></span><br><span class="line">        tvs_list_url = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> tv <span class="keyword">in</span> tvs_list:  <span class="comment"># 遍历标签</span></span><br><span class="line">            tvs_list_url.append(tv.a[<span class="string">'href'</span>] + <span class="string">"\n"</span>)  <span class="comment"># 获取所有的下载列表添加到list中</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tvs_list_url</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_download_urls</span>(<span class="params">self, tvs_list_url</span>):</span><br><span class="line">        <span class="string">"将下载链接保存至文件"</span></span><br><span class="line"></span><br><span class="line">        fr = file(<span class="string">"lyb_urls.txt"</span>, <span class="string">"w+"</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> tvs_list_url:</span><br><span class="line">            fr.write(item.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">        fr.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main_test</span>():</span><br><span class="line">    <span class="string">"模块测试"</span></span><br><span class="line"></span><br><span class="line">    url = <span class="string">"http://www.dy2018.com/i/95650.html"</span></span><br><span class="line"></span><br><span class="line">    lybTvSpider = LybTvSpider()</span><br><span class="line">    content = lybTvSpider.open_url(url)  <span class="comment"># 获取网页源代码，同在浏览器中右键查看源代码内容一致</span></span><br><span class="line">    <span class="comment"># print content</span></span><br><span class="line"></span><br><span class="line">    tvs = lybTvSpider.get_tvs(content)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">"tvs List---&gt; "</span>, tvs</span><br><span class="line"></span><br><span class="line">    tvs_url = lybTvSpider.get_download_url(tvs)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">"tvs_url ---&gt; "</span>, tvs_url</span><br><span class="line"></span><br><span class="line">    lybTvSpider.save_download_urls(tvs_url)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main_test()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>其中用到的Python类库urllib2、bs4、chardet，可使用PyCham快捷键Alt + Enter, 代码提示后自动安装，这个功能很赞！</strong></p><hr><p>[2]. lybTv_main.py运行主程序：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lybTv_main.py</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># python-version: 2.x</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> lybTvSpider_Py2 <span class="keyword">import</span> LybTvSpider</span><br><span class="line"><span class="keyword">from</span> python27.python35 <span class="keyword">import</span> clipboardUtil</span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://www.dy2018.com/i/95650.html"</span></span><br><span class="line"></span><br><span class="line">lybTvSpider = LybTvSpider()</span><br><span class="line">content = lybTvSpider.open_url(url)  <span class="comment"># 获取网页源代码，同</span></span><br><span class="line">tvs = lybTvSpider.get_tvs(content)</span><br><span class="line">tvs_url = lybTvSpider.get_download_url(tvs)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将下载地址复制到剪切板，之后就可以用下载器批量下载了</span></span><br><span class="line">clipboardUtil.setText(<span class="string">""</span>.join(tvs_url))</span><br><span class="line"><span class="comment"># print str(clipboardUtil.getText()).decode("GBK")</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 同时在文本文件中保存一份下载地址</span></span><br><span class="line">lybTvSpider.save_download_urls(tvs_url)  </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>**说明：**当我们解析到完整的下载地址后并存放到了tvs_url 列表当中，tvs_url 已经格式化了，在每个下载地址后添加了换行符“\n”，这时，我们就可以将下载地址直接保存到windows系统的剪切板中，同时打开迅雷或QQ旋风等下载器将会自动识别windows剪切板中的下载地址，只需点一下下载器的下载按钮就可以开始Downloading了…（代码中为了防止出错，添加了save_download_urls(self, tvs_list_url)函数，可以将所有的下载地址保存在lyb_urls.txt文件中）</p><p>效果图如下：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Python-spider-run.png" alt="Python-spider-run"></p><hr><p>[3]. 使用到clipboardUtil.py代码如下：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clipBoardUtil.py</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># 使用win32 api 操作Windows剪切板</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># import sys</span></span><br><span class="line"><span class="comment"># sys.path.append("/to/path/win32clipboard")</span></span><br><span class="line"><span class="comment"># sys.path.append("/to/path/win32con")</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> win32clipboard <span class="keyword">as</span> w</span><br><span class="line"><span class="keyword">import</span> win32con</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getText</span>():</span><br><span class="line">    <span class="string">"获取windows剪切板内容"</span></span><br><span class="line">    w.OpenClipboard()</span><br><span class="line">    d = w.GetClipboardData(win32con.CF_TEXT)</span><br><span class="line">    w.CloseClipboard()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">setText</span>(<span class="params">aString</span>):</span><br><span class="line">    <span class="string">"设置windows剪切板的内容"</span></span><br><span class="line">    w.OpenClipboard()</span><br><span class="line">    w.EmptyClipboard()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置Unicode编码格式</span></span><br><span class="line">    w.SetClipboardData(win32con.CF_UNICODETEXT, aString)</span><br><span class="line">    w.CloseClipboard()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">"测试程序"</span></span><br><span class="line">    <span class="built_in">print</span> getText()</span><br><span class="line">    setText(<span class="string">"我在剪切板中"</span>)</span><br><span class="line">    <span class="built_in">print</span> getText()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断是否是在直接运行该.py文件</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>Python调用Win32API使用Windows的剪切板功能，win32的Python库需要手动安装一下，下载地址为：</p><p><a href="http://sourceforge.net/projects/pywin32/files/pywin32/%E3%80%82">http://sourceforge.net/projects/pywin32/files/pywin32/。</a></p><p><strong>找到自己对应的版本，由于我使用的是Python2.7.10，因此，下载的win32版本为：/Build 219/目录下的pywin32-219.win-amd64-py2.7.exe版本。注意，安装后PyCham不能立即识别，需重启一下IDE。</strong></p><p>更为具体的win32安装请见博客：<a href="http://blog.sina.com.cn/s/blog_523491650100hevh.html">http://blog.sina.com.cn/s/blog_523491650100hevh.html</a></p><p>&lt;&lt;<strong>至此，程序基本上就搞定了</strong>&gt;&gt;</p><hr><h2 id="剧集重命名"><a class="header-anchor" href="#剧集重命名">¶</a>剧集重命名</h2><pre><code>下载完成后，强迫症又发现默认的剧集名称臭长难视，那就果断改名呗！文件名主要有两类，形如：[电影天堂www.dy2018.com]琅琊榜_21.720p未删减版.mp4 和琅琊榜_20.720p未删减版[电影天堂www.dy2018.com].mp4，目标是变成这样的：琅琊榜_20.mp4。具体描述如下：</code></pre><p>[4]. fileRename.py代码清单：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fileRename.py</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys  <span class="comment"># 设置系统默认编码格式：utf-8</span></span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">renameFiles</span>(<span class="params">dirPath</span>):</span><br><span class="line">    <span class="string">"指定文件目录，重命名该目录下以.mp4结尾的文件"</span></span><br><span class="line">    os.chdir(dirPath)  <span class="comment"># 切换到当前目录下</span></span><br><span class="line">    dirContent = os.listdir(dirPath)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> dirContent:</span><br><span class="line">        <span class="keyword">if</span> file.startswith(<span class="string">"["</span>) <span class="keyword">and</span> file.endswith(<span class="string">'.mp4'</span>):</span><br><span class="line">            temp = file.split(<span class="string">']'</span>)</span><br><span class="line">            content = temp[<span class="number">1</span>].split(<span class="string">"."</span>)</span><br><span class="line">            newName = content[<span class="number">0</span>] + <span class="string">"."</span> + content[<span class="built_in">len</span>(content) - <span class="number">1</span>]</span><br><span class="line">            os.rename(file, newName)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span> file + <span class="string">" -&gt; "</span> + newName + <span class="string">" ------&gt; OK!"</span></span><br><span class="line">        <span class="keyword">elif</span> file.endswith(<span class="string">".mp4"</span>):</span><br><span class="line">            temp = file.split(<span class="string">'.'</span>)</span><br><span class="line">            newName = temp[<span class="number">0</span>] + <span class="string">"."</span> + temp[<span class="built_in">len</span>(temp) - <span class="number">1</span>]</span><br><span class="line">            os.rename(file, newName)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span> file + <span class="string">" -&gt; "</span> + newName + <span class="string">" ------&gt; OK!"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main_test</span>():</span><br><span class="line">    <span class="string">"在当前模块中测试"</span></span><br><span class="line">    renameFiles(<span class="string">"D:\迅雷下载"</span>.encode(<span class="string">'GBK'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main_test()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>最终的效果如下所示（这就清爽多了）：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Python-spider-rename.png" alt="Python-spider-rename"></p><p>最后，附上本爬虫源代码： <a href="https://github.com/absentm/Demo/tree/master/pythonCode/spider/langYaBang_TVs">项目 github 地址</a></p><p>END！</p><hr>]]></content>
      
      
      <categories>
          
          <category> Python Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 网络爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python安装简记</title>
      <link href="/2017/12/02/python%E5%AE%89%E8%A3%85%E7%AE%80%E8%AE%B0/"/>
      <url>/2017/12/02/python%E5%AE%89%E8%A3%85%E7%AE%80%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="简介"><a class="header-anchor" href="#简介">¶</a>简介:</h2><p>本文主要简介python在Windows、Linux(ubuntu、kubuntu)上的安装以及一些简单的设置，适合初学者，高手绕行啊:</p><p>目前，使用Python的主要版本2.7和3.0，这两个版本在语法上的差异还较大，但具体的思想异曲同工。</p><hr><h2 id="Windows平台上的安装"><a class="header-anchor" href="#Windows平台上的安装">¶</a>Windows平台上的安装</h2><p>下载地址：<a href="https://www.python.org/downloads/">Python官方下载地址</a><br>下载主流的版本，下载格式为.exe，下载完成后双击运行，使用默认的安装目录即可。</p><p><strong>注意</strong>，请点选将Add python.exe to Path</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/python2.7.png" alt="python2.7"></p><hr><p><strong>!!! Add python.exe to Path点选will be installed on local hard drive 之后就是傻瓜式的安装过程了</strong></p><hr><h3 id="Pycham-IDE"><a class="header-anchor" href="#Pycham-IDE">¶</a>Pycham IDE</h3><p>Windows平台下推荐使用Pycham IDE完整的Python开发环境。<br>下载地址：<a href="https://www.jetbrains.com/pycharm/download/">Pycham官方下载地址</a></p><p>主要有专业版和社区版，选择社区版下载安装即可。IDE会自动搜索Python的安装环境，之后再安装相应的插件，如：numpy和matplotlib等。</p><p>使用Darcula主题界面，设置字体为Consolas，如下图所示(是不是很炫酷)：<br><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/python2.7_Darcula.png" alt="python2.7_Darcula"></p><hr><h2 id="Linux平台上Python的安装"><a class="header-anchor" href="#Linux平台上Python的安装">¶</a>Linux平台上Python的安装</h2><p>安装Python开发环境，在终端中输入命令：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-dev</span><br></pre></td></tr></tbody></table></figure><p>安装numpy：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-numpy</span><br><span class="line"><span class="built_in">sudo</span> apt-get install python-script</span><br></pre></td></tr></tbody></table></figure><p>安装matplotlib（绘图库）：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-matplotlib</span><br></pre></td></tr></tbody></table></figure><p>安装ipython：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install ipython ipython-notebook </span><br></pre></td></tr></tbody></table></figure><p>以及其他单元测试库：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-pandas python-sympy python-nose</span><br></pre></td></tr></tbody></table></figure><p>安装pip：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-pip python-dev build-essential </span><br><span class="line"><span class="built_in">sudo</span> pip install --upgrade pip </span><br><span class="line"><span class="built_in">sudo</span> pip install --upgrade virtualenv </span><br></pre></td></tr></tbody></table></figure><p>安装python3：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python3</span><br></pre></td></tr></tbody></table></figure><p>安装完成后，在终端中输入python（默认应该是使用2.7的版本， 输入python3则进入Python3版本的环境），可以查看对应的版本。</p><hr>]]></content>
      
      
      <categories>
          
          <category> Python Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Life is around</title>
      <link href="/2017/10/28/Life-is-around/"/>
      <url>/2017/10/28/Life-is-around/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/maowu.png" alt="配图"></p><blockquote><p>八月秋高风怒号，卷我屋上三重茅。<br>茅飞渡江洒江郊，高者挂罥长林梢，下者飘转沉塘坳。<br>南村群童欺我老无力，忍能对面为盗贼，公然抱茅入竹去。<br><br><br>唇焦口燥呼不得，归来倚杖自叹息。<br>俄顷风定云墨色，秋天漠漠向昏黑。<br>布衾多年冷似铁，娇儿恶卧踏里裂。<br>床头屋漏无干处，雨脚如麻未断绝。<br>自经丧乱少睡眠，长夜沾湿何由彻？<br><br><br>安得广厦千万间，大庇天下寒士俱欢颜，风雨不动安如山！<br>呜呼！<br>何时眼前突兀见此屋，吾庐独破受冻死亦足！</p></blockquote><p>绵绵细雨，几丝心绪…</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The note of Firefox+Foxyproxy+Shadowsocks settings</title>
      <link href="/2017/09/23/The-note-of-Firefox-Foxyproxy-Shadowsocks-settings/"/>
      <url>/2017/09/23/The-note-of-Firefox-Foxyproxy-Shadowsocks-settings/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h1 id="Preface"><a class="header-anchor" href="#Preface">¶</a>Preface</h1><p>Recently, my chrome is so slow in power that makes me have to switch for Firefox. so I tend to fill basic chrome plugins into Firefox, such as surfing online in a scientific way.</p><p>In the flowing you can knows:</p><ul><li>how to config Firefox+Foxyproxy+Shadowsocks</li><li>some friendly plugins improve your UX/UE</li></ul><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox1.png" alt="ok"></p><hr><h1 id="Firefox-Foxyproxy-Shadowsocks"><a class="header-anchor" href="#Firefox-Foxyproxy-Shadowsocks">¶</a>Firefox+Foxyproxy+Shadowsocks</h1><p>Before the configure, we should build the environment of <strong>Shadowsocks</strong> and install the plugins <strong>Forxyproxy</strong>;</p><p>in order to understand clearly, the page will give more images to the details.</p><h2 id="Install-Foxyproxy"><a class="header-anchor" href="#Install-Foxyproxy">¶</a>Install Foxyproxy</h2><p>we can get the Foxyproxy plugin in the Firefox Extensions, like the flowing images:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox2.png" alt="find Forxyproxy"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox3.png" alt="install Forxyproxy"></p><h2 id="Config-Proxy-Server"><a class="header-anchor" href="#Config-Proxy-Server">¶</a>Config Proxy Server</h2><p>Now, we can see the orange fox icon at the toolbar, click and config proxy server.</p><p>open the Forxyproxy</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox4.png" alt="click Forxyproxy"></p><p>create a new proxy server</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox5.png" alt="new proxy server"></p><p>named proxy server</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox6.png" alt="named proxy server"></p><p>config proxy server</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox7.png" alt="config proxy server"></p><p>click Subscription Model</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox8.png" alt="Subscription Model"></p><p>fill the Subscription address, options:</p><ul><li><a href="http://firefoxfan.org/gfwlist/gfwlist.txt">http://firefoxfan.org/gfwlist/gfwlist.txt</a></li><li><a href="http://sslite.top/gfwlist/gfwlist.txt">http://sslite.top/gfwlist/gfwlist.txt</a></li></ul><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox9.png" alt="Subscription address"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox10.png" alt="Subscription address"></p><h2 id="launch-open-world"><a class="header-anchor" href="#launch-open-world">¶</a>launch open world</h2><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/firefox11.png" alt="launch"></p><hr><h1 id="Notes"><a class="header-anchor" href="#Notes">¶</a><strong>Notes</strong></h1><ul><li>before brow limited page please open the Shadowsocks</li><li>please keep Shadowsocks port same with your Shadowsocks server</li></ul><hr><p>END</p><hr><hr>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Browser </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于3层for循环优化问题的讨论</title>
      <link href="/2017/08/27/%E5%85%B3%E4%BA%8E3%E5%B1%82for%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98%E7%9A%84%E8%AE%A8%E8%AE%BA/"/>
      <url>/2017/08/27/%E5%85%B3%E4%BA%8E3%E5%B1%82for%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98%E7%9A%84%E8%AE%A8%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h3 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h3><p>同学发来一道面试题，找了一些资料看了看，最终也没得到正确的结果。大致参考了末尾链接1和2的内容，自个分析总结了一下，没有完全解出来，还是先贴出来，请高手过路时顺便解答吧。</p><h3 id="关于如下优化问题讨论"><a class="header-anchor" href="#关于如下优化问题讨论">¶</a>关于如下优化问题讨论</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for (int i = 0; i &lt; 1000; i++) {</span><br><span class="line">    for (int j = 0; j &lt; 100; j++) {</span><br><span class="line">        for (int k = 0; k &lt; 10; k++) {</span><br><span class="line">            function(i, j, k);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="分两种情况讨论："><a class="header-anchor" href="#分两种情况讨论：">¶</a>分两种情况讨论：</h3><ol><li>function(i, j, k)中i, j, k参数不参与function函数体代码执行；</li><li>function(i, j, k)中i, j, k参数作为function函数体代码执行；</li></ol><hr><h4 id="在情况1前提下，3层for循环代码的执行次数如下"><a class="header-anchor" href="#在情况1前提下，3层for循环代码的执行次数如下">¶</a>在<strong>情况1</strong>前提下，3层for循环代码的执行次数如下:</h4><p>int i = 0;   执行 1 次<br>int j = 0;   执行 1 次<br>int k = 0;   执行 1 次</p><p>i &lt; 1000;    执行 1000 次<br>i++;         执行 1000 次</p><p>j &lt; 100;     执行 1000 x 100 次<br>j++;         执行 1000 x 100 次</p><p>k &lt; 10;      执行 1000 x 100 x 10 次<br>k++;         执行 1000 x 100 x 10 次</p><p>function(i, j, k) 执行 1000 x 100 x 10 次</p><p>也即，如参考资料 1 中的叫法<strong>内小外大</strong>，<br>执行次数共： 1+1+1+(1000+1000x100+1000x100x10)x2+1000x100x10=3202003(次)</p><p>此时，由于function函数中i, j, k不参与函数体的运算，对于function函数来说，<br>可按照参考资料 1 中的<strong>内大外小</strong>优化，优化方案如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for (int i = 0; i &lt; 10; i++) {</span><br><span class="line">    for (int j = 0; j &lt; 100; j++) {</span><br><span class="line">        for (int k = 0; k &lt; 1000; k++) {</span><br><span class="line">            function(i, j, k);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>则，此时3层for循环代码的执行次数如下:<br>int i = 0;   执行 1 次<br>int j = 0;   执行 1 次<br>int k = 0;   执行 1 次</p><p>i &lt; 10;      执行 10 次<br>i++;         执行 10 次</p><p>j &lt; 100;     执行 10 x 100 次<br>j++;         执行 10 x 100 次</p><p>k &lt; 1000;    执行 1000 x 100 x 10 次<br>k++;         执行 1000 x 100 x 10 次</p><p>function(i, j, k) 执行 1000 x 100 x 10 次</p><p>也即，如参考资料 1 中的叫法<strong>内大外小</strong>，<br>执行次数共： 1+1+1+(10+10x100+1000x100x10)x2+1000x100x10=3002023(次)</p><p>显然，"内大外小"的方式比"内小外大"的方式代码的执行次数少的多，<br>减少了： 3202003 - 3002023 = 199980(次)</p><p>当然，更加扇脸的是，此种方法，我师妹看过后来了句：</p><blockquote><p>从代码规范角度来说，既然function(i, j, k)跟i, j, k都毛线关系，<br>只想执行N多次function函数体的部分，那弄一个for循环指定次数，一下不就完事了，这又何苦呢？</p></blockquote><p>瞬间，懵逼~~~</p><p>按照这种分析，"内大外小"方式确实优化了不少，但这只是逻辑上的；在具体的测试中，<br>参考资料2中讨论使用时间判断方法（考量代码的执行时间比较），但我的测试结果显示：<br>这种方式不可靠，受JVM和具体平台环境的影响，每次的执行时间不一样且"内小外大"和<br>"内大外小"时间比较并不是总是一个大一个小。</p><hr><h4 id="在情况2前提下-function-i-j-k-中i-j-k参与方法体内运算"><a class="header-anchor" href="#在情况2前提下-function-i-j-k-中i-j-k参与方法体内运算">¶</a>在<strong>情况2</strong>前提下, function(i, j, k)中i, j, k参与方法体内运算</h4><p>那么原题中，此时i的范围为[0, 1000), j的范围为[0, 100), k的范围为[0, 10);<br>若还按照情况1中的优化做法，<strong>完全错误</strong>，两种方案根本不等价。</p><p><strong>情况2</strong> 的优化方案未解…</p><hr><h3 id="参考资料："><a class="header-anchor" href="#参考资料：">¶</a>参考资料：</h3><p>[1] <a href="http://www.debugease.com/j2se/301740.html">http://www.debugease.com/j2se/301740.html</a><br>[2] <a href="http://bbs.csdn.net/topics/350159482">http://bbs.csdn.net/topics/350159482</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>命令行中的手机录屏及转Gif工具</title>
      <link href="/2017/02/13/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E7%9A%84%E6%89%8B%E6%9C%BA%E5%BD%95%E5%B1%8F%E5%8F%8A%E8%BD%ACGif%E5%B7%A5%E5%85%B7/"/>
      <url>/2017/02/13/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E7%9A%84%E6%89%8B%E6%9C%BA%E5%BD%95%E5%B1%8F%E5%8F%8A%E8%BD%ACGif%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="想法"><a class="header-anchor" href="#想法">¶</a>想法</h2><p>最近，一直在找一个 Android 手机屏幕录制软件：像 Gif 动态图一样显示 App 的演示效果。上 Google Play 找了几款免费的软件，悲催的是大多数都是基于 Android 5.0 以上的系统，对于我手中的 4.4 系统 — 然并卵！！！</p><p>试着 Google 了一把，几个 <strong>ADB + Gif</strong> （懂行的你看就明白了） 关键词吸引了我，于是顺着如下两篇文章的指引，我成功了：</p><blockquote><p><a href="https://www.aswifter.com/2015/07/10/android-record-video-to-gif/">https://www.aswifter.com/2015/07/10/android-record-video-to-gif/</a><br><br><br><a href="http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/">http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/</a></p></blockquote><p>自己玩出来的效果是这样的：</p><p><img src="/images/showtime.gif" alt="showtime"></p><hr><h2 id="如何做成的？"><a class="header-anchor" href="#如何做成的？">¶</a>如何做成的？</h2><p>相信看了上文的两篇文章，你已经知道如何使用了，我这里再罗嗦两句。其实，是借助 Android SDK 中自带的 <a href="https://wiki.cyanogenmod.org/w/Doc:_adb_intro/zh-cn">ADB</a> 工具，使用 ADB 命令外加几个命令行的工具转化即可。相关工具如下：</p><ul><li>ADB: Android App 开发的都知道，用它录制手机屏幕演示视频</li><li>ffmpeg: 一个视频操作工具，用它把录制的 mp4 视频转化为 gif</li><li>数据线: 使用 ADB 时, 要跟电脑连接啊</li></ul><p><strong>忘了申明了，我在 Ubuntu 系统下测试的， Win | Mac 用户顺着原理找工具吧。</strong></p><hr><h3 id="制作-Mp4"><a class="header-anchor" href="#制作-Mp4">¶</a>制作 Mp4</h3><p>将手机和电脑保持连接，找到自己的 Android SDK 保存位置，在 SDK/platform-tools/ 目录下找到 ADB 工具，就可以开始敲命令了。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换至 ADB 工具目录下</span></span><br><span class="line"><span class="built_in">cd</span> Android/Sdk/platform-tools/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 ADB Shell 命令, 同时操作手机录制 Mp4，</span></span><br><span class="line"><span class="comment"># 录制完成后，视频被保存在手机 sdcard 下，名为 showtime.mp4</span></span><br><span class="line">./adb shell screenrecord --size 848x480 --bit-rate 2000000 /sdcard/showtime.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 pull 命令将视频拉到电脑本地</span></span><br><span class="line">./adb pull /sdcard/showtime.mp4 /home/dm/gif/</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>注意命令行参数：</strong></p><ul><li>screenrecord: 顾名思义，录屏的</li><li>–size 848x480: 定义视频大小</li><li>–bit-rate 2000000: 修改比特率为 2M/s (默认比特率是 4M/s )</li></ul><p>更多参数解析查 DOC 吧。</p><hr><h3 id="Mp4-转-Gif"><a class="header-anchor" href="#Mp4-转-Gif">¶</a>Mp4 转 Gif</h3><p>制成 Mp4 视频后，转化为 Gif 格式的工具就多了，这里使用 Ubuntu 下强大的 ffmpeg 视频操作库：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 ffmpeg</span></span><br><span class="line"><span class="built_in">sudo</span> add-apt-repository ppa:kirillshkrogalev/ffmpeg-next</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ffmpeg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到Mp4目录下</span></span><br><span class="line"><span class="built_in">cd</span> /home/dm/gif</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mp4 -&gt; gif： -b 2048k 转化为高质量gif</span></span><br><span class="line">ffmpeg -i showtime.mp4 -b 2048k showtime.gif</span><br></pre></td></tr></tbody></table></figure><p>ffmpeg 命令参数请看参考资料2吧，很详细。</p><hr><h2 id="另外"><a class="header-anchor" href="#另外">¶</a>另外</h2><p>有时，我们可能需要将几张图片合成为一个 gif，这里再介绍一个搞定这个需求的方法：</p><blockquote><p><a href="http://blog.csdn.net/liuxiabing150/article/details/45872783">convert</a></p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 convert</span></span><br><span class="line"><span class="built_in">sudo</span>  apt-get install imagemagick</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换的图片目录下</span></span><br><span class="line"><span class="built_in">cd</span> /home/dm/pic/</span><br><span class="line"></span><br><span class="line"><span class="comment"># *.png -&gt; gif</span></span><br><span class="line">convert -delay 100 *.png test.gif</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1] <a href="https://www.aswifter.com/2015/07/10/android-record-video-to-gif/">https://www.aswifter.com/2015/07/10/android-record-video-to-gif/</a><br>[2] <a href="http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/">http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/</a></p><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2><hr>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Terminal </tag>
            
            <tag> gif </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android studio 安装过程中的问题整理</title>
      <link href="/2017/02/03/Android-studio-%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E6%95%B4%E7%90%86/"/>
      <url>/2017/02/03/Android-studio-%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="JDK的安装-Ubuntu-版本-："><a class="header-anchor" href="#JDK的安装-Ubuntu-版本-：">¶</a>JDK的安装(Ubuntu 版本)：</h2><p>使用oracle jdk7以上的版本，使用apt-get方式安装，安装方法见上篇Blog</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> add-apt-repository ppa:webupd8team/java</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install oracle-java7-installer</span><br><span class="line">或</span><br><span class="line"><span class="built_in">sudo</span> apt-get install oracle-java8-installer</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="JDK的安装-Windows-版本-："><a class="header-anchor" href="#JDK的安装-Windows-版本-：">¶</a>JDK的安装(Windows 版本)：</h2><p>1: 下载java jdk:  <a href="http://www.oracle.com/technetwork/java/javase/downloads/index-jsp-138363.html">jdk-8 下载地址</a>；<br>2: 傻瓜式安装后，设置环境变量；<br>3: 依次点开：控制面板 -&gt; 系统和安全 -&gt; 系统 -&gt; 高级系统设置 -&gt; 环境变量，在 <em><strong>系统变量</strong></em> 中添加如下java 环境变量：</p><h3 id="Java环境变量设置"><a class="header-anchor" href="#Java环境变量设置">¶</a>Java环境变量设置</h3><p>1: 新建:</p><p>变量名：<code>JAVA_HOME</code>;<br>变量值： <code>C:\Program Files\Java\jdk1.8.0_91</code>（即，JDK的安装目录），如图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/STUDIO-%E6%96%B0%E5%BB%BAJAVA_HOME%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="STUDIO-新建JAVA_HOME环境变量"></p><p>2: 新建：<br>变量名：CLASSPATH；<br>变量值：<code>.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jar;</code>（注意前方的“ . ” 英文格式），如图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/STUDIO-%E6%96%B0%E5%BB%BACLASSPATH%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="STUDIO-新建CLASSPATH环境变量"></p><p>3: 在Path环境变量的末尾中添加： <code>;%JAVA_HOME%\bin ;%JAVA_HOME%\jre\bin</code> （注意最前边个的“ ; ” 英文分号），如图:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/STUDIO-Path%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE.png" alt="STUDIO-Path环境变量的设置"></p><p>4: 测试jdk的安装：win + R -&gt; cmd -&gt; 打开命令提示符，键入如下代码：<code>java</code> 和 <code>javac</code> 来测试是否成功，若成功，如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/STUDIO-java%E5%91%BD%E4%BB%A4%E6%B5%8B%E8%AF%95%E6%95%88%E6%9E%9C.png" alt="STUDIO-java命令测试效果"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/STUDIO-javac%E5%91%BD%E4%BB%A4%E6%B5%8B%E8%AF%95%E6%95%88%E6%9E%9C.png" alt="STUDIO-javac命令测试效果"></p><hr><h2 id="首次进入Android-studio，国内被墙："><a class="header-anchor" href="#首次进入Android-studio，国内被墙：">¶</a>首次进入Android studio，国内被墙：</h2><ul><li>单独下载 sdk</li><li>android-studio/bin/ -&gt; idea.properties文件，加上：<code>disable.android.first.run=true</code>，保证第一次可进入</li><li>修改Hosts: <code>$ sudo vim /etc/hosts</code> , 添加如下列表（Windows同样可以修改Hosts文件如下， 位置为：<code>C:\Windows\System32\drivers\etc</code>）：</li></ul><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">203.208.46.146 www.google.com</span><br><span class="line">74.125.113.121 developer.android.com</span><br><span class="line">203.208.46.146 dl.google.com</span><br><span class="line">203.208.46.146 dl-ssl.google.com</span><br></pre></td></tr></tbody></table></figure><p>重启网络：<code>$ /etc/init.d/networking restart</code></p><ul><li>在单独下载的sdk中，如：android-sdk-linux/tool/文件夹下执行：./android 打开sdk manager;</li><li>设置sdk manager的optionxuanxiang选项为（windows同样适用）：<br>在「HTTP Proxy Server」和「HTTP Proxy Port」输入框内填入<strong>mirrors.neusoft.edu.cn和80</strong>，并且选中「Force https://… sources to be fetched using http://…」复选框。设置完成后单击「Close」按钮关闭『Android SDK Manager - Settings』，下载速度嗖嗖的！效果图如下：</li></ul><hr><h2 id="模拟器Genymotion的安装："><a class="header-anchor" href="#模拟器Genymotion的安装：">¶</a>模拟器Genymotion的安装：</h2><ul><li>安装VirtualBox虚拟机：<code>$ sudo apt-get install virtualbox</code></li><li>下载Genymotion模拟器添加权限：<code>$ chmod +x genymotion.XXXXX.bin</code></li><li>执行安装：<code>$ ./genymotion.XXXXX.bin</code></li><li>注意：<strong>创建android模拟器后可能打不开，设置BIOS开启虚拟化功能，开机进入BIOS -&gt; Virtualization -&gt; enabled</strong>，各个主板可能不同</li></ul><hr><h2 id="快捷键设置"><a class="header-anchor" href="#快捷键设置">¶</a>快捷键设置</h2><ol><li>java类注释：Fix doc comment -&gt; “Alt + Shift + j”；</li><li>自动匹配：Basic -&gt; “Alt + /“；</li><li>格式化代码：Reformat code -&gt; “Ctrl + Shift + F”；</li><li>驼峰选择：Editor | General | Smart Keys | Use “CamelHumps” words；</li><li>如果你仍然希望当鼠标在单词上双击之后选中整个单词，需要作如下设置：Editor | General | 取消选中‘Honor Camel Humps words settings when selecting on double click’；</li><li>命名前缀：Editor | Code Style | Java | Code Generation， 给普通Field 添加一个’m’前缀，给Static filed 添加一个’s’前缀；</li><li>快速导包：Editor | General | Auto Import，勾选Optimize imports on the fly，勾选Add unambiguous imports on the fly；</li><li>插件: Markdown, .gitignore, minimap(CodeGlance)；</li><li>Http Proxy: Plugins | HTTP Proxy Settings | Manual proxy configuration | HTTP | HostName: 127.0.0.1 | Port: 1080 | No proxy for: 127.0.0.1 。</li><li>多行同时编辑：修改 Edit -&gt; Find -&gt; “Add Selection for Next Occurrence” 的默认快捷键 “Alt+J” 为 “Ctrl + D” [与 sublime text 编辑器保持同步]</li><li>设置每行显示字符个数限制：设置 File -&gt;  Settings  -&gt;  Code Style -&gt; Right margin (columns) 的值为 80</li></ol><p>详细配置参见：<br><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0411/4131.html">http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0411/4131.html</a></p><hr><h2 id="AS-Gradle-Build-Running-卡顿、慢等问题"><a class="header-anchor" href="#AS-Gradle-Build-Running-卡顿、慢等问题">¶</a>AS Gradle Build Running 卡顿、慢等问题</h2><p>主要是因为缺少相关的32位依赖库, 可通过一下方法解决: 终端输入以下命令, 安装完成后, 重启as即可。</p><p>sudo dpkg --add-architecture i386<br>sudo apt-get update<br>sudo apt-get install libncurses5:i386 libstdc++6:i386 zlib1g:i386</p><p>&lt;1&gt;. 加快Gradle编译速度</p><p>在下面的目录下面创建gradle.properties文件：</p><ul><li>Linux:    /home/<username>/.gradle/</username></li><li>Mac：     /Users/<username>/.gradle/</username></li><li>Windows： C:\Users&lt;username&gt;.gradle</li></ul><p>添加如下几行：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 开启gradle单独的守护进程</span><br><span class="line">org.gradle.daemon=true      </span><br><span class="line"></span><br><span class="line"># 调大JVM参数</span><br><span class="line">org.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</span><br><span class="line"></span><br><span class="line"># 平行运行</span><br><span class="line">org.gradle.parallel=true</span><br><span class="line"></span><br><span class="line"># Enables new incubating mode that makes Gradle selective when configuring projects.</span><br><span class="line">org.gradle.configureondemand=true   </span><br></pre></td></tr></tbody></table></figure><p>&lt;2&gt;. 修改android studio配置(看图配置)</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/as1.png" alt="配置1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/as2.png" alt="配置2"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/as3.png" alt="配置3"></p><p><strong>详细说明，请参看参考资料[3],[4].</strong></p><hr><h2 id="check-for-update无法更新问题解决办法"><a class="header-anchor" href="#check-for-update无法更新问题解决办法">¶</a>check for update无法更新问题解决办法</h2><p>当点击check for update的时候遇到了如下问题：Connection failed (connect timed out). Please check network connection and try again.</p><p><strong>解决办法</strong>:</p><p>修改 \Android Studio\bin 下的文件 studio.exe.vmoptions(linux系统为: studio.vmoptions) 和 studio64.exe.vmoptions(linux系统为: studio64.vmoptions)文件,  添加如下内容重启 Android Studio 即可:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-Djava.net.preferIPv4Stack=true</span><br><span class="line"></span><br><span class="line">-Didea.updates.url=http://dl.google.com/android/studio/patches/updates.xml</span><br><span class="line"></span><br><span class="line">-Didea.patches.url=http://dl.google.com/android/studio/patches/</span><br></pre></td></tr></tbody></table></figure><p>配置好了之后，android studio还是与之前一样不能更新！</p><p>因为之前为了要让sdk更新而修改了系统的hosts文件，把hosts文件的内容改回来就可以更新了, 即注释掉之前添加的行。修改完后, 注意重启一下网络啊:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/networking restart # ubuntu下</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>之后便可以更新了! 瞅瞅!</p><hr><h2 id="参考资源"><a class="header-anchor" href="#参考资源">¶</a>参考资源</h2><p>[1]. <a href="http://blog.csdn.net/double2hao/article/details/49582585">http://blog.csdn.net/double2hao/article/details/49582585</a><br>[2]. <a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0411/4131.html">http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0411/4131.html</a><br>[3]. <a href="http://www.jianshu.com/p/2a58fd896214">http://www.jianshu.com/p/2a58fd896214</a><br>[4]. <a href="http://blog.isming.me/2015/03/18/android-build-speed-up/">http://blog.isming.me/2015/03/18/android-build-speed-up/</a></p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Android Studio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>In me, past, present, future meet</title>
      <link href="/2016/12/30/In-me-past-present-future-meet/"/>
      <url>/2016/12/30/In-me-past-present-future-meet/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/2016-end.jpg" alt="2016-end"></p><p>岁末，丁酉如约而至；于实验室，偏安一隅，忽然想起了这首诗来：</p><blockquote><p>In me, past, present, future meet<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;– Siegfried Sassoon<br></p></blockquote><blockquote><p>To hold long chiding conference.<br><br>My lusts usurp the present tense<br><br>And strangle Reason in his seat.<br><br>My loves leap through the future’s fence<br><br>To dance with dream-enfranchised feet.<br></p></blockquote><blockquote><p>In me the cave-man clasps the seer,<br>And garlanded Apollo goes<br><br>Chanting to Abraham’s deaf ear.<br><br>In me the tiger sniffs the rose.<br><br>Look in my heart, kind friends, and tremble,<br><br>Since there your elements assemble.<br></p></blockquote><p>翻译过来，是这样的：</p><blockquote><p>于我，过去，现在以及未来<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;– [英] 西格夫里·萨松（余光中 译）<br></p></blockquote><blockquote><p>商谈着，各执一词，纷纷扰扰<br><br>林林总总的欲望，掠取着我的现在<br><br>将理性扼杀于它的宝座<br><br>我的爱情纷纷越过未来的藩篱<br><br>梦想解放出双脚，舞蹈着<br></p></blockquote><blockquote><p>于我，穴居者攫取了先知<br>佩带花环的阿波罗<br><br>向亚伯拉罕的聋耳边吟唱<br><br>我心里有猛虎在细嗅着蔷薇<br><br>审视我的心灵吧，亲爱的朋友，你应战栗<br><br>因为那里才是你本来的面目<br></p></blockquote><p>好一句 “心有猛虎，细嗅蔷薇”<br><br>有人缀后一句 “盛宴之后，泪流满面”<br><br>却别有一翻滋味<br></p><p>岁尾，回首往昔之事，心中难免多了点平静和淡然<br><br>写下这些文字，记录我匆匆地 2016</p><p>对于明天 - 2017<br><br>我很期待，希望它是这个样子：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/2017-github.jpg" alt="2017-begin"></p><p>这一年，时间走得急了些，好多还没来得及告别<br><br>这一年，过得不易，还好一切都已过去，最后只剩一句：<br></p><blockquote><p>2016，莎呦娜啦 <br></p></blockquote><blockquote><p>Hi, 2017</p></blockquote><!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=167670&auto=0&height=66"></iframe> --><audio src="/images/xin_synl.mp3" controls="controls" preload="preload" autoplay="autoplay">Your browser does not support the audio element.</audio><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 2016.12.30 于实验室跨年夜前夕<hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android RecyclerView Demo</title>
      <link href="/2016/11/21/Android-RecyclerView-Demo/"/>
      <url>/2016/11/21/Android-RecyclerView-Demo/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="想法"><a class="header-anchor" href="#想法">¶</a>想法</h2><p>RecyclerView 出来已经有好长时间了, 在自己的项目中却一直没有使用 … 这几天查阅了相关资料, 一步步地 check 着这个熟悉而又陌生的家伙, 自此爱不释手。</p><p>官方是这样介绍的:</p><blockquote><p>RecyclerView is a more advanced and flexible version of ListView. This widget is a container for large sets of views that can be recycled and scrolled very efficiently. Use the RecyclerView widget when you have lists with elements that change dynamically.</p></blockquote><p>写了一个 Demo, 包涵了如下功能, 下文也将依次以此展开 (适合新手, 大神绕道)：</p><ol><li>RecyclerView 控件的基本用法 ;</li><li>item 的 Click, LongClick 事件处理 ;</li><li>同一样式的 Item 不同布局的展示 ;</li><li>Item 控件的状态变化处理, 如阅读痕迹等 …</li></ol><p>写着写着, 大致有了如此模样:</p><figure class="third">    <img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/RecyclerView-Demo-1.jpg" height="400" width="240">    <img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/RecyclerView-Demo-2.png" height="400" width="240">    <img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/RecyclerView-Demo-3-new.png" height="400" width="240"></figure><figure class="third">    <img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/RecyclerView-Demo-4.png" height="400" width="240">    <img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/RecyclerView-Demo-5.png" height="400" width="240">    <img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/RecyclerView-Demo-6.png" height="400" width="240"></figure><br>**Demo 代码放在了这里:**https://github.com/absentm/Demo**Apk 下载地址:**https://github.com/absentm/Demo/blob/master/apk/RecyclerViewDemo.apk<hr><h2 id="基本使用"><a class="header-anchor" href="#基本使用">¶</a>基本使用</h2><h3 id="添加包引用"><a class="header-anchor" href="#添加包引用">¶</a>添加包引用</h3><p>在 Gradle 文件中添加 recyclerview 的包引用, cardview 也顺便加上吧:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile 'com.android.support:recyclerview-v7:24.+'</span><br><span class="line">compile 'com.android.support:cardview-v7:24.+'</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="XML-中定义"><a class="header-anchor" href="#XML-中定义">¶</a>XML 中定义</h3><p>这个很基本了, 长这样就 ok :</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.v7.widget.RecyclerView</span><br><span class="line">    android:id="@+id/recyclerview"</span><br><span class="line">    android:layout_width="match_parent"</span><br><span class="line">    android:layout_height="match_parent" /&gt;</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Activity-中初始化"><a class="header-anchor" href="#Activity-中初始化">¶</a>Activity 中初始化</h3><p>在 Activity 中需要查找 id , 初始化布局管理器（LayoutManager）, 设置Adapter等, 大致如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mRecyclerView = (RecyclerView) findViewById(R.id.recyclerview);</span><br><span class="line">mMainPagesAdapter = new MainPagesAdapter(MainActivity.this, mDatas);</span><br><span class="line">mLayoutManager = new LinearLayoutManager(MainActivity.this, LinearLayoutManager.VERTICAL, false);</span><br><span class="line"></span><br><span class="line">mRecyclerView.setAdapter(mMainPagesAdapter);</span><br><span class="line">mRecyclerView.setLayoutManager(mLayoutManager);</span><br><span class="line">mRecyclerView.setItemAnimator(new DefaultItemAnimator());//默认动画</span><br><span class="line">mRecyclerView.setHasFixedSize(true);//效率最高</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="Adapter-构造适配器"><a class="header-anchor" href="#Adapter-构造适配器">¶</a>Adapter 构造适配器</h3><p>到这里, 当和 ListView 做对比时, 可以发现 RecyclerView 似乎是在强制开发者使用 ListView 的 ViewHolder 模式, Adapter 的代码如下:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">import android.content.Context;</span><br><span class="line">import android.graphics.Color;</span><br><span class="line">import android.support.v7.widget.RecyclerView;</span><br><span class="line">import android.view.LayoutInflater;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.ViewGroup;</span><br><span class="line">import android.widget.ImageView;</span><br><span class="line">import android.widget.TextView;</span><br><span class="line"></span><br><span class="line">import com.bumptech.glide.Glide;</span><br><span class="line">import com.bumptech.glide.load.engine.DiskCacheStrategy;</span><br><span class="line">import com.dm.recyclerviewdemo.R;</span><br><span class="line">import com.dm.recyclerviewdemo.beans.NewsBean;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * MainPagesAdapter</span><br><span class="line"> * Created by dm on 16-11-17.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class MainPagesAdapter</span><br><span class="line">        extends RecyclerView.Adapter&lt;MainPagesAdapter.ItemContentHolder&gt;</span><br><span class="line">        implements View.OnClickListener, View.OnLongClickListener {</span><br><span class="line"></span><br><span class="line">    private Context context;</span><br><span class="line">    private List&lt;NewsBean&gt; mDatas;</span><br><span class="line"></span><br><span class="line">    public MainPagesAdapter(Context context, List&lt;NewsBean&gt; datas) {</span><br><span class="line">        this.context = context;</span><br><span class="line">        mDatas = datas;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public ItemContentHolder onCreateViewHolder(ViewGroup parent, int viewType) {</span><br><span class="line">        View view = LayoutInflater.from(context).inflate(R.layout.main_news_item, parent, false);</span><br><span class="line"></span><br><span class="line">        MainPagesAdapter.ItemContentHolder viewHolder = new MainPagesAdapter.ItemContentHolder(view);</span><br><span class="line">        return viewHolder;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onBindViewHolder(ItemContentHolder holder, int position) {</span><br><span class="line">        // 使用Glide图片缓存框架加载图</span><br><span class="line">        Glide.with(context)</span><br><span class="line">                .load(mDatas.get(position).getPicUrl())</span><br><span class="line">                .error(R.drawable.icon)</span><br><span class="line">                .diskCacheStrategy(DiskCacheStrategy.ALL)</span><br><span class="line">                .crossFade()</span><br><span class="line">                .centerCrop()</span><br><span class="line">                .into(holder.newsItemImv);</span><br><span class="line">        holder.newsItemTitleTv.setText(mDatas.get(position).getTitle());</span><br><span class="line">        holder.newsItemTimeTv.setText(mDatas.get(position).getCtime());</span><br><span class="line"></span><br><span class="line">        // 将数据保存在itemView的Tag中，以便点击时进行获取</span><br><span class="line">        holder.itemView.setTag(mDatas.get(position));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int getItemCount() {</span><br><span class="line">        return mDatas == null ? 0 : mDatas.size();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static class ItemContentHolder extends RecyclerView.ViewHolder {</span><br><span class="line">        ImageView newsItemImv;</span><br><span class="line">        TextView newsItemTitleTv;</span><br><span class="line">        TextView newsItemTimeTv;</span><br><span class="line"></span><br><span class="line">        public ItemContentHolder(View itemView) {</span><br><span class="line">            super(itemView);</span><br><span class="line">            newsItemImv = (ImageView) itemView.findViewById(R.id.main_item_image_imv);</span><br><span class="line">            newsItemTitleTv = (TextView) itemView.findViewById(R.id.main_item_title_tv);</span><br><span class="line">            newsItemTimeTv = (TextView) itemView.findViewById(R.id.main_item_time_tv);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="数据源-mDatas"><a class="header-anchor" href="#数据源-mDatas">¶</a>数据源 mDatas</h3><p>完成了以上操作, 还需要加载我们的数据。 Demo 的数据来自 <a href="http://apistore.baidu.com/apiworks/servicedetail/768.html">ApiStore 的娱乐新闻</a> , 请求网络后返回 Json 格式数据。所以, 需要进行Json数据解析。</p><p>本文使用 Thread + Handler + Gson 技术进行网络数据加载和解析, 该技术的使用方法可参看我的这些文章:</p><blockquote><p><a href="https://absentm.github.io/2015/03/24/Java%E4%B8%ADGson%E7%9A%84%E4%BD%BF%E7%94%A8/">Java中Gson的使用</a><br><br><a href="https://absentm.github.io/2015/03/28/Java%E4%B8%AD%E4%BD%BF%E7%94%A8Gson%E8%A7%A3%E6%9E%90json%E6%95%B0%E6%8D%AE/">Java中使用Gson解析json数据</a><br><br><a href="https://absentm.github.io/2015/04/20/Android-%E4%BD%BF%E7%94%A8Thread-Handler%E5%AE%9E%E7%8E%B0%E9%9D%9EUI%E7%BA%BF%E7%A8%8B%E6%9B%B4%E6%96%B0UI%E7%95%8C%E9%9D%A2/">Android 使用Thread+Handler实现非UI线程更新UI界面</a></p></blockquote><p>数据加载和填充的核心代码如下:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">// 发送网络请求, 获取数据</span><br><span class="line">isConnect = SystemUtils.checkNetworkConnection(MainActivity.this);</span><br><span class="line">if (isConnect) {</span><br><span class="line">    new Thread(new Runnable() {</span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            String newsDatas = SystemUtils.getNewsJsonStr();</span><br><span class="line">            Log.i(TAG, "newsDatas &gt;&gt;&gt; " + newsDatas);</span><br><span class="line">            if (!newsDatas.equals("")) {</span><br><span class="line">                Message message = mHandler.obtainMessage();</span><br><span class="line">                message.obj = newsDatas;</span><br><span class="line">                mHandler.sendMessage(message);</span><br><span class="line">            } else {</span><br><span class="line">                mProgressBar.setVisibility(View.GONE);</span><br><span class="line">                Snackbar.make(mCoordinatorLayout, "数据加载出错 !!!",</span><br><span class="line">                        Snackbar.LENGTH_LONG).setAction("Action", null).show();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }).start();</span><br><span class="line">} else {</span><br><span class="line">    Snackbar.make(mCoordinatorLayout, "No NetWork !!!",</span><br><span class="line">            Snackbar.LENGTH_LONG).setAction("Action", null).show();</span><br><span class="line">    mProgressBar.setVisibility(View.GONE);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 解析数据, 填充到控件上</span><br><span class="line">private Handler mHandler = new Handler() {</span><br><span class="line">    @Override</span><br><span class="line">    public void handleMessage(Message msg) {</span><br><span class="line">        String newsJsonStr = msg.obj.toString();</span><br><span class="line">        Log.d("FindVideoAty", " Json: " + newsJsonStr);</span><br><span class="line"></span><br><span class="line">        Gson gson = new Gson();</span><br><span class="line">        NewsInfosBean newsInfosBean = gson.fromJson(newsJsonStr, NewsInfosBean.class);</span><br><span class="line">        if (newsInfosBean.getCode() == 200) {</span><br><span class="line">            mDatas = newsInfosBean.getNewslist();</span><br><span class="line"></span><br><span class="line">            MainPagesAdapter.layoutFlag = 0;</span><br><span class="line">            mMainPagesAdapter = new MainPagesAdapter(MainActivity.this, mDatas);</span><br><span class="line">            mLayoutManager = new LinearLayoutManager(MainActivity.this,</span><br><span class="line">                    LinearLayoutManager.VERTICAL, false);</span><br><span class="line">            mRecyclerView.setAdapter(mMainPagesAdapter);</span><br><span class="line">            mRecyclerView.setLayoutManager(mLayoutManager);</span><br><span class="line">            mRecyclerView.setItemAnimator(new DefaultItemAnimator());//默认动画</span><br><span class="line">            mRecyclerView.setHasFixedSize(true);//效率最高</span><br><span class="line"></span><br><span class="line">            mMainPagesAdapter.setOnItemClickListener(MainActivity.this);</span><br><span class="line">            mMainPagesAdapter.setOnItemLongClickListener(MainActivity.this);</span><br><span class="line">        } else {</span><br><span class="line">            Snackbar.make(mCoordinatorLayout, "数据加载出错 !!!",</span><br><span class="line">                    Snackbar.LENGTH_LONG).setAction("Action", null).show();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        mProgressBar.setVisibility(View.GONE);</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Click-事件监听"><a class="header-anchor" href="#Click-事件监听">¶</a>Click 事件监听</h2><p>以上基本上是 RecyclerView 的用法过程了, 但是 Google 却没有没给我们提供相应 Item 的点击事件处理, 我们需要自己改写自己的Adapter实现:</p><h3 id="修改-Adapter"><a class="header-anchor" href="#修改-Adapter">¶</a>修改 Adapter</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">// 使 Adapter implements View.OnClickListener, View.OnLongClickListener事件监听</span><br><span class="line">public class MainPagesAdapter</span><br><span class="line">        extends RecyclerView.Adapter&lt;MainPagesAdapter.ItemContentHolder&gt;</span><br><span class="line">        implements View.OnClickListener, View.OnLongClickListener</span><br><span class="line"></span><br><span class="line">// 设置item点击事件的回调函数</span><br><span class="line">private OnRecyclerViewItemClickListener mOnItemClickListener = null;</span><br><span class="line">// 设置item点击事件的回调函数</span><br><span class="line">private OnRecyclerViewItemLongClickListener mOnItemLongClickListener = null;</span><br><span class="line"></span><br><span class="line">// define interface</span><br><span class="line">public interface OnRecyclerViewItemClickListener {</span><br><span class="line">    void onItemClick(View view, NewsBean data);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// define interface</span><br><span class="line">public interface OnRecyclerViewItemLongClickListener {</span><br><span class="line">    void onItemLongClick(View view, NewsBean data);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 提供外部 Activity 的实现方法</span><br><span class="line">public void setOnItemClickListener(MainPagesAdapter.OnRecyclerViewItemClickListener listener) {</span><br><span class="line">    this.mOnItemClickListener = listener;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public void setOnItemLongClickListener(MainPagesAdapter.OnRecyclerViewItemLongClickListener listener) {</span><br><span class="line">    this.mOnItemLongClickListener = listener;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 在 Adapter 中的 onCreateViewHolder 方法中创建的View注册点击事件</span><br><span class="line">view.setOnClickListener(this);</span><br><span class="line">view.setOnLongClickListener(this);</span><br><span class="line"></span><br><span class="line">// 在 Adapter 中重写 View 的 onClick 和 onLongClick 方法</span><br><span class="line">@Override</span><br><span class="line">public void onClick(View view) {</span><br><span class="line">    if (mOnItemClickListener != null) {</span><br><span class="line">        //注意这里使用getTag方法获取数据</span><br><span class="line">        mOnItemClickListener.onItemClick(view, (NewsBean) view.getTag());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public boolean onLongClick(View view) {</span><br><span class="line">    if (mOnItemLongClickListener != null) {</span><br><span class="line">        mOnItemLongClickListener.onItemLongClick(view, (NewsBean) view.getTag());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    return false;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>注释较详细, 详见上文 Demo 的 Github 地址。</p><hr><h3 id="在-Activity-中处理-Item-点击事件的逻辑"><a class="header-anchor" href="#在-Activity-中处理-Item-点击事件的逻辑">¶</a>在 Activity 中处理 Item 点击事件的逻辑</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 使 Activity 实现上述 Adapter 中定义的 Click 事件接口</span><br><span class="line">public class MainActivity extends BaseActivity implements</span><br><span class="line">        MainPagesAdapter.OnRecyclerViewItemClickListener,</span><br><span class="line">        MainPagesAdapter.OnRecyclerViewItemLongClickListener</span><br><span class="line"></span><br><span class="line">// 重写 Adapter 的 onItemClick， onItemLongClick 方法</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onItemClick(View view, NewsBean data) {</span><br><span class="line">    // 可以跳转到 Item 的详情页面</span><br><span class="line">    Toast.make(MainActivity.this, "data: "</span><br><span class="line">    + data.getTitle, Toast.LENGTH_LONG).show();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onItemLongClick(View view, final NewsBean data) {</span><br><span class="line">    // 可以设置状态标记</span><br><span class="line">    Toast.make(MainActivity.this, "data: "</span><br><span class="line">    + data.getCtime, Toast.LENGTH_LONG).show();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>这样点击事件的处理逻辑就 OK 了！</p><hr><h2 id="Item-状态变换处理"><a class="header-anchor" href="#Item-状态变换处理">¶</a>Item 状态变换处理</h2><p>有时候, 我们还有这样的需求:</p><blockquote><p>在列表中点击一个 Item 之后, 被点击的 Item 控件的字体颜色, 背景颜色或者图片是否显示等发生改变, 表现出和其他 Item 不一样的呈现状态。（如新闻点击阅读后, 当前新闻 Item 颜色变浅等）</p></blockquote><p>我们的处理思路是: 在数据 Bean 中添加标记状态, 当 Item 的点击事件发生时改变当前数据 Bean 的标记状态, 之后使用 notifyDataSetChanged() 通知 Adapter 数据改变, 更新 UI 界面。因此, 需要如下代码处理。</p><h3 id="数据-Bean-中添加标记属性"><a class="header-anchor" href="#数据-Bean-中添加标记属性">¶</a>数据 Bean 中添加标记属性</h3><p>添加一个 isSelected 属性, 用于数据标记。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import java.io.Serializable;</span><br><span class="line"></span><br><span class="line">public class NewsBean implements Serializable {</span><br><span class="line">    private String ctime;           // 新闻发布时间</span><br><span class="line">    private String title;           // 新闻标题</span><br><span class="line">    private String description;     // 新闻描述</span><br><span class="line">    private String picUrl;          // 新闻配图</span><br><span class="line">    private String url;             // 新闻链接地址</span><br><span class="line"></span><br><span class="line">    private boolean isSelected = false;     // 是否已读</span><br><span class="line"></span><br><span class="line">    public NewsBean() {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getCtime() {</span><br><span class="line">        return ctime;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setCtime(String ctime) {</span><br><span class="line">        this.ctime = ctime;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getTitle() {</span><br><span class="line">        return title;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setTitle(String title) {</span><br><span class="line">        this.title = title;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getDescription() {</span><br><span class="line">        return description;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setDescription(String description) {</span><br><span class="line">        this.description = description;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getPicUrl() {</span><br><span class="line">        return picUrl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setPicUrl(String picUrl) {</span><br><span class="line">        this.picUrl = picUrl;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getUrl() {</span><br><span class="line">        return url;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setUrl(String url) {</span><br><span class="line">        this.url = url;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public boolean isSelected() {</span><br><span class="line">        return isSelected;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setSelected(boolean selected) {</span><br><span class="line">        isSelected = selected;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><br><hr><h3 id="Adapter-中根据-Bean-的标记状态设置不同显示效果"><a class="header-anchor" href="#Adapter-中根据-Bean-的标记状态设置不同显示效果">¶</a>Adapter 中根据 Bean 的标记状态设置不同显示效果</h3><p>在 Adapter 中的 onBindViewHolder()方法中设置 Item 的不同加载状态。<br><br></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onBindViewHolder(ItemContentHolder holder, int position) {</span><br><span class="line">    // 使用Glide图片缓存框架加载图</span><br><span class="line">    Glide.with(context)</span><br><span class="line">            .load(mDatas.get(position).getPicUrl())</span><br><span class="line">            .error(R.drawable.icon)</span><br><span class="line">            .diskCacheStrategy(DiskCacheStrategy.ALL)</span><br><span class="line">            .crossFade()</span><br><span class="line">            .centerCrop()</span><br><span class="line">            .into(holder.newsItemImv);</span><br><span class="line">    holder.newsItemTitleTv.setText(mDatas.get(position).getTitle());</span><br><span class="line">    holder.newsItemTimeTv.setText(mDatas.get(position).getCtime());</span><br><span class="line"></span><br><span class="line">    int textColor = Color.parseColor("#CC000000");</span><br><span class="line">    int textColorChange = Color.parseColor("#40000000");</span><br><span class="line">    if (mDatas.get(position).isSelected()) { // 判断是否标记</span><br><span class="line">        holder.newsItemTitleTv.setTextColor(textColorChange);</span><br><span class="line">        holder.newsItemTimeTv.setTextColor(textColorChange);</span><br><span class="line">    } else {</span><br><span class="line">        holder.newsItemTitleTv.setTextColor(textColor);</span><br><span class="line">        holder.newsItemTimeTv.setTextColor(textColor);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // 将数据保存在itemView的Tag中，以便点击时进行获取</span><br><span class="line">    holder.itemView.setTag(mDatas.get(position));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><br>这样根据标记, 数据更新时加载数据, 显示不同的状态。<hr><h3 id="Activtiy-的-Click-方法中更改数据-Bean-标记状态"><a class="header-anchor" href="#Activtiy-的-Click-方法中更改数据-Bean-标记状态">¶</a>Activtiy 的 Click() 方法中更改数据 Bean 标记状态</h3><p>这样在相应的 Activity 中, 当点击事件发生时, 修改相关 Item 数据并通知 Adapter.</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onItemClick(View view, NewsBean data) {</span><br><span class="line">    // 标记已读，设置标记位</span><br><span class="line">    data.setSelected(true);</span><br><span class="line">    mMainPagesAdapter.notifyDataSetChanged();</span><br><span class="line"></span><br><span class="line">    // 跳转至详情页</span><br><span class="line">    Intent intent = new Intent();</span><br><span class="line">    Bundle bundle = new Bundle();</span><br><span class="line">    bundle.putSerializable("newsInfos", data);</span><br><span class="line">    intent.setClass(MainActivity.this, ItemDetailAty.class);</span><br><span class="line">    intent.putExtras(bundle);</span><br><span class="line">    startActivity(intent);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onItemLongClick(View view, final NewsBean data) {</span><br><span class="line">    new MaterialDialog.Builder(MainActivity.this)</span><br><span class="line">            .title("标记")</span><br><span class="line">            .items(R.array.tag_values)</span><br><span class="line">            .itemsCallback(new MaterialDialog.ListCallback() {</span><br><span class="line">                @Override</span><br><span class="line">                public void onSelection(MaterialDialog dialog,</span><br><span class="line">                                        View itemView,</span><br><span class="line">                                        int position,</span><br><span class="line">                                        CharSequence text) {</span><br><span class="line"></span><br><span class="line">                    String listItemStr = (String) text;</span><br><span class="line">                    Log.d(TAG, "listItemStr &gt;&gt;&gt; " + listItemStr);</span><br><span class="line">                    switch (listItemStr) {</span><br><span class="line">                        case "已读":</span><br><span class="line">                            data.setSelected(true);</span><br><span class="line">                            mMainPagesAdapter.notifyDataSetChanged();</span><br><span class="line">                            break;</span><br><span class="line">                        case "未读":</span><br><span class="line">                            data.setSelected(false);</span><br><span class="line">                            mMainPagesAdapter.notifyDataSetChanged();</span><br><span class="line">                            break;</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                }</span><br><span class="line">            }).show();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>这样效果就出来了, 如展示图3所示。</p><hr><h2 id="样式切换"><a class="header-anchor" href="#样式切换">¶</a>样式切换</h2><p>RecycleView 的布局管理器为我们提供了不同的布局样式, 如默认的线性列表布局, 网格布局, 瀑布流式布局等。Demo 中也提供了相关不同布局的切换, 如上图4, 5, 6所示。</p><p>思路是这样的: 在Adapter设置一个布局加载标志, 根据传回来的不同布局切换标志, 在 Adapter的 onCreateViewHolder() 方法中 inflate不同的布局, 具体做法如下:</p><h3 id="Adapter-中添加加载布局标志"><a class="header-anchor" href="#Adapter-中添加加载布局标志">¶</a>Adapter 中添加加载布局标志</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static int layoutFlag = 0;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>0: 默认卡片布局;<br>1: 无间隔卡片布局;<br>2: 瀑布流式布局;<br>3: 网格布局</p><hr><h3 id="改写-Adapter-中-onCreateViewHolder-方法"><a class="header-anchor" href="#改写-Adapter-中-onCreateViewHolder-方法">¶</a>改写 Adapter 中 onCreateViewHolder()方法</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public ItemContentHolder onCreateViewHolder(ViewGroup parent, int viewType) {</span><br><span class="line">    View view;</span><br><span class="line">    switch (layoutFlag) {</span><br><span class="line">        case 0:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item, parent, false);</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item_nogap, parent, false);</span><br><span class="line">            break;</span><br><span class="line">        case 2:</span><br><span class="line">        case 3:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item_flu, parent, false);</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item, parent, false);</span><br><span class="line">            break;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    MainPagesAdapter.ItemContentHolder viewHolder = new MainPagesAdapter.ItemContentHolder(view);</span><br><span class="line">    //将创建的View注册点击事件</span><br><span class="line">    view.setOnClickListener(this);</span><br><span class="line">    view.setOnLongClickListener(this);</span><br><span class="line">    return viewHolder;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><br><hr><h3 id="Activity-中-Menu-菜单触发布局切换事件"><a class="header-anchor" href="#Activity-中-Menu-菜单触发布局切换事件">¶</a>Activity 中 Menu 菜单触发布局切换事件</h3><br><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">// Menu 菜单</span><br><span class="line">&lt;menu xmlns:android="http://schemas.android.com/apk/res/android"</span><br><span class="line">      xmlns:app="http://schemas.android.com/apk/res-auto"</span><br><span class="line">      xmlns:tools="http://schemas.android.com/tools"</span><br><span class="line">      tools:context="com.dm.recyclerviewdemo.activitys.MainActivity"&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id="@+id/action_cardview"</span><br><span class="line">        android:orderInCategory="100"</span><br><span class="line">        android:title="@string/action_cardview"</span><br><span class="line">        app:showAsAction="never"/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id="@+id/action_no_gapview"</span><br><span class="line">        android:orderInCategory="100"</span><br><span class="line">        android:title="@string/action_no_gapview"</span><br><span class="line">        app:showAsAction="never"/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id="@+id/action_fluview"</span><br><span class="line">        android:orderInCategory="100"</span><br><span class="line">        android:title="@string/action_fluview"</span><br><span class="line">        app:showAsAction="never"/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id="@+id/action_gridview"</span><br><span class="line">        android:orderInCategory="100"</span><br><span class="line">        android:title="@string/action_gridview"</span><br><span class="line">        app:showAsAction="never"/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id="@+id/action_about"</span><br><span class="line">        android:orderInCategory="100"</span><br><span class="line">        android:title="@string/action_about"</span><br><span class="line">        app:showAsAction="never"/&gt;</span><br><span class="line">&lt;/menu&gt;</span><br><span class="line"></span><br><span class="line">// Activity Menu 事件处理</span><br><span class="line">@Override</span><br><span class="line">public boolean onCreateOptionsMenu(Menu menu) {</span><br><span class="line">    getMenuInflater().inflate(R.menu.menu_main, menu);</span><br><span class="line">    return true;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public boolean onOptionsItemSelected(MenuItem item) {</span><br><span class="line">    switch (item.getItemId()) {</span><br><span class="line">        case R.id.action_cardview:</span><br><span class="line">            mLayoutManager = new LinearLayoutManager(MainActivity.this,</span><br><span class="line">                    LinearLayoutManager.VERTICAL, false);</span><br><span class="line">            initRecycleView(0, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_no_gapview:</span><br><span class="line">            mLayoutManager = new LinearLayoutManager(MainActivity.this,</span><br><span class="line">                    LinearLayoutManager.VERTICAL, false);</span><br><span class="line">            initRecycleView(1, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_fluview:</span><br><span class="line">            mLayoutManager = new StaggeredGridLayoutManager(2,</span><br><span class="line">                    StaggeredGridLayoutManager.VERTICAL);</span><br><span class="line">            initRecycleView(2, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_gridview:</span><br><span class="line">            mLayoutManager = new GridLayoutManager(MainActivity.this, 3);</span><br><span class="line">            initRecycleView(3, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_about:</span><br><span class="line">            startActivity(new Intent(MainActivity.this, AboutAty.class));</span><br><span class="line">            break;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    return super.onOptionsItemSelected(item);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private void initRecycleView(int flag,</span><br><span class="line">                             List&lt;NewsBean&gt; datas,</span><br><span class="line">                             RecyclerView.LayoutManager layoutManager) {</span><br><span class="line">    MainPagesAdapter.layoutFlag = flag;</span><br><span class="line"></span><br><span class="line">    mMainPagesAdapter = new MainPagesAdapter(MainActivity.this, datas);</span><br><span class="line">    mRecyclerView.setAdapter(mMainPagesAdapter);</span><br><span class="line">    mRecyclerView.setLayoutManager(layoutManager);</span><br><span class="line">    mRecyclerView.setItemAnimator(new DefaultItemAnimator());//默认动画</span><br><span class="line">    mRecyclerView.setHasFixedSize(true);//效率最高</span><br><span class="line"></span><br><span class="line">    mMainPagesAdapter.setOnItemClickListener(MainActivity.this);</span><br><span class="line">    mMainPagesAdapter.setOnItemLongClickListener(MainActivity.this);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><br><p><strong>这样实现了基本效果, 但仍存在一个问题: Item 的标记状态存在内存中，随着 Activity 的消亡而消失; 可以考虑将数据 Bean 的标记状态存放在外部（数据库, SP, 网络等）</strong></p><hr><h2 id="用到的开源库"><a class="header-anchor" href="#用到的开源库">¶</a>用到的开源库</h2><p>特别感谢这些作者提供的开源库, 丰富了 Demo 功能。</p><blockquote><p><a href="https://github.com/daimajia/NumberProgressBar">compile ‘com.daimajia.numberprogressbar:library:1.2@aar’</a><br><br><a href="https://github.com/bumptech/glide">compile ‘com.github.bumptech.glide:glide:3.7.0’</a><br><br><a href="https://github.com/google/gson">compile ‘com.google.code.gson:gson:2.8.0’</a><br><br><a href="https://github.com/afollestad/material-dialogs">compile ‘com.afollestad.material-dialogs:commons:0.9.0.1’</a><br><br><a href="https://github.com/laobie/StatusBarUtil">compile ‘com.jaeger.statusbaruitl:library:1.3.0’</a><br><br><a href="https://github.com/hdodenhof/CircleImageView">compile ‘de.hdodenhof:circleimageview:2.1.0’</a><br></p></blockquote><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1] <a href="http://blog.csdn.net/lmj623565791/article/details/45059587">http://blog.csdn.net/lmj623565791/article/details/45059587</a><br>[2] <a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2014/1118/2004.html">http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2014/1118/2004.html</a><br>[3] <a href="http://www.loongwind.com/archives/189.html">http://www.loongwind.com/archives/189.html</a><br>[4] <a href="http://frank-zhu.github.io/android/2015/01/16/android-recyclerview-part-1/">http://frank-zhu.github.io/android/2015/01/16/android-recyclerview-part-1/</a><br>[5] <a href="https://github.com/Tikitoo/blog/issues/29">https://github.com/Tikitoo/blog/issues/29</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The notes of installing caffe on ubuntu14.04 without GPU and CUDA</title>
      <link href="/2016/07/19/The-notes-of-installing-caffe-on-ubuntu14-04-without-GPU-and-CUDA/"/>
      <url>/2016/07/19/The-notes-of-installing-caffe-on-ubuntu14-04-without-GPU-and-CUDA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="The-installation-of-ubuntu-14-04"><a class="header-anchor" href="#The-installation-of-ubuntu-14-04">¶</a>The installation of ubuntu 14.04</h2><p>Please visit this notes:<br><a href="https://absentm.github.io/2018/01/12/Ubuntu-14-04-LTS-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">The installation and Configuration of ubuntu 14.04</a></p><hr><h2 id="General-dependencies"><a class="header-anchor" href="#General-dependencies">¶</a>General dependencies</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install apt-get install build-essential</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install --no-install-recommends libboost-all-dev</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install libatlas-base-dev</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install python</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Download-Caffe"><a class="header-anchor" href="#Download-Caffe">¶</a>Download Caffe</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> git <span class="built_in">clone</span> git://github.com/BVLC/caffe.git</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Python-interface"><a class="header-anchor" href="#Python-interface">¶</a>Python interface</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-pip</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> caffe/python</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> req <span class="keyword">in</span> $(<span class="built_in">cat</span> requirements.txt); <span class="keyword">do</span> <span class="built_in">sudo</span> pip install <span class="variable">$req</span>; <span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Compilation"><a class="header-anchor" href="#Compilation">¶</a>Compilation</h2><p>&lt;1&gt; config:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> caffe</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> Makefile.config.example Makefile.config</span><br><span class="line"></span><br><span class="line"><span class="comment"># edit Makefile.config</span></span><br><span class="line"><span class="built_in">sudo</span> vim Makefile.config</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove the comment '#'</span></span><br><span class="line">CPU_ONLY := 1   </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>&lt;2&gt; add path</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in .bashrc or /etc/profile</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> vim .bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># add python path</span></span><br><span class="line"><span class="built_in">export</span> PYTHONPATH=/home/xxxx/caffe/python:<span class="variable">$PYTHONPATH</span></span><br><span class="line"><span class="built_in">source</span> .bashrc  <span class="comment"># or source /etc/profile</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>Save the Makefile.config and Make:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> caffe</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> make all</span><br><span class="line"><span class="built_in">sudo</span> make <span class="built_in">test</span></span><br><span class="line"><span class="built_in">sudo</span> make runtest</span><br><span class="line"><span class="built_in">sudo</span> make pycaffe</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="If-you-meet-the-errors-just-like-this"><a class="header-anchor" href="#If-you-meet-the-errors-just-like-this">¶</a>If you meet the errors just like this:</h3><blockquote><p>ERRORS: src/caffe/net.cpp:8:18: fatal error: hdf5.h: No such file or directory</p></blockquote><p>Please solver as flow:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/lib/x86_64-linux-gnu</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s libhdf5_serial.so.10.1.0 libhdf5_serial.so</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s libhdf5_serial_hl.so.10.0.2 libhdf5_serial_hl.so</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">Then update the file <span class="string">"Makefile.config"</span>:</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/</span><br><span class="line"></span><br><span class="line">LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /usr/lib/x86_64-linux-gnu/hdf5/serial/</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Run-examples"><a class="header-anchor" href="#Run-examples">¶</a>Run examples</h2><p>&lt;1&gt; Mnist:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> caffe</span><br><span class="line"></span><br><span class="line"><span class="comment"># get datas</span></span><br><span class="line"><span class="built_in">sudo</span>  sh data/mnist/get_mnist.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># rebulid lmdb/leveldb files, generates mnist-train-lmdb and mnist-train-lmdb</span></span><br><span class="line"><span class="built_in">sudo</span> sh examples/mnist/create_mnist.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># change caffe/examples/mnist/lenet_solver.prototxt to solver_mode: CPU.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train</span></span><br><span class="line"><span class="built_in">sudo</span> sh examples/mnist/train_lenet.sh</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>&lt;2&gt; Cifar10:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get datas</span></span><br><span class="line"><span class="built_in">sudo</span>  sh data/cifar10/get_cifar10.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># rebulid lmdb/leveldb files</span></span><br><span class="line"><span class="built_in">sudo</span> sh examples/cifar10/create_cifar10.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># change solver.prototxt to solver_mode: CPU.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train</span></span><br><span class="line"><span class="built_in">sudo</span> sh examples/cifar10/train_quick.sh</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="Reference"><a class="header-anchor" href="#Reference">¶</a>Reference</h2><p>[1] <a href="http://sunshineatnoon.github.io/How-to-install-caffe/">http://sunshineatnoon.github.io/How-to-install-caffe/</a><br>[2] <a href="http://caffe.berkeleyvision.org/installation.html">http://caffe.berkeleyvision.org/installation.html</a><br>[3] <a href="http://caffe.berkeleyvision.org/install_apt.html">http://caffe.berkeleyvision.org/install_apt.html</a><br>[4] <a href="https://github.com/NVIDIA/DIGITS/issues/156">https://github.com/NVIDIA/DIGITS/issues/156</a></p><p><strong>END</strong></p><hr>]]></content>
      
      
      <categories>
          
          <category> Deep Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Caffe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用图像数据集原始数据(.png或.jpg格式)生成方法</title>
      <link href="/2016/07/12/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE-png%E6%88%96-jpg%E6%A0%BC%E5%BC%8F-%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/"/>
      <url>/2016/07/12/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE-png%E6%88%96-jpg%E6%A0%BC%E5%BC%8F-%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="引言"><a class="header-anchor" href="#引言">¶</a>引言</h2><p>在计算机视觉方面的工作，我们常常需要用到很多图像数据集．像ImageNet这样早已大名鼎鼎的数据集，我等的百十个Ｇ的硬盘容量怕是怎么也承载不下；本文中，将给出一些Hello world级的图像数据集生成方法，以及其他相关图像数据资源的整理．</p><p>本文的主要内容包括：</p><ol><li>MNIST, CIFAR-10, CIFAR-100等.png或.jpg格式数据集的生成方法；</li><li>如何编写脚本生成图像数据，并更根据标签文件自动归类；</li><li>如何使用Digist工具生成这些数据集；</li><li>.h5格式数据文件格式查看方式；</li><li>相关数据集的下载地址．</li></ol><hr><h2 id="生成图像数据"><a class="header-anchor" href="#生成图像数据">¶</a>生成图像数据</h2><p>MNIST, CIFAR-10, CIFAR-100等数据在其官网都有相关的介绍，这里也给出相关的数据集的官方地址：</p><ol><li>MNIST: <a href="http://yann.lecun.com/exdb/mnist/">http://yann.lecun.com/exdb/mnist/</a></li><li>CIFAR系列: <a href="https://www.cs.toronto.edu/~kriz/cifar.html">https://www.cs.toronto.edu/~kriz/cifar.html</a></li></ol><p>通过官网的介绍可以看出，官网给出的数据集大多都是二进制格式和一些python,matlab格式；有时候我们需要的是原始图像数据，这个时候我们就需要使用代码或者借助其他工具自己生成了．</p><p>代码生成的方式，在网上也有很多，但良莠不齐．大多需要自己根据官网给出的数据格式，自己更具格式特征生成原始数据，这里就不做具体介绍了，网上有很多．这里介绍一些比较简单快捷的方式，来帮助我们快速得到原始图像数据．</p><hr><h3 id="CIFAR-10-图像数据"><a class="header-anchor" href="#CIFAR-10-图像数据">¶</a>CIFAR-10 图像数据</h3><p>这部分是我从<a href="https://www.kaggle.com/c/cifar-10/data">kaggle cifar-10 官网</a>提供的CIFAR-10数据集生成的，原始数据集（.png格式，比较符合我们的要求），但存在一个问题，所给的图片混乱的排列在train目录下，未按照原始10分类进行分类，但好在给出了trainLabels.csv类别映射文件；所以，我们需要解决的首要问题就是，根据这个映射文件自动分成10类别，并存放在10个文件目录下．</p><p>下边直接给出我的代码：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取文件名（除去后缀）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getImageFilePre</span>(<span class="params">filename</span>):</span><br><span class="line"><span class="keyword">if</span> filename.endswith(<span class="string">".png"</span>):</span><br><span class="line">temp = filename.split(<span class="string">"."</span>)</span><br><span class="line">filePre = temp[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">return</span> filePre</span><br><span class="line"></span><br><span class="line"><span class="comment"># string 转 int</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">str2Int</span>(<span class="params">stringValue</span>):</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">int</span>(stringValue)</span><br><span class="line"></span><br><span class="line"><span class="comment"># int 转 string</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">int2Str</span>(<span class="params">intValue</span>):</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">str</span>(intValue)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件重命名</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fileRename</span>(<span class="params">dirPath</span>):</span><br><span class="line"><span class="comment"># 三个参数：分别返回</span></span><br><span class="line"><span class="comment"># 1.父目录</span></span><br><span class="line"><span class="comment"># 2.所有文件夹名字（不含路径）</span></span><br><span class="line"><span class="comment"># 3.所有文件名字</span></span><br><span class="line"><span class="keyword">for</span> parent, dirnames, filenames <span class="keyword">in</span> os.walk(dirPath):    </span><br><span class="line"><span class="keyword">for</span> dirname <span class="keyword">in</span>  dirnames:                       <span class="comment">#输出文件夹信息</span></span><br><span class="line">count = <span class="number">1</span></span><br><span class="line">newTmpPath = os.path.join(dirPath, dirname)</span><br><span class="line">os.chdir(newTmpPath)</span><br><span class="line">fileContents = os.listdir(newTmpPath)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> curFile <span class="keyword">in</span> fileContents:</span><br><span class="line"><span class="keyword">if</span> curFile.endswith(<span class="string">".png"</span>):</span><br><span class="line">newName = dirname + <span class="string">"."</span>+ int2Str(count) + <span class="string">".png"</span></span><br><span class="line">count = count + <span class="number">1</span></span><br><span class="line">shutil.move(curFile, newName)</span><br><span class="line"><span class="built_in">print</span> curFile + <span class="string">" -&gt; "</span> + newName + <span class="string">" ------&gt; OK!"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"><span class="comment"># 读取标签文件内容</span></span><br><span class="line">csvfile = file(<span class="string">'trainLabels.csv'</span>, <span class="string">'rb'</span>)</span><br><span class="line">reader = csv.reader(csvfile)</span><br><span class="line">reader = <span class="built_in">list</span>(reader) <span class="comment"># 转化为list列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取目录下文件列表</span></span><br><span class="line">dirPath = <span class="string">"F:\\xxxxx\\data_origin\\train_200"</span></span><br><span class="line">os.chdir(dirPath)</span><br><span class="line">dirContents = os.listdir(dirPath)</span><br><span class="line">dirContents.sort(key=<span class="keyword">lambda</span> x:<span class="built_in">int</span>(x[:-<span class="number">4</span>])) <span class="comment">#按文件名排序</span></span><br><span class="line"></span><br><span class="line">    totalFiles = <span class="number">50001</span></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, totalFiles):  <span class="comment"># 0-199</span></span><br><span class="line">labelContent = reader[num]</span><br><span class="line">labelID = reader[num][<span class="number">0</span>]</span><br><span class="line">labelName = reader[num][<span class="number">1</span>]</span><br><span class="line">imageFilename = dirContents[num-<span class="number">1</span>]</span><br><span class="line">tmpFilePre = getImageFilePre(dirContents[num-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> str2Int(labelID) == str2Int(tmpFilePre):</span><br><span class="line"><span class="built_in">print</span> <span class="string">"labelID == filePre !!!"</span></span><br><span class="line">baseDirPath = <span class="string">"F:\\xxxxx\\data_origin\\train_with_class"</span></span><br><span class="line">new_dir_name = labelName</span><br><span class="line">new_dir_path = os.path.join(baseDirPath, new_dir_name)</span><br><span class="line"></span><br><span class="line">isExists = os.path.isdir(new_dir_path)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> isExists:</span><br><span class="line">os.makedirs(new_dir_path)</span><br><span class="line"><span class="built_in">print</span> new_dir_path + <span class="string">" 创建成功！"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span> new_dir_path + <span class="string">"目录已存在！"</span></span><br><span class="line"></span><br><span class="line">shutil.copy(imageFilename, new_dir_path)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span></span><br><span class="line"></span><br><span class="line">csvfile.close()</span><br><span class="line"></span><br><span class="line">rootPath = <span class="string">"F:\\xxxxx\\data_origin\\train_with_class"</span></span><br><span class="line">fileRename(rootPath)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">main()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>这样，便分成了10个类别，并根据类别存放在不同的目录下，每一类别5000张图片；在我的Windows平台下耗时1.5个小时（包括文件重命名）才跑完，确实有点慢．下图为最终的结果图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/cifar10_with_class.JPG" alt="CIFAR-10 with class"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/cifar10_examples.JPG" alt="CIFAR-10 examples"></p><hr><h2 id="caffe图像化操作工具digits工具生成图像数据集"><a class="header-anchor" href="#caffe图像化操作工具digits工具生成图像数据集">¶</a>caffe图像化操作工具digits工具生成图像数据集</h2><p>详细的使用方法可移步这篇博文：<a href="http://www.cnblogs.com/denny402/p/5136155.html">http://www.cnblogs.com/denny402/p/5136155.html</a></p><p>需要安装caffe和digits工具，使用工具可直接生成自动归类的图片数据，速度很快可以一试．</p><hr><h2 id="h5文件结构查看器"><a class="header-anchor" href="#h5文件结构查看器">¶</a>.h5文件结构查看器</h2><p>在做卷积神经网络的时候，我们经常需要保存.h5数据文件，但有时候我们需要利用这些.h5文件，比如在进行transfor Learning的时候，就需要根据.h5文件的格式进行层冻结．</p><p>除了自己用代码一窥.h5文件结构外，还有什么快捷的工具吗？有的，matlab就提供了现成的调用方法．文档地址在这里：<a href="http://cn.mathworks.com/help/matlab/ref/h5disp.html">http://cn.mathworks.com/help/matlab/ref/h5disp.html</a></p><p>如，我们可以使用matlab命令查看vgg16模型的权重结构</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; h5disp('vgg16_weights.h5')</span><br></pre></td></tr></tbody></table></figure><p>结果显示如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; h5disp('vgg16_weights.h5')</span><br><span class="line">HDF5 vgg16_weights.h5</span><br><span class="line">Group '/'</span><br><span class="line">    Attributes:</span><br><span class="line">        'nb_layers':  37</span><br><span class="line">    Group '/layer_0'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_1'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x3x64</span><br><span class="line">            MaxSize:  3x3x3x64</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  64</span><br><span class="line">            MaxSize:  64</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_10'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_11'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x128x256</span><br><span class="line">            MaxSize:  3x3x128x256</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  256</span><br><span class="line">            MaxSize:  256</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_12'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_13'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x256x256</span><br><span class="line">            MaxSize:  3x3x256x256</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  256</span><br><span class="line">            MaxSize:  256</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_14'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_15'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x256x256</span><br><span class="line">            MaxSize:  3x3x256x256</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  256</span><br><span class="line">            MaxSize:  256</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_16'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_17'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_18'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x256x512</span><br><span class="line">            MaxSize:  3x3x256x512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  512</span><br><span class="line">            MaxSize:  512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_19'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_2'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_20'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x512x512</span><br><span class="line">            MaxSize:  3x3x512x512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  512</span><br><span class="line">            MaxSize:  512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_21'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_22'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x512x512</span><br><span class="line">            MaxSize:  3x3x512x512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  512</span><br><span class="line">            MaxSize:  512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_23'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_24'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_25'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x512x512</span><br><span class="line">            MaxSize:  3x3x512x512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  512</span><br><span class="line">            MaxSize:  512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_26'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_27'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x512x512</span><br><span class="line">            MaxSize:  3x3x512x512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  512</span><br><span class="line">            MaxSize:  512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_28'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_29'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x512x512</span><br><span class="line">            MaxSize:  3x3x512x512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  512</span><br><span class="line">            MaxSize:  512</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_3'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x64x64</span><br><span class="line">            MaxSize:  3x3x64x64</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  64</span><br><span class="line">            MaxSize:  64</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_30'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_31'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_32'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  4096x25088</span><br><span class="line">            MaxSize:  4096x25088</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  4096</span><br><span class="line">            MaxSize:  4096</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_33'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_34'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  4096x4096</span><br><span class="line">            MaxSize:  4096x4096</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  4096</span><br><span class="line">            MaxSize:  4096</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_35'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_36'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  1000x4096</span><br><span class="line">            MaxSize:  1000x4096</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  1000</span><br><span class="line">            MaxSize:  1000</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_4'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_5'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_6'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x64x128</span><br><span class="line">            MaxSize:  3x3x64x128</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  128</span><br><span class="line">            MaxSize:  128</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_7'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line">    Group '/layer_8'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  2</span><br><span class="line">        Dataset 'param_0'</span><br><span class="line">            Size:  3x3x128x128</span><br><span class="line">            MaxSize:  3x3x128x128</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">        Dataset 'param_1'</span><br><span class="line">            Size:  128</span><br><span class="line">            MaxSize:  128</span><br><span class="line">            Datatype:   H5T_IEEE_F32LE (single)</span><br><span class="line">            ChunkSize:  []</span><br><span class="line">            Filters:  none</span><br><span class="line">            FillValue:  0.000000</span><br><span class="line">    Group '/layer_9'</span><br><span class="line">        Attributes:</span><br><span class="line">            'nb_params':  0</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="https://www.cs.toronto.edu/~kriz/cifar.html">https://www.cs.toronto.edu/~kriz/cifar.html</a><br>[2]. <a href="https://www.kaggle.com/c/cifar-10/data">https://www.kaggle.com/c/cifar-10/data</a><br>[3]. <a href="http://cn.mathworks.com/help/matlab/ref/h5disp.html">http://cn.mathworks.com/help/matlab/ref/h5disp.html</a><br>[4]. <a href="http://www.cnblogs.com/denny402/p/5136155.html">http://www.cnblogs.com/denny402/p/5136155.html</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> Deep Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> 数据集 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于</title>
      <link href="/2016/06/18/%E5%85%B3%E4%BA%8E/"/>
      <url>/2016/06/18/%E5%85%B3%E4%BA%8E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><blockquote class="blockquote-center"><font size="4">写作对我而言是去掉累赘的字，直接传达意思。</font><br>詹姆士‧麦克布莱德</blockquote><h2 id="关于我"><a class="header-anchor" href="#关于我">¶</a>关于我</h2><ul><li>计算机小硕一枚，软件工程专业，身无长物，就爱瞎折腾</li><li>－</li><li>喜欢编程，却怎么也不汇（会）编</li><li>爱上研究，也只能说是 『 爱上 』</li><li>想要极客范，却总还是折磨 …(此处应有 『 <sup>V</sup> 』 的表情包)</li><li>－</li><li>近来，多关注数据科学，深度学习等领域，期望着变强变大！</li><li>热爱这个世界上所有的美好事物，个性音乐，有故事的电影，亦或是路尽头榆树下的蚂蚁搬家</li><li>母亲一辈子信佛，耳濡目染，这辈子也要从了善良</li></ul><hr><h2 id="关于名字"><a class="header-anchor" href="#关于名字">¶</a>关于名字</h2><p><strong>AbsentM — 缺席者</strong></p><p>为了取一个昵称，对于处女座且略带强迫症的我来说，也是不能忍！于是，便发挥自己天马星空的想象力，学着仓颉 『 呃鹅额 』 创造了这个 『 AbsentM 』</p><blockquote><p>AbsentM， 取自英文单词 Absent 和 Me 的合成<br></p></blockquote><blockquote><p>Absent， 取 『 缺席的 』、『 不在场的 』 之意<br>Me，故名思意，取 『 我 』 之意，古文又言 『 者 』 <br></p></blockquote><blockquote><p>合在一起，AbsentM，即为 『 缺席者 』</p></blockquote><p>缺席者, 这是我学会上网时取的第一个网名．回想，一晃已隔多年，今天在这里以此为名，为它代盐，想想也是十分惬意。</p><p>偶尔也会发现，按照计算机的字典排序，以 『 A 』 开头总是会出现在别人通讯录的前列；</p><p>偶尔也会追忆，『 absent 』 也是大学四六级单词书顺序版A类中第一个记忆深刻的单词，还有一个叫做 『 abandon 』；</p><p>偶尔也会想起，生命中很多重要的人和事，自己也都缺了席；</p><p>无奈！</p><blockquote><p>时光荏苒，岁月静好；往事依稀，韶华空明。</p></blockquote><p>听着，喜极而泣！</p><hr><h2 id="关于博客"><a class="header-anchor" href="#关于博客">¶</a>关于博客</h2><p>在后博客时代里，方才接触到博客的玩法，后知后觉。</p><blockquote><p>记录本身，亦是反抗</p></blockquote><p>AbsentM’s Notes，以 notes（笔记）为名，不足为过；文章中多是整理了当下自己遇到的困难及解决方案，创新寥寥，想要 Boosting !　虽然，我仍恬不知耻地在每篇 Post 后加入了＂赞赏＂。</p><p>为什么从 CSDN 迁移到这里？ 圆了阿涛的原话是：</p><blockquote><p>你会发现，当自己用心地经营一个自己完全控制（或者看起来像）的物件的时候，那感觉总是那么地刻骨铭心！</p></blockquote><hr><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2><p>这里，欢迎你来拍砖，欢迎咬文嚼字，也欢迎你的吹毛求疵！</p><p>如你不弃，可来这里，欣赏我的中式英文： <a href="https://absentm.github.io/about/">英文版</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习中的 Data Augmentation 方法和代码实现</title>
      <link href="/2016/06/14/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84Data-Augmentation%E6%96%B9%E6%B3%95%E5%92%8C%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"/>
      <url>/2016/06/14/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84Data-Augmentation%E6%96%B9%E6%B3%95%E5%92%8C%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>在深度学习中，为了避免出现过拟合（Overfitting），通常我们需要输入充足的数据量．为了得到更加充足的数据，我们通常需要对原有的图像数据进行几何变换，改变图像像素的位置并保证特征不变.</p><p>本页面主要记录下常用的数据增强（Data Augmentation）变换方法及其实现．</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/sl.png" alt="sl.png"></p><hr><h2 id="数据增强变换（Data-Augmentation-Transformation）"><a class="header-anchor" href="#数据增强变换（Data-Augmentation-Transformation）">¶</a>数据增强变换（Data Augmentation Transformation）</h2><p>不同的任务背景下, 我们可以通过图像的几何变换, 使用以下一种或多种组合数据增强变换来增加输入数据的量。这里具体的方法都来自数字图像处理的内容, 相关的知识点介绍, 网上都有, 就不一一介绍了。</p><blockquote><ul><li>旋转 | 反射变换(Rotation/reflection): 随机旋转图像一定角度; 改变图像内容的朝向</li><li>翻转变换(flip)： 沿着水平或者垂直方向翻转图像</li><li>缩放变换(zoom)： 按照一定的比例放大或者缩小图像</li><li>平移变换(shift)： 在图像平面上对图像以一定方式进行平移可以采用随机或人为定义的方式指定平移范围和平移步长，沿水平或竖直方向进行平移，改变图像内容的位置</li><li>尺度变换(scale)： 对图像按照指定的尺度因子，进行放大或缩小；或者参照 SIFT 特征提取思想，利用指定的尺度因子对图像滤波构造尺度空间，改变图像内容的大小或模糊程度</li><li>对比度变换(contrast)： 在图像的 HSV 颜色空间，改变饱和度S和V亮度分量，保持色调H不变。 对每个像素的 S 和 V 分量进行指数运算(指数因子在 0.25 到 4 之间), 增加光照变化</li><li>噪声扰动(noise)： 对图像的每个像素 RGB 进行随机扰动，常用的噪声模式是椒盐噪声和高斯噪声</li><li>颜色变换(color)： 在训练集像素值的 RGB 颜色空间进行 PCA，得到 RGB 空间的 3 个主方向向量，3 个特征值：p1、p2、p3、λ1、λ2、λ3。 对每幅图像的每个像素 $ {I_x}_y = {[I^R_{xy}, I^G_{xy}, I<sup>B_{xy}]}</sup>T $ 进行加上如下的变化:</li></ul></blockquote><p>$$ {[p1, p2, p3][α1λ1, α2λ2, α3λ3]}^T $$</p><p>$$ 其中: α_i 是满足均值为 0，方差为 0.1 的随机变量 $$</p><p><strong>注意</strong>： 几何变换不改变像素值，而是改变像素所在的位置。通过 Data Augmentation 方法扩张了数据集的范围，作为输入时，以期待网络学习到更多的图像不变性特征。</p><hr><h2 id="代码实现"><a class="header-anchor" href="#代码实现">¶</a>代码实现</h2><p>作为实现部分，这里介绍一下在 python 环境下，利用已有的开源代码库 <strong>Keras</strong> 作为实践:</p><p><em><strong>Keras: Deep Learning library for Theano and TensorFlow</strong></em></p><blockquote><p>Keras is a minimalist, highly modular neural networks library, written in Python and capable of running on top of either TensorFlow or Theano. It was developed with a focus on enabling fast experimentation. Being able to go from idea to result with the least possible delay is key to doing good research.</p></blockquote><hr><h3 id="环境搭建"><a class="header-anchor" href="#环境搭建">¶</a>环境搭建</h3><p>/1 实现环境： Ubuntu 14.04, python　<br>/2 Keras 依赖库： <a href="https://github.com/fchollet/keras">参照这里</a></p><blockquote><ul><li>python环境搭建：<a href="https://absentm.github.io/2017/12/02/python%E5%AE%89%E8%A3%85%E7%AE%80%E8%AE%B0/">参见博客地址</a></li></ul></blockquote><blockquote><ul><li>numpy, scipy：<code>sudo pip install numpy</code>和<code>sudo pip install scipy</code></li><li>pyyaml： <code>sudo pip install pyyaml</code></li><li>HDF5 and h5py（可选，如果你希望将模型保存为 hdf5 格式）：</li></ul></blockquote><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libhdf5-serial-dev</span><br><span class="line">sudo pip install h5py 或者 </span><br><span class="line">sudo apt-get install python-h5py</span><br></pre></td></tr></tbody></table></figure><blockquote><ul><li>cuDNN（可选，如果你使用 CNNS）</li><li>Theano（作为后端，从实现本文的主要内容看，推荐安装这个）：<a href="http://deeplearning.net/software/theano/install.html#install">Theano安装方法请参考这里</a></li><li>TensorFlow（作为后端，可以了解一下）： <a href="https://github.com/tensorflow/tensorflow#download-and-setup">TensorFlow安装方法请参考这里</a></li></ul></blockquote><p>/3 安装 Keras</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install keras</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="编程实现"><a class="header-anchor" href="#编程实现">¶</a>编程实现</h3><p>/1 先上代码：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#-*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># import packages</span></span><br><span class="line"><span class="keyword">from</span> keras.preprocessing.image <span class="keyword">import</span> ImageDataGenerator, array_to_img, img_to_array, load_img</span><br><span class="line"></span><br><span class="line">datagen = ImageDataGenerator(</span><br><span class="line">    rotation_range=<span class="number">0.2</span>,</span><br><span class="line">    width_shift_range=<span class="number">0.2</span>,</span><br><span class="line">    height_shift_range=<span class="number">0.2</span>,</span><br><span class="line">    shear_range=<span class="number">0.2</span>,</span><br><span class="line">    zoom_range=<span class="number">0.2</span>,</span><br><span class="line">    horizontal_flip=<span class="literal">True</span>,</span><br><span class="line">    fill_mode=<span class="string">'nearest'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">img = load_img(<span class="string">'～/Desktop/lena.jpg'</span>)  <span class="comment"># this is a PIL image, please replace to your own file path</span></span><br><span class="line">x = img_to_array(img)  <span class="comment"># this is a Numpy array with shape (3, 150, 150)</span></span><br><span class="line">x = x.reshape((<span class="number">1</span>,) + x.shape)  <span class="comment"># this is a Numpy array with shape (1, 3, 150, 150)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># the .flow() command below generates batches of randomly transformed images</span></span><br><span class="line"><span class="comment"># and saves the results to the `preview/` directory</span></span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> datagen.flow(x, batch_size=<span class="number">1</span>, save_to_dir=<span class="string">'~/Desktop/preview'</span>, save_prefix=<span class="string">'lena'</span>, save_format=<span class="string">'jpg'</span>):</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">20</span>:</span><br><span class="line">        <span class="keyword">break</span>  <span class="comment"># otherwise the generator would loop indefinitely</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>注意: 修改自己的存放图像的路径！</strong></p><p>看看我的效果图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/dataAug.png" alt="dataAug.png"></p><p>/2 参数讲解：<a href="http://keras.io/preprocessing/image/">文档来自这里</a></p><p>主要函数：<code>ImageDataGenerator</code>　实现了大多数上文中提到的图像几何变换方法．</p><ul><li>rotation_range: 旋转范围, 随机旋转(0-180)度</li><li>width_shift and height_shift: 随机沿着水平或者垂直方向，以图像的长宽小部分百分比为变化范围进行平移</li><li>rescale: 对图像按照指定的尺度因子, 进行放大或缩小, 设置值在 0- 1 之间，通常为1 / 255</li><li>shear_range: 水平或垂直投影变换, <a href="https://en.wikipedia.org/wiki/Shear_mapping">参考这里</a></li><li>zoom_range: 按比例随机缩放图像尺寸</li><li>horizontal_flip: 水平翻转图像</li><li>fill_mode: 填充像素, 出现在旋转或平移之后</li></ul><hr><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>[1]. <a href="https://blog.keras.io/building-powerful-image-classification-models-using-very-little-data.html">https://blog.keras.io/building-powerful-image-classification-models-using-very-little-data.html</a><br>[2]. <a href="http://www.docin.com/p-751118909.html">http://www.docin.com/p-751118909.html</a><br>[3]. <a href="http://imbinwang.github.io/blog/data-augmentation-in-deep-learning">http://imbinwang.github.io/blog/data-augmentation-in-deep-learning</a><br>[4]. <a href="http://keras.io/preprocessing/image/">http://keras.io/preprocessing/image/</a><br>[5]. <a href="https://en.wikipedia.org/wiki/Shear_mapping">https://en.wikipedia.org/wiki/Shear_mapping</a><br>[6]. <a href="https://github.com/fchollet/keras">https://github.com/fchollet/keras</a><br>[7]. <a href="http://keras.io/">http://keras.io/</a><br>[8]. <a href="http://www.360doc.com/content/16/0314/19/31629080_542186577.shtml">http://www.360doc.com/content/16/0314/19/31629080_542186577.shtml</a></p><hr><h2 id="END"><a class="header-anchor" href="#END">¶</a>END</h2>]]></content>
      
      
      <categories>
          
          <category> Deep Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> 图像处理 </tag>
            
            <tag> Keras </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习Caffe系列教程集合</title>
      <link href="/2016/05/14/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0Caffe%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B%E9%9B%86%E5%90%88/"/>
      <url>/2016/05/14/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0Caffe%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><blockquote><p>时光静好、珍藏一份守候、珍藏一份美好。</p></blockquote><blockquote><p>静听流年的剪辑、等候你归来、许我一场花开不败的回忆。</p></blockquote><p>Deep Leaning的坑太深太重, 转战caffe之际, 寻找了很多资料; 本来想自己亲自披战, 玩转一把; 却发现社区内善良的兄弟姐妹们已经提供了这么多有用的资料, 一再鼓起自创的勇气, 也就淡了起来.</p><p>好东西, 当然要拿出来分享啦!</p><p>今儿的, 文章怪, 就这么干了, 贴出搜集到的链接资料, 与君分享!</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Caffe-show.png" alt="Caffe-show"></p><hr><h2 id="caffe笔记系列链接"><a class="header-anchor" href="#caffe笔记系列链接">¶</a>caffe笔记系列链接</h2><p>推荐这位博主, 先看看样子吧, 博客内容着实让我获益良多, 真心感谢!</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Caffe-show_blog1.png" alt="Caffe-show_blog1"></p><p>下面在我的博客中贴出仁兄的链接, 流年!</p><ol><li><p><a href="http://www.cnblogs.com/denny402/p/4989514.html">Google protocol buffer在windows下的编译</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5041060.html">caffe windows 学习第一步：编译和安装（vs2012+win 64)</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5041122.html">caffe windows学习：第一个测试程序</a></p></li><li><p><a href="http://blog.csdn.net/mduanfire/article/details/50939210">64位Ubuntu 14.04 LTS + Caffe + CUDA 7.5 + Opencv 3.0 安装配置实战 </a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5070928.html">Caffe学习系列(2)：数据层及参数</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5071126.html">Caffe学习系列(3)：视觉层（Vision Layers)及参数</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5072507.html">Caffe学习系列(4)：激活层（Activiation Layers)及参数</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5072746.html">Caffe学习系列(5)：其它常用层及参数</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5073427.html">Caffe学习系列(6)：Blob,Layer and Net以及对应配置文件的编写</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5074049.html">Caffe学习系列(7)：solver及其配置</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5074212.html">Caffe学习系列(8)：solver优化方法</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5075490.html">Caffe学习系列(9)：运行caffe自带的两个简单例子</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5076285.html">Caffe学习系列(10)：命令行解析</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5082341.html">Caffe学习系列(11)：图像数据转换成db（leveldb/lmdb)文件</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5083300.html">Caffe学习系列(12)：训练和测试自己的图片</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5088399.html">Caffe学习系列(13)：数据可视化环境（python接口)配置</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5092075.html">Caffe学习系列(14)：初识数据可视化</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5102328.html">Caffe学习系列(15)：计算图片数据的均值</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5103425.html">Caffe学习系列(16)：caffemodel可视化</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5105911.html">Caffe学习系列(17)：模型各层数据和参数可视化</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5106764.html">Caffe学习系列(18): 绘制网络模型</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5110204.html">Caffe学习系列(19): 绘制loss和accuracy曲线</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5111018.html">Caffe学习系列(20)：用训练好的caffemodel来进行分类</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5136155.html">Caffe学习系列(21)：caffe图形化操作工具digits的安装与运行</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5136262.html">Caffe学习系列(22)：caffe图形化操作工具digits运行实例</a></p></li><li><p><a href="http://www.cnblogs.com/denny402/p/5137534.html">Caffe学习系列(23)：如何将别人训练好的model用到自己的数据上</a></p></li></ol><hr><h2 id="测试模型脚本"><a class="header-anchor" href="#测试模型脚本">¶</a>测试模型脚本</h2><p>上文中的链接, 基本上已经详细得列举了这个深度学习工具caffe的完整教程, 我这里再补充一下, 训练好已有模型如何进行测试的脚本:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;1&gt; ## 测试自己数据模型的脚本: imagenet</span><br><span class="line">./build/tools/caffe.bin test -model=examples/myself/model/caffenet_imagenet/train_val.prototxt -weights=/home/dm/caffe/examples/myself/model/caffenet_imagenet/train_caffenet_iter_20000.caffemodel -gpu=0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;2&gt; ## 在MNIST调用已经训练好的模型，测试。</span><br><span class="line">./build/tools/caffe.bin test -model=examples/mnist/lenet_train_test.prototxt -weights=examples/mnist/lenet_iter_10000.caffemodel -gpu=0</span><br><span class="line"></span><br><span class="line">## 如果没有GPU则使用</span><br><span class="line">./build/tools/caffe.bin test -model=examples/mnist/lenet_train_test.prototxt -weights=examples/mnist/lenet_iter_10000.caffemodel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;3&gt; ## 在cifar10模型下面调用已经训练好的模型，测试。</span><br><span class="line">./build/tools/caffe.bin test -model=examples/cifar10/cifar10_quick_train_test.prototxt -weights=examples/cifar10/cifar10_quick_iter_5000.caffemodel -gpu=0</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>此部分可参考链接: <a href="http://www.bubuko.com/infodetail-867723.html">caffe调用已生成的模型，测试（Linux）</a></p><hr><h2 id="备份资料"><a class="header-anchor" href="#备份资料">¶</a>备份资料</h2><p><strong>另外建议, 如果决定使用caffe请在ubuntu等linux系统上进行训练和开发, windows上的坑实在是太多.</strong></p><hr>]]></content>
      
      
      <categories>
          
          <category> Deep Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> Caffe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>64位Ubuntu 14.04 LTS + Caffe + CUDA 7.5 + Opencv 3.0 安装配置实战</title>
      <link href="/2016/03/20/64%E4%BD%8DUbuntu-14-04-LTS-Caffe-CUDA-7-5-Opencv-3-0-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98/"/>
      <url>/2016/03/20/64%E4%BD%8DUbuntu-14-04-LTS-Caffe-CUDA-7-5-Opencv-3-0-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>本文主要笔记自己在ubuntu 14.04.4 LTS版本系统上搭建开源深度学习[Deep Learning]框架: Caffe的详细过程。其中主要包含了Nvidia CUDA 7.5、opencv 3.0、cuDNN的安装配置过程及所遇问题的解决方案。</p><p>安装的过程中遇到了很多问题，感谢开源社区、感谢Github大神们的分享，学会分享就是很大的善良。</p><hr><h2 id="情况说明"><a class="header-anchor" href="#情况说明">¶</a>情况说明</h2><p>在搭建该框架前，本系统已经使用Ubuntu自带的"附件驱动"安装了开源驱动，看过网上的很多教程之后，还是毅然决然地卸载这些开源驱动，换回了自带默认的"Nouveau Display Driver"驱动以供基本显示使用（注意：此时安装的Nvidia推荐驱动还没有完全卸载，即尚未安装GPU）。</p><p>这些说明很重要！由于大神的通力劳作，使得现在按照官网安装最新版的Caffe，变得很简单了，下面我们开始一步步的安装吧。</p><hr><h2 id="Caffe-安装"><a class="header-anchor" href="#Caffe-安装">¶</a>Caffe 安装</h2><p>根据我们前面的情况说明，我们现在机器上没有GPU，按照官网的<a href="http://caffe.berkeleyvision.org/install_apt.html">Caffe官网安装教程</a>，我们先一步步地进行，之后安装完GPU（CUDA）后再重新编译即可，不用担心。</p><p>(1). 安装依赖库（一）</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler</span><br><span class="line"></span><br><span class="line">$ sudo apt-get install --no-install-recommends libboost-all-dev</span><br></pre></td></tr></tbody></table></figure><p>(2). 安装BLAS</p><p>也可以安装OpenBLAS或者MKL，以加速CPU性能（有GPU的童鞋可以忽略），这里我按照官网装了BLAS，有兴趣的童鞋可以自己研究另外两种，只需在最后编译caffe的时候修改一下配置文件即可。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libatlas-base-dev</span><br></pre></td></tr></tbody></table></figure><p>(3). Python安装</p><p>Ubuntu 14.04 自带Python 2.7 ，无需自行安装。可以自测：<code>$ python</code>，进入python环境后会有版本提示；如果未出现请使用如下命令进行安装：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python</span><br></pre></td></tr></tbody></table></figure><p>(4). Opencv3.0安装</p><p>安装方法详见：<a href="https://absentm.github.io/2016/03/19/Ubuntu14-04-LTS-%E7%B3%BB%E7%BB%9F%E4%B8%ADOpencv-3-0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/"> ubuntu14.04 LTS系统中Opencv 3.0开发环境的搭建 </a>，Opencv必须安装，且版本需要大于2.4。—[来自官网说明]</p><p>(5). 安装依赖库（二）</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</span><br></pre></td></tr></tbody></table></figure><p>(6). Caffe下载</p><p>使用git进行下载，直接从github上下载最新版本，下载前切换至home目录。注：git的使用方法可参看：<a href="https://absentm.github.io/2021/01/10/%E6%88%91%E7%9A%84vim%E9%85%8D%E7%BD%AE-vimrc%EF%BC%9Agit-github%E7%AE%A1%E7%90%86/">我的vim配置（.vimrc：git+github管理） </a>，这篇文章内容进行安装配置。clone后在home中便可以找到Caffe的下载目录了。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd</span><br><span class="line">$ git clone git://github.com/BVLC/caffe.git</span><br></pre></td></tr></tbody></table></figure><p>(7). 编译Caffe前准备</p><ul><li><p>修改Makefile文件，最新版的Caffe已经帮我们修改好了，可以跳过；如果使用以前的版本则仍需要修改，这个可以自行Google。</p></li><li><p>修改caffe/examples/cpp_classification/classification.cpp文件，加入：</p></li></ul><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/imgproc/types_c.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/objdetect/objdetect.hpp&gt;</span></span></span><br></pre></td></tr></tbody></table></figure><p>(8). 编译Caffe</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/caffe</span><br><span class="line">$ cp Makefile.config.example Makefile.config </span><br><span class="line"></span><br><span class="line"># 修改Makefile.config文件：如果没有GPU，则去掉CPU_ONLY:= 1的注释</span><br><span class="line"># 如果安装了Opencv3.0,去掉 OPENCV_VERSION := 3的注释</span><br><span class="line"></span><br><span class="line">$ make all </span><br><span class="line"># 到这一步可能会出现，缺少cublas_v2.h的错误提示，先不用管，这时以下两步也不需要执行了，这是由于未安装cuda造成的。</span><br><span class="line"></span><br><span class="line">$ make test </span><br><span class="line">$ make runtest</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Makefile%E9%85%8D%E7%BD%AE%E5%9B%BE.png" alt="Makefile配置图"></p><hr><h2 id="Nvidia显卡驱动及Cuda-7-5-的安装"><a class="header-anchor" href="#Nvidia显卡驱动及Cuda-7-5-的安装">¶</a>Nvidia显卡驱动及Cuda 7.5 的安装</h2><p><strong>如果你的机器还没有装GPU，请直接忽略这一步和cuDNN安装</strong></p><p>（1）. 验证你的gpu支持是否支持Cuda</p><p>打开<a href="https://developer.nvidia.com/cuda-gpus">支持Cuda运算的Gpu列表</a>，只要你的GPU在里面找得到就没问题。</p><p>（2）. 查看当前使用显卡</p><p>在终端输入以下命令，确认当前使用的是独立显卡，如果使用的是集显，则需要在开机时进入BIOS关闭集显。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lspci | grep -i nvidia</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-%E6%98%BE%E7%A4%BA%E6%95%88%E6%9E%9C.png" alt="CUDA-显示效果"></p><p>（3）. 确认你的系统是X86架构，可通过下面的命令查询</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ uname -m &amp;&amp; cat /etc/*release   # 显示X86_64和系统信息即可  </span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-%E6%98%BE%E7%A4%BA%E7%BB%93%E6%9E%9C.png" alt="CUDA-显示结果"></p><p>（4）. 安装gcc</p><p>Ubuntu 14.04已经自带gcc 4.8.5，无需自行下载，检查gcc版本可通过如下方法：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcc --version</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-GCC-version.png" alt="CUDA-GCC-version"></p><p>如果发现还没安装gcc，可以执行：$ sudo apt-get install gcc-版本号</p><p>（5）. 下载Cuda<br>Cuda可以直接到<a href="https://developer.nvidia.com/cuda-toolkit">Nvidia官网</a>下载，下面官网的下载地址，有两种安装方式（.run 和 .deb），这里只介绍后者，因为比较简单易行。 这里选择下载信息如下图：</p><p><strong>这里给出我的百度云盘下载地址：</strong> 链接：<a href="http://pan.baidu.com/s/1c7nR9G">http://pan.baidu.com/s/1c7nR9G</a> 密码：sp7z</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-Nvidia%E5%AE%98%E7%BD%91.png" alt="CUDA-Nvidia官网"></p><p>（6）. 验证Cuda安装包</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ md5sum 你的filename</span><br></pre></td></tr></tbody></table></figure><p>如果下载没出错，那得到的MD5序列号和上图中是一致的，否则只能重新下载。</p><p>（7）. 卸载旧版本Nvidia</p><p>根据官网介绍，之前安装的版本都会有冲突的嫌疑。卸载命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get --purge remove nvidia*</span><br></pre></td></tr></tbody></table></figure><p>（8）. 安装Cuda</p><p>cd切换至cuda安装包所在的目录，执行以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dpkg -i cuda-repo-ubuntu1404-7-5-local_7.5-18_amd64.deb</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install cuda</span><br></pre></td></tr></tbody></table></figure><p>（9）. 添加环境变量</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/profile # 在末尾添加（注意自己的Cuda版本）：</span><br><span class="line"></span><br><span class="line"># export PATH=/usr/local/cuda-7.5/bin:$PATH</span><br><span class="line"># export LD_LIBRARY_PATH=/usr/local/cuda-7.5/lib64:$LD_LIBRARY_PATH</span><br><span class="line"></span><br><span class="line">$ source /etc/profile</span><br><span class="line">$ sudo reboot</span><br></pre></td></tr></tbody></table></figure><p>（10）. 安装例程</p><p>例程本来在<code>/usr/local/cuda-7.5/samples</code>路径下，但不可写，使用如下命令进行复制：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cuda-install-samples-7.5.sh ~/cuda</span><br></pre></td></tr></tbody></table></figure><p>（11）. 查看GPU驱动版本、Cuda版本：</p><p>正常安装的话，会出现版本信息，如果没出现说明安装出错，官网教程说的很清楚。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat /proc/driver/nvidia/version</span><br><span class="line">$ nvcc -V</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/nvidia-version.png" alt="nvidia-version"></p><p>（12）. 编译例程</p><p>cd进NVIDIA_CUDA-7.5_Samples中make:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/cuda/NVIDIA_CUDA-7.5_Samples    </span><br><span class="line">$ make</span><br></pre></td></tr></tbody></table></figure><blockquote><p>编译结果在 ~/NVIDIA_CUDA-7.5_Samples/bin/x86_64/linux/release中</p></blockquote><p>（13）. 执行编译结果，确认安装配置</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd</span><br><span class="line">$ ./cuda/NVIDIA_CUDA-7.5_Samples/bin/x86_64/linux/release/deviceQuery</span><br></pre></td></tr></tbody></table></figure><p>顺利的话如下图所示，若出错可<a href="http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html#running-binaries__valid-results-from-sample-cuda-devicequery-program">参考此处</a></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-deviceQuery.png" alt="CUDA-deviceQuery"></p><p>（14）. bandwidthTest确认</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./cuda/NVIDIA_CUDA-7.5_Samples/bin/x86_64/linux/release/bandwidthTest</span><br></pre></td></tr></tbody></table></figure><p>确认结果如下图所示则安装成功 ：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-bandwidthTest.png" alt="CUDA-bandwidthTest"></p><hr><h2 id="安装cuDNN"><a class="header-anchor" href="#安装cuDNN">¶</a>安装cuDNN</h2><p>（1）. 下载cuDNN</p><p>可以从<a href="https://developer.nvidia.com/cudnn">英伟达官网</a>下载，一般注册第二天就通过。</p><p>注意，<strong>建议使用cudnn v3 或 cudnn v2版本，我试验的v5最新版一直报错</strong>。</p><p><strong>这里给出我的百度云盘下载地址：</strong><br>链接：<a href="http://pan.baidu.com/s/1c2p8NcO">http://pan.baidu.com/s/1c2p8NcO</a> 密码：em3w</p><p>（2）. 安装<br>解压下载好的文件，一般在文件所在的目录会出现一个cuda的新文件夹：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xzvf cudnn-7.5-linux-x64-v3.0-rc.tgz</span><br><span class="line">$ cd cudnn/lib64/</span><br><span class="line">$ sudo cp lib* /usr/local/cuda/lib64/</span><br><span class="line">$ cd ..</span><br><span class="line">$ cd include</span><br><span class="line">$ sudo cp cudnn.h /usr/local/cuda/include</span><br></pre></td></tr></tbody></table></figure><p>（3）. 重新编译caffe<br>在~/caffe/Makefile.config中，去掉 USE_CUDNN := 1的注释，重新加上CPU_ONLY:= 1的注释然后重新编译caffe即可。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ make clean # 第一次编译不用这句，出错时也可使用这句。</span><br><span class="line">$ make all</span><br><span class="line">$ make test</span><br><span class="line">$ make runtest </span><br></pre></td></tr></tbody></table></figure><h3 id="注意"><a class="header-anchor" href="#注意">¶</a>注意</h3><p>当进行 <code>make all</code> 操作时，可能会出现如下错误：</p><blockquote><p>CXX/LD -o .build_release/tools/convert_imageset.bin<br>.build_release/lib/libcaffe.so: undefined reference to cv::imread(cv::String const&amp;, int)’<br>.build_release/lib/libcaffe.so: undefined reference tocv::imencode(cv::String const&amp;, cv::_InputArray const&amp;, std::vector &gt;&amp;, std::vector &gt; const&amp;)’</p></blockquote><p><strong>原因就是opencv3.0.0把imread相关函数放到imgcodecs.lib中了，而非原来的imgproc.lib</strong></p><p><strong>解决办法：修改Makefile文件（不是Makefile.config）：</strong></p><p><strong>在位置{ (LIBRARIES += glog gflags protobuf leveldb snappy lmdb boost_system hdf5_hl hdf5 m opencv_core opencv_highgui opencv_imgproc opencv_imgcodecs) }处添加opencv_imgcodecs</strong></p><p>修复错误重新执行上述代码，成功后的截图如下所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-runtest.png" alt="CUDA-runtest"></p><hr><h2 id="配置pycaffe"><a class="header-anchor" href="#配置pycaffe">¶</a>配置pycaffe</h2><p>（1）. 安装依赖库</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python-numpy python-scipy python-matplotlib python-sklearn python-skimage python-h5py python-protobuf python-leveldb python-networkx python-nose python-pandas python-gflags Cython ipython</span><br><span class="line"></span><br><span class="line">$ sudo apt-get install protobuf-c-compiler protobuf-compiler</span><br></pre></td></tr></tbody></table></figure><p>（2）. 编译</p><p>进入caffe目录，编译pycaffe</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/caffe</span><br><span class="line">$ make pycaffe</span><br></pre></td></tr></tbody></table></figure><p>（3）. 修改环境变量</p><p>添加caffe目录下的python地址到$PYTHONPATH</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gedit /etc/profile # 末尾添加： export PYTHONPATH = caffe目录下的python地址:$PYTHONPATH，用完整路径，不要用~</span><br><span class="line"></span><br><span class="line">$ source /etc/profile # 使之生效</span><br></pre></td></tr></tbody></table></figure><p>（4）. 测试</p><p>在terminal进入python,import caffe 如果没错说明安装成功，效果如图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-import-caffe.png" alt="CUDA-import-caffe.png"></p><hr><h2 id="使用MNIST数据集进行测试"><a class="header-anchor" href="#使用MNIST数据集进行测试">¶</a>使用MNIST数据集进行测试</h2><p>切换至caffe目录下，下面的工作主要是：用于测试Caffe是否工作正常，不做详细评估。具体设置请参考官网：<a href="http://caffe.berkeleyvision.org/gathered/examples/mnist.html">MNIST数据集在Caffe中的测试 。</a></p><ul><li>数据预处理</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh data/mnist/get_mnist.sh</span><br></pre></td></tr></tbody></table></figure><ul><li>重建lmdb/leveldb文件。Caffe支持三种数据格式输入网络，包括Image(.jpg,<br>.png等)，leveldb，lmdb，根据自己需要选择不同输入吧。</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh examples/mnist/create_mnist.sh</span><br></pre></td></tr></tbody></table></figure><p>生成mnist-train-lmdb 和 mnist-train-lmdb文件夹，这里包含了lmdb格式的数据集</p><ul><li>训练mnist</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh examples/mnist/train_lenet.sh</span><br></pre></td></tr></tbody></table></figure><p>这时你会在终端窗口中看到caffe的训练过程</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-training.png" alt="CUDA-training"></p><hr><h2 id="使用CIFAR-10数据集进行测试"><a class="header-anchor" href="#使用CIFAR-10数据集进行测试">¶</a>使用CIFAR-10数据集进行测试</h2><p><strong>CIFAR-10数据集</strong>: 含有6万个32*32的彩色图像，共分为10种类型，由 Alex Krizhevsky, Vinod Nair和 Geoffrey Hinton收集而来。包含50000张训练图片，10000张测试图片, 详细参考地址见:  <a href="http://www.cs.toronto.edu/~kriz/cifar.html">The CIFAR-10 dataset</a></p><ul><li>首先切换至caffe目录下: <code>$ cd caffe</code>;</li><li>准备数据集( 在caffe目录下执行): <code>$  ./data/cifar10/get_cifar10.sh</code>;</li><li>执行: <code>./examples/cifar10/create_cifar10.sh</code>   ## 将图片库转成leveldb格式，并计算均值二进制文件;</li><li>模型训练: <code>./examples/cifar10/train_quick.sh</code></li></ul><p>结果如下图所示:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/CUDA-cifar10-caffe.png" alt="CUDA-cifar10-caffe"></p><hr><h2 id="参考文献"><a class="header-anchor" href="#参考文献">¶</a>参考文献</h2><p>(1): <a href="http://caffe.berkeleyvision.org/install_apt.html">http://caffe.berkeleyvision.org/install_apt.html</a><br>(2): <a href="http://blog.csdn.net/mduanfire/article/details/50931989">http://blog.csdn.net/mduanfire/article/details/50931989</a><br>(3): <a href="http://blog.csdn.net/mduanfire/article/details/50492939">http://blog.csdn.net/mduanfire/article/details/50492939</a><br>(4): <a href="https://developer.nvidia.com/cuda-gpus">https://developer.nvidia.com/cuda-gpus</a><br>(5): <a href="https://developer.nvidia.com/cuda-toolkit">https://developer.nvidia.com/cuda-toolkit</a><br>(6): <a href="http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html#running-binaries__valid-results-from-sample-cuda-devicequery-program">http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html#running-binaries__valid-results-from-sample-cuda-devicequery-program</a><br>(7): <a href="https://developer.nvidia.com/cudnnhttp://caffe.berkeleyvision.org/install_apt.html">https://developer.nvidia.com/cudnnhttp://caffe.berkeleyvision.org/install_apt.html</a><br>(8): <a href="https://developer.nvidia.com/cudnn">https://developer.nvidia.com/cudnn</a><br>(9): <a href="http://blog.csdn.net/u013915633/article/details/49867947">http://blog.csdn.net/u013915633/article/details/49867947</a><br>(10): <a href="http://www.th7.cn/system/lin/201504/103304.shtml">http://www.th7.cn/system/lin/201504/103304.shtml</a><br>(11): <a href="https://github.com/Zhangjd/graduation-project/issues/1">https://github.com/Zhangjd/graduation-project/issues/1</a><br>(12): <a href="https://github.com/BVLC/caffe/issues/2348">https://github.com/BVLC/caffe/issues/2348</a></p><p><strong>END</strong></p>]]></content>
      
      
      <categories>
          
          <category> Deep Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Caffe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android使用Fragment实现底部导航栏</title>
      <link href="/2016/03/20/Android%E4%BD%BF%E7%94%A8Fragment%E5%AE%9E%E7%8E%B0%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F/"/>
      <url>/2016/03/20/Android%E4%BD%BF%E7%94%A8Fragment%E5%AE%9E%E7%8E%B0%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>在做移动开发过程中底部导航栏是十分常见的功能，且市面上见到的做法也有很多种，这篇博文记录一下使用Fragment实现底部导航栏的功能，算是对这几天学习Android做的Demo的一个总结吧。</p><p>好久不敲代码，确实生疏不少。现在发现使用博客记录自己平时的学习资料，节省了很多搜集资料的时间，是一个很好的学习方法。</p><hr><h2 id="说明"><a class="header-anchor" href="#说明">¶</a>说明</h2><p>1: IDE：AS，Android studio;<br>2: 模拟器：genymotion;<br>3: 实现的效果，见下图。</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-show1.jpg" alt="Fragment-show1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-show2.jpg" alt="Fragment-show2"></p><hr><h2 id="具体实现"><a class="header-anchor" href="#具体实现">¶</a>具体实现</h2><p>为了讲明白这个实现过程，我们贴出来的代码多一写，这样更方便理解 [最后还会放出完整的代码实现] 。看上图的界面做的比较粗糙，但实现过程的骨架都具有了，想要更完美的设计，之后自行完善吧 <sup>0</sup>。</p><h3 id="布局"><a class="header-anchor" href="#布局">¶</a>布局</h3><p>通过观察上述效果图，发现任意一个选项页面都有三部分组成：</p><p>1: 顶部去除ActionBar后的标题栏；<br>2: 中间一个FragmentLayout用来放相应的Fragment；<br>3: 底部一个大的LinearLayout放着四个样式一样的（ImagView + TextView）的小Item。</p><p>(1) 完整具体的代码，详见：<code>show_main_lay.xml</code>，通过注释可以看到该布局的三部分组成。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@color/colorAccent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--1. 顶部标题栏--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/show_main_title"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">"@layout/title_layout"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2. 存放四个Fragment--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@color/whitesmoke"</span>&gt;</span><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--3. 底部的四个选项菜单--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"60dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"#FFFFFF"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--四个部分都一样：ImageView + TextView--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/first_layout"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/first_image"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:src</span>=<span class="string">"@android:drawable/ic_menu_compass"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/first_text"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">"消息"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">"#7597B3"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/second_layout"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/second_image"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:src</span>=<span class="string">"@android:drawable/ic_menu_agenda"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/second_text"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">"发现"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">"#7597B3"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/third_layout"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/third_image"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:src</span>=<span class="string">"@android:drawable/ic_menu_edit"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/third_text"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">"记录"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">"#7597B3"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/fourth_layout"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/fourth_image"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:src</span>=<span class="string">"@android:drawable/ic_menu_myplaces"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">"@+id/fourth_text"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">"我的"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">"#7597B3"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>附上源码截图吧：<br><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-main.png" alt="Fragment-main"></p><hr><p>(2) 对于布局的第一部分的顶部标题栏，代码请见：<code>title_layout.xml</code>:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"56dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@color/colorPrimaryDark"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/title_imv"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"30dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@android:drawable/ic_menu_more"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/title_text_tv"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"首 页"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/bg_color"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>见下截图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-title.png" alt="Fragment-title"></p><hr><p>(3) 布局中间的第二部分我们再分别建立4个.xml布局文件，分别命名为：<code>fg1.xml、fg2.xml、fg3.xml、fg4.xml</code>，内容上只更改一下TextView中的文字说明，如第一个页面，改为第二个页面。下面只给出其中一个<code>fg1.xml</code>：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@color/aquamarine"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"第二个页面"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"22sp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>如图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-fg1.png" alt="Fragment-fg1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-fg2.png" alt="Fragment-fg2"></p><hr><p>（4） 这里也给出<code>Values</code>目录下的<code>colors.xml</code>内容吧，颜色还是比较完整的但是名字不好记：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>#3F51B5<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>#303F9F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>#FF4081<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"bg_color"</span>&gt;</span>#EDEDED<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"contents_text"</span>&gt;</span>#ff000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"encode_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"help_button_view"</span>&gt;</span>#ffcccccc<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"help_view"</span>&gt;</span>#ff404040<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"possible_result_points"</span>&gt;</span>#c0ffff00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_image_border"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_minor_text"</span>&gt;</span>#ffc0c0c0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_points"</span>&gt;</span>#c000ff00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_text"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_view"</span>&gt;</span>#b0000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_header_text"</span>&gt;</span>#ff808080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_header_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_list_item"</span>&gt;</span>#fffff0e0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_layout_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_page_number_text"</span>&gt;</span>#ff000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_snippet_text"</span>&gt;</span>#ff4b4b4b<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"share_text"</span>&gt;</span>#ff000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"share_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"status_view"</span>&gt;</span>#50000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"status_text"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"transparent"</span>&gt;</span>#00000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"viewfinder_frame"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"viewfinder_laser"</span>&gt;</span>#ffff0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"viewfinder_mask"</span>&gt;</span>#60000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"header"</span>&gt;</span>#58567D<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"grgray"</span>&gt;</span>#686868<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"white"</span>&gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"ivory"</span>&gt;</span>#FFFFF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--象牙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightyellow"</span>&gt;</span>#FFFFE0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"yellow"</span>&gt;</span>#FFFF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"snow"</span>&gt;</span>#FFFAFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--雪白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"floralwhite"</span>&gt;</span>#FFFAF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--花白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lemonchiffon"</span>&gt;</span>#FFFACD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--柠檬绸色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cornsilk"</span>&gt;</span>#FFF8DC<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--米绸色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"seashell"</span>&gt;</span>#FFF5EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--海贝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lavenderblush"</span>&gt;</span>#FFF0F5<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--淡紫红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"papayawhip"</span>&gt;</span>#FFEFD5<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--番木色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blanchedalmond"</span>&gt;</span>#FFEBCD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--白杏色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mistyrose"</span>&gt;</span>#FFE4E1<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--浅玫瑰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"bisque"</span>&gt;</span>#FFE4C4<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--桔黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"moccasin"</span>&gt;</span>#FFE4B5<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--鹿皮色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"navajowhite"</span>&gt;</span>#FFDEAD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--纳瓦白 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"peachpuff"</span>&gt;</span>#FFDAB9<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--桃色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gold"</span>&gt;</span>#FFD700<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--金色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"pink"</span>&gt;</span>#FFC0CB<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightpink"</span>&gt;</span>#FFB6C1<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orange"</span>&gt;</span>#FFA500<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--橙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightsalmon"</span>&gt;</span>#FFA07A<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮肉色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkorange"</span>&gt;</span>#FF8C00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗桔黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"coral"</span>&gt;</span>#FF7F50<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--珊瑚色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"hotpink"</span>&gt;</span>#FF69B4<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--热粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"tomato"</span>&gt;</span>#FF6347<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--西红柿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orangered"</span>&gt;</span>#FF4500<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--红橙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"deeppink"</span>&gt;</span>#FF1493<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--深粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"fuchsia"</span>&gt;</span>#FF00FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--紫红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"magenta"</span>&gt;</span>#FF00FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--红紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"red"</span>&gt;</span>#FF0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"oldlace"</span>&gt;</span>#FDF5E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--老花色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightgoldenyellow"</span>&gt;</span>#FAFAD2<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮金黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"linen"</span>&gt;</span>#FAF0E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亚麻色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"antiquewhite"</span>&gt;</span>#FAEBD7<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--古董白 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"salmon"</span>&gt;</span>#FA8072<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--鲜肉色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"ghostwhite"</span>&gt;</span>#F8F8FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--幽灵白 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mintcream"</span>&gt;</span>#F5FFFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--薄荷色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"whitesmoke"</span>&gt;</span>#F5F5F5<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--烟白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"beige"</span>&gt;</span>#F5F5DC<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--米色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"wheat"</span>&gt;</span>#F5DEB3<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--浅黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sandybrown"</span>&gt;</span>#F4A460<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--沙褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"azure"</span>&gt;</span>#F0FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--天蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"honeydew"</span>&gt;</span>#F0FFF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--蜜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"aliceblue"</span>&gt;</span>#F0F8FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--艾利斯兰 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"khaki"</span>&gt;</span>#F0E68C<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--黄褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightcoral"</span>&gt;</span>#F08080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮珊瑚色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"palegoldenrod"</span>&gt;</span>#EEE8AA<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--苍麒麟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"violet"</span>&gt;</span>#EE82EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--紫罗兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darksalmon"</span>&gt;</span>#E9967A<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗肉色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lavender"</span>&gt;</span>#E6E6FA<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--淡紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightcyan"</span>&gt;</span>#E0FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"burlywood"</span>&gt;</span>#DEB887<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--实木色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"plum"</span>&gt;</span>#DDA0DD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--洋李色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gainsboro"</span>&gt;</span>#DCDCDC<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--淡灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"crimson"</span>&gt;</span>#DC143C<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗深红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"palevioletred"</span>&gt;</span>#DB7093<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--苍紫罗兰色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"goldenrod"</span>&gt;</span>#DAA520<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--金麒麟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orchid"</span>&gt;</span>#DA70D6<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--淡紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"thistle"</span>&gt;</span>#D8BFD8<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--蓟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightgray"</span>&gt;</span>#D3D3D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightgrey"</span>&gt;</span>#D3D3D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"tan"</span>&gt;</span>#D2B48C<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--茶色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"chocolate"</span>&gt;</span>#D2691E<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--巧可力色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"peru"</span>&gt;</span>#CD853F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--秘鲁色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"indianred"</span>&gt;</span>#CD5C5C<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--印第安红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumvioletred"</span>&gt;</span>#C71585<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中紫罗兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"silver"</span>&gt;</span>#C0C0C0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--银色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkkhaki"</span>&gt;</span>#BDB76B<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 暗黄褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"rosybrown"</span>&gt;</span>#BC8F8F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--褐玫瑰红--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumorchid"</span>&gt;</span>#BA55D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中粉紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkgoldenrod"</span>&gt;</span>#B8860B<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗金黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"firebrick"</span>&gt;</span>#B22222<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--火砖色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"powderblue"</span>&gt;</span>#B0E0E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--粉蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightsteelblue"</span>&gt;</span>#B0C4DE<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮钢兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"paleturquoise"</span>&gt;</span>#AFEEEE<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--苍宝石绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"greenyellow"</span>&gt;</span>#ADFF2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--黄绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightblue"</span>&gt;</span>#ADD8E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkgray"</span>&gt;</span>#A9A9A9<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkgrey"</span>&gt;</span>#A9A9A9<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"brown"</span>&gt;</span>#A52A2A<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sienna"</span>&gt;</span>#A0522D<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--赭色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkorchid"</span>&gt;</span>#9932CC<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"palegreen"</span>&gt;</span>#98FB98<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--苍绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkviolet"</span>&gt;</span>#9400D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗紫罗兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumpurple"</span>&gt;</span>#9370DB<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightgreen"</span>&gt;</span>#90EE90<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkseagreen"</span>&gt;</span>#8FBC8F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗海兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"saddlebrown"</span>&gt;</span>#8B4513<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--重褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkmagenta"</span>&gt;</span>#8B008B<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗洋红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkred"</span>&gt;</span>#8B0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blueviolet"</span>&gt;</span>#8A2BE2<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--紫罗兰蓝色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightskyblue"</span>&gt;</span>#87CEFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮天蓝色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"skyblue"</span>&gt;</span>#87CEEB<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--天蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray"</span>&gt;</span>#808080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"grey"</span>&gt;</span>#808080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"olive"</span>&gt;</span>#808000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--橄榄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"purple"</span>&gt;</span>#800080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"maroon"</span>&gt;</span>#800000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--粟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"aquamarine"</span>&gt;</span>#7FFFD4<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--碧绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"chartreuse"</span>&gt;</span>#7FFF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--黄绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lawngreen"</span>&gt;</span>#7CFC00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--草绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumslateblue"</span>&gt;</span>#7B68EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中暗蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightslategray"</span>&gt;</span>#778899<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮蓝灰 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightslategrey"</span>&gt;</span>#778899<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮蓝灰 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"slategray"</span>&gt;</span>#708090<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--灰石色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"slategrey"</span>&gt;</span>#708090<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--灰石色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"olivedrab"</span>&gt;</span>#6B8E23<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--深绿褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"slateblue"</span>&gt;</span>#6A5ACD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--石蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"dimgray"</span>&gt;</span>#696969<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"dimgrey"</span>&gt;</span>#696969<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumaquamarine"</span>&gt;</span>#66CDAA<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中绿色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cornflowerblue"</span>&gt;</span>#6495ED<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--菊兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cadetblue"</span>&gt;</span>#5F9EA0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--军兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkolivegreen"</span>&gt;</span>#556B2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗橄榄绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"indigo"</span>&gt;</span>#4B0082<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--靛青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumturquoise"</span>&gt;</span>#48D1CC<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中绿宝石--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkslateblue"</span>&gt;</span>#483D8B<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗灰蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"steelblue"</span>&gt;</span>#4682B4<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--钢兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"royalblue"</span>&gt;</span>#4169E1<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--皇家蓝 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"turquoise"</span>&gt;</span>#40E0D0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--青绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumseagreen"</span>&gt;</span>#3CB371<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中海蓝 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"limegreen"</span>&gt;</span>#32CD32<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--橙绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkslategray"</span>&gt;</span>#2F4F4F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗瓦灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkslategrey"</span>&gt;</span>#2F4F4F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗瓦灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"seagreen"</span>&gt;</span>#2E8B57<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--海绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"forestgreen"</span>&gt;</span>#228B22<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--森林绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightseagreen"</span>&gt;</span>#20B2AA<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--亮海蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"dodgerblue"</span>&gt;</span>#1E90FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--闪兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"midnightblue"</span>&gt;</span>#191970<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中灰兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"aqua"</span>&gt;</span>#00FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--浅绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cyan"</span>&gt;</span>#00FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"springgreen"</span>&gt;</span>#00FF7F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--春绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lime"</span>&gt;</span>#00FF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--酸橙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumspringgreen"</span>&gt;</span>#00FA9A<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中春绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkturquoise"</span>&gt;</span>#00CED1<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗宝石绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"deepskyblue"</span>&gt;</span>#00BFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--深天蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkcyan"</span>&gt;</span>#008B8B<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"teal"</span>&gt;</span>#008080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--水鸭色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"green"</span>&gt;</span>#008000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkgreen"</span>&gt;</span>#006400<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blue"</span>&gt;</span>#0000FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumblue"</span>&gt;</span>#0000CD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--中兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkblue"</span>&gt;</span>#00008B<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--暗蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"navy"</span>&gt;</span>#000080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--海军色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"black"</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--黑色 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>如图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-color.png" alt="Fragment-color"></p><p>那么到这里我们的界面布局就基本完成了！</p><hr><h3 id="相应Fragment的实现类"><a class="header-anchor" href="#相应Fragment的实现类">¶</a>相应Fragment的实现类</h3><p>接下来我们需要写四个相应的<code>Fragment</code>的实现类，同样拷贝4份，改用<code>inflate</code>加载Fragment即可。即，包含四个差不多一样的Fragment,分别起名为：<code>FirstFragment.java、SecondFragment.java、ThirdFragment.java、FourthFragment.java</code>。</p><p>下面主要展示一下<code>FirstFragment.java</code>的具体代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dm.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by dm on 16-3-29.</span></span><br><span class="line"><span class="comment"> * 第一个页面</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FirstFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> {</span><br><span class="line"></span><br><span class="line">        <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> inflater.inflate(R.layout.fg1, container, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>如图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-FirstFragment.png" alt="Fragment-FirstFragment"></p><hr><h3 id="最重要的MainActivity"><a class="header-anchor" href="#最重要的MainActivity">¶</a>最重要的MainActivity</h3><p>各个七零八落的小部件都已经准备到序了，现在只剩下这个主界面实现类把他们融合在一起，实现相应的效果了。MainActivity.java 的编写也很简单，直接看代码和注释就可以了，不多解释额：主要包含几个初始化方法、选中处理、隐藏所有Fragment的方法。详见MainActivity.java：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dm.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentActivity;   <span class="comment">// 注意这里我们导入的V4的包，不要导成app的包了</span></span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentManager;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentTransaction;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.FrameLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.RelativeLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 主页面内容</span></span><br><span class="line"><span class="comment"> * Created by dm on 16-1-19.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">FragmentActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener {</span><br><span class="line">    <span class="comment">// 初始化顶部栏显示</span></span><br><span class="line">    <span class="keyword">private</span> ImageView titleLeftImv;</span><br><span class="line">    <span class="keyword">private</span> TextView titleTv;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义4个Fragment对象</span></span><br><span class="line">    <span class="keyword">private</span> FirstFragment fg1;</span><br><span class="line">    <span class="keyword">private</span> SecondFragment fg2;</span><br><span class="line">    <span class="keyword">private</span> ThirdFragment fg3;</span><br><span class="line">    <span class="keyword">private</span> FourthFragment fg4;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 帧布局对象，用来存放Fragment对象</span></span><br><span class="line">    <span class="keyword">private</span> FrameLayout frameLayout;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义每个选项中的相关控件</span></span><br><span class="line">    <span class="keyword">private</span> RelativeLayout firstLayout;</span><br><span class="line">    <span class="keyword">private</span> RelativeLayout secondLayout;</span><br><span class="line">    <span class="keyword">private</span> RelativeLayout thirdLayout;</span><br><span class="line">    <span class="keyword">private</span> RelativeLayout fourthLayout;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ImageView firstImage;</span><br><span class="line">    <span class="keyword">private</span> ImageView secondImage;</span><br><span class="line">    <span class="keyword">private</span> ImageView thirdImage;</span><br><span class="line">    <span class="keyword">private</span> ImageView fourthImage;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView firstText;</span><br><span class="line">    <span class="keyword">private</span> TextView secondText;</span><br><span class="line">    <span class="keyword">private</span> TextView thirdText;</span><br><span class="line">    <span class="keyword">private</span> TextView fourthText;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义几个颜色</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">whirt</span> <span class="operator">=</span> <span class="number">0xFFFFFFFF</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">gray</span> <span class="operator">=</span> <span class="number">0xFF7597B3</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">dark</span> <span class="operator">=</span> <span class="number">0xff000000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义FragmentManager对象管理器</span></span><br><span class="line">    <span class="keyword">private</span> FragmentManager fragmentManager;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> {</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.show_main_lay);</span><br><span class="line"></span><br><span class="line">        fragmentManager = getSupportFragmentManager();</span><br><span class="line">        initView(); <span class="comment">// 初始化界面控件</span></span><br><span class="line"></span><br><span class="line">        setChioceItem(<span class="number">0</span>);   <span class="comment">// 初始化页面加载时显示第一个选项卡</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化页面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// 初始化页面标题栏</span></span><br><span class="line">        titleLeftImv = (ImageView) findViewById(R.id.title_imv);</span><br><span class="line">        titleLeftImv.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line">                startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>, LoginActivity.class));</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        titleTv = (TextView) findViewById(R.id.title_text_tv);</span><br><span class="line">        titleTv.setText(<span class="string">"首 页"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化底部导航栏的控件</span></span><br><span class="line">        firstImage = (ImageView) findViewById(R.id.first_image);</span><br><span class="line">        secondImage = (ImageView) findViewById(R.id.second_image);</span><br><span class="line">        thirdImage = (ImageView) findViewById(R.id.third_image);</span><br><span class="line">        fourthImage = (ImageView) findViewById(R.id.fourth_image);</span><br><span class="line"></span><br><span class="line">        firstText = (TextView) findViewById(R.id.first_text);</span><br><span class="line">        secondText = (TextView) findViewById(R.id.second_text);</span><br><span class="line">        thirdText = (TextView) findViewById(R.id.third_text);</span><br><span class="line">        fourthText = (TextView) findViewById(R.id.fourth_text);</span><br><span class="line"></span><br><span class="line">        firstLayout = (RelativeLayout) findViewById(R.id.first_layout);</span><br><span class="line">        secondLayout = (RelativeLayout) findViewById(R.id.second_layout);</span><br><span class="line">        thirdLayout = (RelativeLayout) findViewById(R.id.third_layout);</span><br><span class="line">        fourthLayout = (RelativeLayout) findViewById(R.id.fourth_layout);</span><br><span class="line"></span><br><span class="line">        firstLayout.setOnClickListener(MainActivity.<span class="built_in">this</span>);</span><br><span class="line">        secondLayout.setOnClickListener(MainActivity.<span class="built_in">this</span>);</span><br><span class="line">        thirdLayout.setOnClickListener(MainActivity.<span class="built_in">this</span>);</span><br><span class="line">        fourthLayout.setOnClickListener(MainActivity.<span class="built_in">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line">        <span class="keyword">switch</span> (v.getId()) {</span><br><span class="line">            <span class="keyword">case</span> R.id.first_layout:</span><br><span class="line">                setChioceItem(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.second_layout:</span><br><span class="line">                setChioceItem(<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.third_layout:</span><br><span class="line">                setChioceItem(<span class="number">2</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.fourth_layout:</span><br><span class="line">                setChioceItem(<span class="number">3</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置点击选项卡的事件处理</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 选项卡的标号：0, 1, 2, 3</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setChioceItem</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">        <span class="type">FragmentTransaction</span> <span class="variable">fragmentTransaction</span> <span class="operator">=</span> fragmentManager.beginTransaction();</span><br><span class="line">        clearChioce(); <span class="comment">// 清空, 重置选项, 隐藏所有Fragment</span></span><br><span class="line">        hideFragments(fragmentTransaction);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (index) {</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"><span class="comment">//                firstImage.setImageResource(R.drawable.XXXX); 需要的话自行修改</span></span><br><span class="line">                firstText.setTextColor(dark);</span><br><span class="line">                firstLayout.setBackgroundColor(gray);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 如果fg1为空，则创建一个并添加到界面上</span></span><br><span class="line">                <span class="keyword">if</span> (fg1 == <span class="literal">null</span>) {</span><br><span class="line">                    fg1 = <span class="keyword">new</span> <span class="title class_">FirstFragment</span>();</span><br><span class="line">                    fragmentTransaction.add(R.id.content, fg1);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="comment">// 如果不为空，则直接将它显示出来</span></span><br><span class="line">                    fragmentTransaction.show(fg1);</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="comment">//                secondImage.setImageResource(R.drawable.XXXX);</span></span><br><span class="line">                secondText.setTextColor(dark);</span><br><span class="line">                secondLayout.setBackgroundColor(gray);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (fg2 == <span class="literal">null</span>) {</span><br><span class="line">                    fg2 = <span class="keyword">new</span> <span class="title class_">SecondFragment</span>();</span><br><span class="line">                    fragmentTransaction.add(R.id.content, fg2);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    fragmentTransaction.show(fg2);</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="comment">//                thirdImage.setImageResource(R.drawable.XXXX);</span></span><br><span class="line">                thirdText.setTextColor(dark);</span><br><span class="line">                thirdLayout.setBackgroundColor(gray);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (fg3 == <span class="literal">null</span>) {</span><br><span class="line">                    fg3 = <span class="keyword">new</span> <span class="title class_">ThirdFragment</span>();</span><br><span class="line">                    fragmentTransaction.add(R.id.content, fg3);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    fragmentTransaction.show(fg3);</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="comment">//                fourthImage.setImageResource(R.drawable.XXXX);</span></span><br><span class="line">                fourthText.setTextColor(dark);</span><br><span class="line">                fourthLayout.setBackgroundColor(gray);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (fg4 == <span class="literal">null</span>) {</span><br><span class="line">                    fg4 = <span class="keyword">new</span> <span class="title class_">FourthFragment</span>();</span><br><span class="line">                    fragmentTransaction.add(R.id.content, fg4);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    fragmentTransaction.show(fg4);</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        fragmentTransaction.commit();   <span class="comment">// 提交</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当选中其中一个选项卡时，其他选项卡重置为默认</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">clearChioce</span><span class="params">()</span> {</span><br><span class="line"><span class="comment">//        firstImage.setImageResource(R.drawable.XXX);</span></span><br><span class="line">        firstText.setTextColor(gray);</span><br><span class="line">        firstLayout.setBackgroundColor(whirt);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        secondImage.setImageResource(R.drawable.XXX);</span></span><br><span class="line">        secondText.setTextColor(gray);</span><br><span class="line">        secondLayout.setBackgroundColor(whirt);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//        thirdImage.setImageResource(R.drawable.XXX);</span></span><br><span class="line">        thirdText.setTextColor(gray);</span><br><span class="line">        thirdLayout.setBackgroundColor(whirt);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//        fourthImage.setImageResource(R.drawable.XXX);</span></span><br><span class="line">        fourthText.setTextColor(gray);</span><br><span class="line">        fourthLayout.setBackgroundColor(whirt);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 隐藏Fragment</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fragmentTransaction</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">hideFragments</span><span class="params">(FragmentTransaction fragmentTransaction)</span> {</span><br><span class="line">        <span class="keyword">if</span> (fg1 != <span class="literal">null</span>) {</span><br><span class="line">            fragmentTransaction.hide(fg1);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fg2 != <span class="literal">null</span>) {</span><br><span class="line">            fragmentTransaction.hide(fg2);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fg3 != <span class="literal">null</span>) {</span><br><span class="line">            fragmentTransaction.hide(fg3);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fg4 != <span class="literal">null</span>) {</span><br><span class="line">            fragmentTransaction.hide(fg4);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>见图：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Fragment-MainActivity.png" alt="Fragment-MainActivity"></p><p>到这里我们的功能就基本实现了，是不是还挺简单的。</p><hr><h3 id="注意"><a class="header-anchor" href="#注意">¶</a>注意</h3><blockquote><p>Fragment相关类导入的时候是v4包还是app包！我们这里导入的是V4的包，在代码的注释部分，已经给出说明；<br>在完整的代码包中，我们还添加了App启动界面及动画、登录界面，这两部分的内容，这里不做具体的说明，之后继续完善。</p></blockquote><h2 id="参考资料"><a class="header-anchor" href="#参考资料">¶</a>参考资料</h2><p>（1） <a href="http://www.android100.org/html/201502/16/119643.html">http://www.android100.org/html/201502/16/119643.html</a><br>（2） <a href="http://blog.sina.com.cn/s/blog_4e1e357d0101b3di.html">http://blog.sina.com.cn/s/blog_4e1e357d0101b3di.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu14.04 LTS 系统中Opencv 3.0开发环境的搭建</title>
      <link href="/2016/03/19/Ubuntu14-04-LTS-%E7%B3%BB%E7%BB%9F%E4%B8%ADOpencv-3-0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/"/>
      <url>/2016/03/19/Ubuntu14-04-LTS-%E7%B3%BB%E7%BB%9F%E4%B8%ADOpencv-3-0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>本文的方法基本上是参考这篇文章完成的，<a href="http://blog.csdn.net/u013915633/article/details/49886465">参考文章</a></p><p>感谢分享。使用源码编译安装的方法很简单，着实比在windows中配置简明多了，按部就班直接安装就OK了。</p><hr><h2 id="安装基本编译环境"><a class="header-anchor" href="#安装基本编译环境">¶</a>安装基本编译环境</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install build-essential</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="安装相关依赖库"><a class="header-anchor" href="#安装相关依赖库">¶</a>安装相关依赖库</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev</span><br><span class="line"></span><br><span class="line">$ sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="下载OpenCV-3-0"><a class="header-anchor" href="#下载OpenCV-3-0">¶</a>下载OpenCV 3.0</h2><p>下载使用 wget 工具，解压使用 unzip， 如果没有安装，请使用如下代码安装：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install wget</span><br><span class="line">$ sudo apt-get install unzip</span><br></pre></td></tr></tbody></table></figure><p>也可以在我分享的360云盘中下载，详见： <a href="https://yunpan.cn/cYXhANVZauByi">https://yunpan.cn/cYXhANVZauByi</a>  访问密码 2aee</p><p>alpha版本：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~/opencv                # 新建opencv目录</span><br><span class="line">$ cd opencv/                    # 切换至opencv目录下</span><br><span class="line">$ wget https://github.com/Itseez/opencv/archive/3.0.0-alpha.zip -O opencv-3.0.0-alpha.zip          # 使用wget下载源码</span><br><span class="line">$ unzip opencv-3.0.0-alpha.zip  # 解压下载文件 </span><br></pre></td></tr></tbody></table></figure><hr><h2 id="安装OpenCV"><a class="header-anchor" href="#安装OpenCV">¶</a>安装OpenCV</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/opencv/opencv-3.0.0-alpha       # 切换至源码目录</span><br><span class="line">$ cmake .                              # cmake+空格+"."</span><br><span class="line">$ sudo make                   </span><br><span class="line">$ sudo make install         </span><br><span class="line">$ sudo /bin/bash -c 'echo "/usr/local/lib" &gt; /etc/ld.so.conf.d/opencv.conf'  </span><br><span class="line">$ sudo ldconfig</span><br></pre></td></tr></tbody></table></figure><p><strong>注：如果cmake过程中提示：ippicv_linux_20141027.tgz的hash码不对，则将下载的ippicv_linux_20141027.tgz手动复制到 opencv-3.0.0-beta/3rdparty/ippicv/downloads/linux-8b449a536a2157bcad08a2b9f266828b文件夹中，重新cmake即可</strong></p><hr><h2 id="编译samples程序"><a class="header-anchor" href="#编译samples程序">¶</a>编译samples程序</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/opencv/opencv-3.0.0-alpha/samples     # 切换至例程目录</span><br><span class="line">$ cmake .                                    # cmake+空格+"."</span><br><span class="line">$ sudo make -j $(nproc)</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="运行测试程序"><a class="header-anchor" href="#运行测试程序">¶</a>运行测试程序</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/opencv/opencv-3.0.0-alpha/samples/cpp    # 切换目录, 使用alpha版本，images在opencv/cpp文件夹下</span><br><span class="line">$  ./cpp-example-facedetect lena.jpg</span><br></pre></td></tr></tbody></table></figure><p>运行结果，如图所示：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/opencv-show.png" alt="opencv-show"></p><hr><h2 id="参考资源"><a class="header-anchor" href="#参考资源">¶</a>参考资源</h2><p>[1]. <a href="http://blog.csdn.net/u013915633/article/details/49886465">http://blog.csdn.net/u013915633/article/details/49886465</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> Linux Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> Opencv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android中图片保存到本地，并及时更新到系统相册</title>
      <link href="/2015/11/11/Android%E4%B8%AD%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E5%88%B0%E6%9C%AC%E5%9C%B0%EF%BC%8C%E5%B9%B6%E5%8F%8A%E6%97%B6%E6%9B%B4%E6%96%B0%E5%88%B0%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%86%8C/"/>
      <url>/2015/11/11/Android%E4%B8%AD%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E5%88%B0%E6%9C%AC%E5%9C%B0%EF%BC%8C%E5%B9%B6%E5%8F%8A%E6%97%B6%E6%9B%B4%E6%96%B0%E5%88%B0%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>由于各个手机厂商对原声Android系统的阉割，造成在各种手机上做测试时，通过App保存的图片不能迅速的显示在系统相册内。本实验所使用的测试机是红米2A(Ps: 雷神着实给手机阉割的很是难受啊，简直了), 可以完美的做到将图片保存到本地，并及时更新到系统相册.</p><p>国际惯例，先上代码</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 保存到指定目录，但能立即更新到系统相册中（红米2）</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> context    上下文环境</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> faceBitmap 位图资源</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> 保存图片的路径</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> String <span class="title function_">saveBitmapToJpg</span><span class="params">(Context context, Bitmap faceBitmap)</span> {</span><br><span class="line">       <span class="type">String</span> <span class="variable">sdStatus</span> <span class="operator">=</span> Environment.getExternalStorageState();</span><br><span class="line">       <span class="keyword">if</span> (!sdStatus.equals(Environment.MEDIA_MOUNTED)) {</span><br><span class="line">           Log.i(TAG, <span class="string">"SD *****&gt;&gt; SD卡不存在"</span>);</span><br><span class="line">       } <span class="keyword">else</span> {</span><br><span class="line">           Log.i(TAG, <span class="string">"SD *****&gt;&gt; SD卡 存在"</span>);</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 创建图片保存目录</span></span><br><span class="line">       <span class="type">File</span> <span class="variable">faceImgDir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(Environment.getExternalStorageDirectory(), <span class="string">"ForumAlbum"</span>);</span><br><span class="line">       <span class="keyword">if</span> (!faceImgDir.exists()) {</span><br><span class="line">           faceImgDir.mkdir();</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 以系统时间命名文件</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">faceImgName</span> <span class="operator">=</span> <span class="string">"forum-"</span> + String.valueOf(System.currentTimeMillis()) + <span class="string">".jpg"</span>;</span><br><span class="line">       <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(faceImgDir, faceImgName);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span> {</span><br><span class="line">           <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">           faceBitmap.compress(Bitmap.CompressFormat.JPEG, <span class="number">100</span>, fileOutputStream);</span><br><span class="line">           fileOutputStream.flush();</span><br><span class="line">           fileOutputStream.close();</span><br><span class="line">       } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 保存后要扫描一下文件，及时更新到系统目录（一定要加绝对路径，这样才能更新）</span></span><br><span class="line">       MediaScannerConnection.scanFile(context,</span><br><span class="line">               <span class="keyword">new</span> <span class="title class_">String</span>[]{Environment.getExternalStorageDirectory() + File.separator + <span class="string">"ForumAlbum"</span> + File.separator + faceImgName}, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> (Environment.getExternalStorageDirectory() + File.separator + <span class="string">"ForumAlbum"</span> + File.separator + faceImgName);</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure><p>注释已经比较清晰，就不啰嗦了</p><hr><h3 id="添加权限"><a class="header-anchor" href="#添加权限">¶</a>添加权限</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MOUNT_UNMOUNT_FILESYSTEMS"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><hr><h3 id="可能遇到的问题"><a class="header-anchor" href="#可能遇到的问题">¶</a>可能遇到的问题</h3><p>&lt; 1 &gt; 使用广播的问题：</p><p>在Android 4.4中或之后的版本，若采用如下方式更新系统相册：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mContext.sendBroadcast(<span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_MEDIA_MOUNTED, Uri.parse(<span class="string">"file://"</span>+ Environment.getExternalStorageDirectory())));</span><br></pre></td></tr></tbody></table></figure><p>将会抛出如下异常：(这是由Android 4.4中限制了系统应用才有权限使用广播通知系统扫描SD卡， 且这种方法耗时间)</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Permission Denial: not allowed to send broadcast android.intent.action.MEDIA_MOUNTED from pid=<span class="number">2269</span>, uid=<span class="number">20016</span></span><br></pre></td></tr></tbody></table></figure><hr><p>&lt; 2 &gt; 解决方案：</p><p>使用MediaScannerConnection对具体文件或文件夹进行扫描。</p><p><strong>（扫描文件夹方式在部分定制rom中无效，极力建议扫描具体文件）</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MediaScannerConnection.scanFile(<span class="built_in">this</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]{Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getPath() + <span class="string">"/"</span> + fileName}</span><br></pre></td></tr></tbody></table></figure><hr><p>END</p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> 图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android中github开源进度条类框架SmoothProgressBar的使用</title>
      <link href="/2015/09/16/Android%E4%B8%ADgithub%E5%BC%80%E6%BA%90%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%B1%BB%E6%A1%86%E6%9E%B6SmoothProgressBar%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2015/09/16/Android%E4%B8%ADgithub%E5%BC%80%E6%BA%90%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%B1%BB%E6%A1%86%E6%9E%B6SmoothProgressBar%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>SmoothProgressBar是Github上的一个开源框架， 牛人所著， 只作翻译；</p><p>开发环境：Android studio；Eclipse用户请直接进入项目首页，克隆源码。</p><p>Github项目主页：<a href="https://github.com/castorflex/SmoothProgressBar">SmoothProgressBar</a></p><p><a href="https://github.com/castorflex/SmoothProgressBar/blob/master/screenshots/SPB_sample.gif">有没有炫酷的Fell啊</a></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/SmoothProgressBar-show.png" alt="SmoothProgressBar-show"></p><hr><h3 id="详细配置使用说明"><a class="header-anchor" href="#详细配置使用说明">¶</a>详细配置使用说明</h3><h4 id="Maven-库添加"><a class="header-anchor" href="#Maven-库添加">¶</a>Maven 库添加</h4><p>作者已经将该库放在Maven Centra中了， 所以Android Studio 用户可直接进行如下配置：在“项目(project)”的build.gradle中添加如下代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">repositories {</span><br><span class="line">    maven {</span><br><span class="line">        url <span class="string">"https://oss.sonatype.org/content/repositories/snapshots/"</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在app文件夹的build.gradle文件中添加如下代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies {</span><br><span class="line">    compile <span class="string">'com.github.castorflex.smoothprogressbar:library:1.0.1-SNAPSHOT@aar'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><hr><h4 id="加入一些作者提供的Style吧"><a class="header-anchor" href="#加入一些作者提供的Style吧">¶</a>加入一些作者提供的Style吧</h4><p>在res/values/styles.xml文件中添加样式：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spbStyle"</span>&gt;</span>@style/SmoothProgressBar<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"GPlusProgressBar"</span> <span class="attr">parent</span>=<span class="string">"SmoothProgressBar"</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_stroke_separator_length"</span>&gt;</span>12dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_sections_count"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_speed"</span>&gt;</span>0.7<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_interpolator"</span>&gt;</span>spb_interpolator_linear<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_colors"</span>&gt;</span>@array/gplus_colors&lt;/item</span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"GNowProgressBar"</span> <span class="attr">parent</span>=<span class="string">"SmoothProgressBar"</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_stroke_separator_length"</span>&gt;</span>8dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_sections_count"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_speed"</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_progressiveStart_speed"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_progressiveStop_speed"</span>&gt;</span>3.4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_interpolator"</span>&gt;</span>spb_interpolator_acceleratedecelerate<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_mirror_mode"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_reversed"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_colors"</span>&gt;</span>@array/gplus_colors<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_progressiveStart_activated"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_generate_background_with_colors"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"GradientProgressBar"</span> <span class="attr">parent</span>=<span class="string">"SmoothProgressBar"</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_stroke_separator_length"</span>&gt;</span>0dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_sections_count"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_speed"</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:interpolator"</span>&gt;</span>@android:anim/decelerate_interpolator<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_colors"</span>&gt;</span>@array/gplus_colors<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_gradients"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"PocketProgressBar"</span> <span class="attr">parent</span>=<span class="string">"SmoothProgressBar"</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_stroke_separator_length"</span>&gt;</span>4dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_sections_count"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_speed"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:interpolator"</span>&gt;</span>@anim/pocket_interpolator<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_colors"</span>&gt;</span>@array/pocket_bar_colors<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_progressiveStart_activated"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"spb_generate_background_with_colors"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><hr><h4 id="添加缺少的颜色资源"><a class="header-anchor" href="#添加缺少的颜色资源">¶</a>添加缺少的颜色资源</h4><p>在res/values/color.xml添加如下代码：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">integer-array</span> <span class="attr">name</span>=<span class="string">"colors"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/holo_blue_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/holo_yellow_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/holo_green_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/holo_purple_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/holo_red_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">integer-array</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">integer-array</span> <span class="attr">name</span>=<span class="string">"gplus_colors"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/gplus_color_1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/gplus_color_2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/gplus_color_3<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/gplus_color_4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">integer-array</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">integer-array</span> <span class="attr">name</span>=<span class="string">"pocket_bar_colors"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_3<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_3<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_3<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_3<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">integer-array</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">integer-array</span> <span class="attr">name</span>=<span class="string">"pocket_background_colors"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_2<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_3<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>@color/pocket_color_4<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">integer-array</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"pocket_color_1"</span>&gt;</span>#85edb9<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"pocket_color_2"</span>&gt;</span>#34bdb7<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"pocket_color_3"</span>&gt;</span>#ee4458<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"pocket_color_4"</span>&gt;</span>#fcb74d<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gplus_color_1"</span>&gt;</span>#3e802f<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gplus_color_2"</span>&gt;</span>#f4b400<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gplus_color_3"</span>&gt;</span>#427fed<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gplus_color_4"</span>&gt;</span>#b23424<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"holo_blue_dark"</span>&gt;</span>#0099cc<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"holo_yellow_dark"</span>&gt;</span>#ff8800<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"holo_green_dark"</span>&gt;</span>#669900<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"holo_purple_dark"</span>&gt;</span>#9933cc<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"holo_red_dark"</span>&gt;</span>#cc0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><hr><h4 id="添加缺少的strings"><a class="header-anchor" href="#添加缺少的strings">¶</a>添加缺少的strings</h4><p>在res/values/strings.xml添加如下代码：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"interpolators"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>Accelerate<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>Linear<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>AccelerateDecelerate<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span>Decelerate<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">string-array</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><hr><h4 id="还有一个动画资源：anim"><a class="header-anchor" href="#还有一个动画资源：anim">¶</a>还有一个动画资源：anim</h4><p>在res/anim文件夹下新建一个名为：pocket_interpolator.xml动画资源文件，并添加如下代码：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">accelerateInterpolator</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:factor</span>=<span class="string">"1.8"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> /&gt;</span></span><br><span class="line">                                                                                                                       </span><br></pre></td></tr></tbody></table></figure><p><em><strong>这样所需要使用的资源都添加完毕了</strong></em></p><hr><h3 id="SmoothProgressBar调用"><a class="header-anchor" href="#SmoothProgressBar调用">¶</a>SmoothProgressBar调用</h3><p>提供两种方式： &lt;1&gt; 在布局文件中添加直接使用； &lt;2&gt; 代码调用</p><h4 id="1-在布局文件中添加直接使用"><a class="header-anchor" href="#1-在布局文件中添加直接使用">¶</a>&lt;1&gt; 在布局文件中添加直接使用:</h4><p>在xml文件中直接添加布局代码使用， 添加代码如下：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fr.castorflex.android.smoothprogressbar.SmoothProgressBar</span>  </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:indeterminate</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_sections_count</span>=<span class="string">"4"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_color</span>=<span class="string">"#FF0000"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_speed</span>=<span class="string">"2.0"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_stroke_width</span>=<span class="string">"4dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_stroke_separator_length</span>=<span class="string">"4dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_reversed</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_mirror_mode</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_progressiveStart_activated</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_progressiveStart_speed</span>=<span class="string">"1.5"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:spb_progressiveStop_speed</span>=<span class="string">"3.4"</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="2-使用java代码控制实现，灵活（推荐）"><a class="header-anchor" href="#2-使用java代码控制实现，灵活（推荐）">¶</a>&lt;2&gt; 使用java代码控制实现，灵活（推荐）</h4><p>先在布局文件中定义个id:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fr.castorflex.android.smoothprogressbar.SmoothProgressBar</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:id</span>=<span class="string">"@+id/smooth_progress_bar"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"@style/GNowProgressBar"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:indeterminate</span>=<span class="string">"true"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>在相应的Activity中实现绑定：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 变量声明</span><br><span class="line">private SmoothProgressBar progressBar;</span><br><span class="line"></span><br><span class="line">// 在void onCreate(Bundle savedInstanceState)绑定id</span><br><span class="line">progressBar = (SmoothProgressBar)findViewById(R.id.smooth_progress_bar);</span><br><span class="line"></span><br><span class="line">// 由于已经定义加载布局时，进度条就会自动运行（同方法一）</span><br><span class="line">// 使用progressiveStop()在合适的地方停止进度条运行</span><br><span class="line">// 如网络通信结束，登陆成功，webview页面加载完毕等时刻停止</span><br><span class="line">progressBar.progressiveStop();</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/SmoothProgressBar-show.png" alt="SmoothProgressBar-show"></p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> 开源框架 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android 实现手机震动功能</title>
      <link href="/2015/08/16/Android-%E5%AE%9E%E7%8E%B0%E6%89%8B%E6%9C%BA%E9%9C%87%E5%8A%A8%E5%8A%9F%E8%83%BD/"/>
      <url>/2015/08/16/Android-%E5%AE%9E%E7%8E%B0%E6%89%8B%E6%9C%BA%E9%9C%87%E5%8A%A8%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><hr><h2 id="开发环境"><a class="header-anchor" href="#开发环境">¶</a>开发环境</h2><p>&lt;1&gt; Eclipse Adt-abundle for windows;<br>&lt;2&gt; Android studio;</p><hr><h2 id="配置"><a class="header-anchor" href="#配置">¶</a>配置</h2><p>在AndroidManifest.xml中添加震动权限：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.VIBRATE"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="震动工具类-VibratorUtil-java"><a class="header-anchor" href="#震动工具类-VibratorUtil-java">¶</a>震动工具类 VibratorUtil.java</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;  </span><br><span class="line"><span class="keyword">import</span> android.app.Service;  </span><br><span class="line"><span class="keyword">import</span> android.os.Vibrator;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * 手机震动工具类 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> DM</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VibratorUtil</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单次震动</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> activity 调用该方法的Activity实例: 如，MainActivity.this</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> milliseconds 震动时长, 单位毫秒(ms).</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">Vibrate</span><span class="params">(<span class="keyword">final</span> Activity activity, <span class="type">long</span> milliseconds)</span> {</span><br><span class="line">        <span class="type">Vibrator</span> <span class="variable">vib</span> <span class="operator">=</span> (Vibrator) activity.getSystemService(Service.VIBRATOR_SERVICE);</span><br><span class="line">        vib.vibrate(milliseconds);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自定义震动</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> activity 调用该方法的Activity实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pattern  自定义震动模式:</span></span><br><span class="line"><span class="comment">     *                 数组中数字的含义依次是[静止时长，震动时长，静止时长，震动时长...];</span></span><br><span class="line"><span class="comment">     *                 时长的单位是毫秒.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> isRepeat 是否反复震动，如果是true，反复震动，如果是false，只震动一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">Vibrate</span><span class="params">(<span class="keyword">final</span> Activity activity, <span class="type">long</span>[] pattern, <span class="type">boolean</span> isRepeat)</span> {</span><br><span class="line">        <span class="type">Vibrator</span> <span class="variable">vib</span> <span class="operator">=</span> (Vibrator) activity.getSystemService(Service.VIBRATOR_SERVICE);</span><br><span class="line">        vib.vibrate(pattern, isRepeat ? <span class="number">1</span> : -<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="实例调用"><a class="header-anchor" href="#实例调用">¶</a>实例调用</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 震动500ms</span></span><br><span class="line">VibratorUtil.Vibrate(MainActivity.<span class="built_in">this</span>, <span class="number">500</span>);   </span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二个参数，指代一个震动的频率数组。</span></span><br><span class="line"><span class="comment">// 每两个为一组，每组的第一个为等待时间，第二个为震动时间。</span></span><br><span class="line"><span class="comment">// 比如 [2000,500,100,400],会先等待2000毫秒，震动500，再等待100，震动400 </span></span><br><span class="line">VibratorUtil.Vibrate(MainActivity.<span class="built_in">this</span>, <span class="keyword">new</span> <span class="title class_">long</span>[]{<span class="number">2000</span>,<span class="number">500</span>,<span class="number">100</span>,<span class="number">400</span>}, <span class="literal">false</span>);</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义dialog之多选列表框的实现（四）</title>
      <link href="/2015/07/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89dialog%E4%B9%8B%E5%A4%9A%E9%80%89%E5%88%97%E8%A1%A8%E6%A1%86%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>/2015/07/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89dialog%E4%B9%8B%E5%A4%9A%E9%80%89%E5%88%97%E8%A1%A8%E6%A1%86%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>多选列表框的实现原理极为简单，基本上是用系统原生的Dialog，主要看一下内容的实现。先上效果图:</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/dialog-mul.png" alt="dialog-mul"></p><hr><h2 id="具体实现"><a class="header-anchor" href="#具体实现">¶</a>具体实现</h2><p>主要是AlertDialog和DialogInterface.OnClickListener的使用，具体API接口实现中又完成了调用系统相机拍照， 系统相册图片的选取功能。</p><h3 id="Button监听事件："><a class="header-anchor" href="#Button监听事件：">¶</a>Button监听事件：</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span> <span class="variable">mulChoiseDialog</span> <span class="operator">=</span> (Button) findViewById(R.id.button4);</span><br><span class="line">        mulChoiseDialog.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() {</span><br><span class="line">            <span class="meta">@TargetApi(Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line">                <span class="comment">//选项数组</span></span><br><span class="line">                String[] choices = {<span class="string">"新浪微博"</span>, <span class="string">"拍照"</span>, <span class="string">"从相册中选取"</span>};</span><br><span class="line">                <span class="comment">//包含多个选项的对话框</span></span><br><span class="line">                <span class="type">AlertDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(MainActivity.<span class="built_in">this</span>)</span><br><span class="line"><span class="comment">//                        .setIcon(android.R.drawable.btn_star)</span></span><br><span class="line"><span class="comment">//                        .setTitle("分享")</span></span><br><span class="line">                        .setItems(choices, onselect).create();</span><br><span class="line">                dialog.show();</span><br><span class="line">            }</span><br><span class="line">        });</span><br></pre></td></tr></tbody></table></figure><h3 id="对话框列表中的每个事件的监听处理："><a class="header-anchor" href="#对话框列表中的每个事件的监听处理：">¶</a>对话框列表中的每个事件的监听处理：</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 选项的事件监听器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    DialogInterface.<span class="type">OnClickListener</span> <span class="variable">onselect</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog, <span class="type">int</span> which)</span> {</span><br><span class="line">            <span class="keyword">switch</span> (which) {</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">"您选择了新浪微博."</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    <span class="comment">// 还有权限设置</span></span><br><span class="line">                    Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">"您选择了拍照"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    <span class="type">Intent</span> <span class="variable">intent1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="string">"android.media.action.IMAGE_CAPTURE"</span>);</span><br><span class="line">                    intent1.putExtra(MediaStore.EXTRA_OUTPUT,</span><br><span class="line">                            Uri.fromFile(<span class="keyword">new</span> <span class="title class_">File</span>(Environment</span><br><span class="line">                                    .getExternalStorageDirectory(), <span class="string">"camera.jpg"</span>)));</span><br><span class="line">                    intent1.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, <span class="number">0</span>);</span><br><span class="line">                    startActivityForResult(intent1, <span class="number">10</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">"您选择了从相册中选取"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    <span class="type">Intent</span> <span class="variable">intent2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_GET_CONTENT);</span><br><span class="line">                    intent2.addCategory(Intent.CATEGORY_OPENABLE);</span><br><span class="line">                    intent2.setType(<span class="string">"image/*"</span>);</span><br><span class="line">                    intent2.putExtra(<span class="string">"crop"</span>, <span class="string">"true"</span>);</span><br><span class="line">                    intent2.putExtra(<span class="string">"aspectX"</span>, <span class="number">1</span>);</span><br><span class="line">                    intent2.putExtra(<span class="string">"aspectY"</span>, <span class="number">1</span>);</span><br><span class="line">                    intent2.putExtra(<span class="string">"outputX"</span>, <span class="number">80</span>);</span><br><span class="line">                    intent2.putExtra(<span class="string">"outputY"</span>, <span class="number">80</span>);</span><br><span class="line">                    intent2.putExtra(<span class="string">"return-data"</span>, <span class="literal">true</span>);</span><br><span class="line">                    startActivityForResult(intent2, <span class="number">11</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, Intent data)</span> {</span><br><span class="line">        <span class="keyword">if</span> (requestCode == <span class="number">10</span> &amp;&amp; resultCode == Activity.RESULT_OK) {</span><br><span class="line">            <span class="built_in">this</span>.mImageView.setVisibility(View.VISIBLE);</span><br><span class="line">            <span class="built_in">this</span>.mImageView.setImageDrawable(Drawable.createFromPath(<span class="keyword">new</span> <span class="title class_">File</span>(</span><br><span class="line">                    Environment.getExternalStorageDirectory(), <span class="string">"camera.jpg"</span>)</span><br><span class="line">                    .getAbsolutePath()));</span><br><span class="line">            System.out.println(<span class="string">"data--&gt;"</span> + data);</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (requestCode == <span class="number">11</span> &amp;&amp; resultCode == Activity.RESULT_OK) {</span><br><span class="line">            System.out.println(<span class="string">"data2--&gt;"</span> + data);</span><br><span class="line">            <span class="built_in">this</span>.mImageView.setVisibility(View.VISIBLE);</span><br><span class="line"></span><br><span class="line">            <span class="type">Bitmap</span> <span class="variable">cameraBitmap</span> <span class="operator">=</span> (Bitmap) data.getExtras().get(<span class="string">"data"</span>);</span><br><span class="line">            <span class="built_in">this</span>.mImageView.setImageBitmap(cameraBitmap);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h3 id="onActivityResult-函数"><a class="header-anchor" href="#onActivityResult-函数">¶</a>onActivityResult()函数</h3><p>此函数主要完成了，对调用系统摄像头拍摄照片和，从相册中选取照片对照片显示处理。<br>并且需要加上相应的权限：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CAMERA"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MOUNT_UNMOUNT_FILESYSTEMS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.camera"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.camera.autofocus"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="照片显示的效果如下："><a class="header-anchor" href="#照片显示的效果如下：">¶</a>照片显示的效果如下：</h3><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/dialog-shows.png" alt="dialog-shows"></p><hr><p>那么Demo的基本样式都实现完成了！</p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义dialog之进度条的实现（三）</title>
      <link href="/2015/07/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89dialog%E4%B9%8B%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2015/07/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89dialog%E4%B9%8B%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>进度条的实现原理其实很简单，就是设置一个动画，使图片在对话框中旋转。同时设置一定的时间限制，通常为几秒钟；当时间到期后开始执行相应的业务操作。具体的介绍见下文:</p><h2 id="效果图："><a class="header-anchor" href="#效果图：">¶</a>效果图：</h2><p>![ProgressDialog1](<a href="https://gitee.com/absentm/gitRes/raw/master/NotePics/ProgressDialog1">https://gitee.com/absentm/gitRes/raw/master/NotePics/ProgressDialog1</a>](.png)</p><hr><h2 id="具体实现"><a class="header-anchor" href="#具体实现">¶</a>具体实现</h2><p>通过设计自定义style，完成具体的样式.</p><h3 id="Button3的监听事件："><a class="header-anchor" href="#Button3的监听事件：">¶</a>Button3的监听事件：</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Dialog progressDialog;</span><br><span class="line"></span><br><span class="line"><span class="type">Button</span> <span class="variable">buttonProgressDialog</span> <span class="operator">=</span> (Button) findViewById(R.id.button3);</span><br><span class="line">        buttonProgressDialog.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line"></span><br><span class="line">                progressDialog = DialogUtil.createLoadingDialog(MainActivity.<span class="built_in">this</span>, <span class="string">"正在加载中..."</span>);</span><br><span class="line">                progressDialog.show();</span><br><span class="line">                <span class="comment">// 这里你可以进行一些等待时的操作，我这里用8秒后显示Toast代理等待操作</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Handler</span>().postDelayed(<span class="keyword">new</span> <span class="title class_">Runnable</span>() {</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">                        progressDialog.dismiss();</span><br><span class="line">                        Toast.makeText(getApplicationContext(), <span class="string">"登录成功"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    }</span><br><span class="line">                }, <span class="number">8000</span>);</span><br><span class="line">            }</span><br><span class="line">        });</span><br></pre></td></tr></tbody></table></figure><h3 id="DialogUtil-createLoadingDialog（）方法的实现："><a class="header-anchor" href="#DialogUtil-createLoadingDialog（）方法的实现：">¶</a>DialogUtil.createLoadingDialog（）方法的实现：</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到自定义的progressDialog</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Dialog <span class="title function_">createLoadingDialog</span><span class="params">(Context context, String msg)</span> {</span><br><span class="line"></span><br><span class="line">        <span class="type">LayoutInflater</span> <span class="variable">inflater</span> <span class="operator">=</span> LayoutInflater.from(context);</span><br><span class="line">        <span class="type">View</span> <span class="variable">v</span> <span class="operator">=</span> inflater.inflate(R.layout.loading_dialog, <span class="literal">null</span>);<span class="comment">// 得到加载view</span></span><br><span class="line">        <span class="type">LinearLayout</span> <span class="variable">layout</span> <span class="operator">=</span> (LinearLayout) v.findViewById(R.id.dialog_view);<span class="comment">// 加载布局</span></span><br><span class="line">        <span class="comment">// main.xml中的ImageView</span></span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">spaceshipImage</span> <span class="operator">=</span> (ImageView) v.findViewById(R.id.img);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tipTextView</span> <span class="operator">=</span> (TextView) v.findViewById(R.id.tipTextView);<span class="comment">// 提示文字</span></span><br><span class="line">        <span class="comment">// 加载动画</span></span><br><span class="line">        <span class="type">Animation</span> <span class="variable">hyperspaceJumpAnimation</span> <span class="operator">=</span> AnimationUtils.loadAnimation(</span><br><span class="line">                context, R.anim.load_animation);</span><br><span class="line">        <span class="comment">// 使用ImageView显示动画</span></span><br><span class="line">        spaceshipImage.startAnimation(hyperspaceJumpAnimation);</span><br><span class="line">        tipTextView.setText(msg);<span class="comment">// 设置加载信息</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Dialog</span> <span class="variable">loadingDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dialog</span>(context, R.style.loading_dialog);<span class="comment">// 创建自定义样式dialog</span></span><br><span class="line"></span><br><span class="line">        loadingDialog.setCancelable(<span class="literal">false</span>);<span class="comment">// 不可以用“返回键”取消</span></span><br><span class="line">        loadingDialog.setContentView(layout, <span class="keyword">new</span> <span class="title class_">LinearLayout</span>.LayoutParams(</span><br><span class="line">                LinearLayout.LayoutParams.MATCH_PARENT,</span><br><span class="line">                LinearLayout.LayoutParams.MATCH_PARENT));<span class="comment">// 设置布局</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> loadingDialog;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h3 id="R-layout中loading-dialog-xml文件的实现："><a class="header-anchor" href="#R-layout中loading-dialog-xml文件的实现：">¶</a>R.layout中loading_dialog.xml文件的实现：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/dialog_view"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"fill_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:minHeight</span>=<span class="string">"60dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:minWidth</span>=<span class="string">"180dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:padding</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@drawable/loading_bg"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/img"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@drawable/loading"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/tipTextView"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"数据加载中……"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span> </span><br></pre></td></tr></tbody></table></figure><h3 id="这里也给出了进度条的背景图片："><a class="header-anchor" href="#这里也给出了进度条的背景图片：">¶</a>这里也给出了进度条的背景图片：</h3><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/ProgressDialog-loading.png" alt="ProgressDialog-loading"></p><h3 id="R-anim中的load-animation-xml："><a class="header-anchor" href="#R-anim中的load-animation-xml：">¶</a>R.anim中的load_animation.xml：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:shareInterpolator</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rotate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/linear_interpolator"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotX</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pivotY</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromDegrees</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toDegrees</span>=<span class="string">"+360"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1500"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startOffset</span>=<span class="string">"-1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:repeatMode</span>=<span class="string">"restart"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:repeatCount</span>=<span class="string">"-1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span>  </span><br></pre></td></tr></tbody></table></figure><p><strong>此文件放在res文件夹下的anim文件夹中</strong></p><h3 id="R-style中的loading-dialog-xml样式："><a class="header-anchor" href="#R-style中的loading-dialog-xml样式：">¶</a>R.style中的loading_dialog.xml样式：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 自定义loading dialog --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"loading_dialog"</span> <span class="attr">parent</span>=<span class="string">"android:style/Theme.Dialog"</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowFrame"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowNoTitle"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowBackground"</span>&gt;</span>@drawable/loading_bg<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowIsFloating"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowContentOverlay"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>此文件放在values文件夹的style.xml中</strong></p><hr><p><em><strong>这样效果基本上就做成了！下篇文章中完成第四个按钮“多选框”！</strong></em></p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义Dialog之警告框1和警告框2 的实现（二）</title>
      <link href="/2015/06/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89Dialog%E4%B9%8B%E8%AD%A6%E5%91%8A%E6%A1%861%E5%92%8C%E8%AD%A6%E5%91%8A%E6%A1%862-%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2015/06/28/Android%E8%87%AA%E5%AE%9A%E4%B9%89Dialog%E4%B9%8B%E8%AD%A6%E5%91%8A%E6%A1%861%E5%92%8C%E8%AD%A6%E5%91%8A%E6%A1%862-%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>这里的实现样式设计，还以圆角矩形为主。(PS: Google新出的原质化设计的确很赞，有时间一定要认真学学).</p><p>再看一下长得样子： 可以看出还是经典的警告框设计，主要包含窗口遮罩、对话框标题、描述及按钮等组成部分。详细的实现细节，看下文。</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Dialog_alert_1.png" alt="Dialog_alert_1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Dialog_alert_2.png" alt="Dialog_alert_2"></p><hr><h2 id="具体实现"><a class="header-anchor" href="#具体实现">¶</a>具体实现</h2><h3 id="MainActivity中Button（警告框1，2）的事件监听"><a class="header-anchor" href="#MainActivity中Button（警告框1，2）的事件监听">¶</a>MainActivity中Button（警告框1，2）的事件监听</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span> <span class="variable">buttonOk</span> <span class="operator">=</span> (Button) findViewById(R.id.button1);</span><br><span class="line">        buttonOk.setOnClickListener(<span class="keyword">new</span> <span class="title class_">Button</span>.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View arg0)</span> {</span><br><span class="line">                DialogUtil.showCustomMessageOK(MainActivity.<span class="built_in">this</span>, <span class="string">"Confirmation"</span>, <span class="string">"Just click OK to continue !"</span>);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">buttonOkCancel</span> <span class="operator">=</span> (Button) findViewById(R.id.button2);</span><br><span class="line">        buttonOkCancel.setOnClickListener(<span class="keyword">new</span> <span class="title class_">Button</span>.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View arg0)</span> {</span><br><span class="line">                DialogUtil.showCustomMessage(MainActivity.<span class="built_in">this</span>, <span class="string">"Alert"</span>, <span class="string">"Are you sure you want continue?"</span>);</span><br><span class="line">            }</span><br><span class="line">        });</span><br></pre></td></tr></tbody></table></figure><h3 id="真正的实现在DialogUtil-showCustomMessage（）方法"><a class="header-anchor" href="#真正的实现在DialogUtil-showCustomMessage（）方法">¶</a>真正的实现在DialogUtil.showCustomMessage（）方法</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 含取消和确定按钮的对话框</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pTitle</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pMsg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showCustomMessage</span><span class="params">(Context context, String pTitle, <span class="keyword">final</span> String pMsg)</span> {</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Dialog</span> <span class="variable">lDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dialog</span>(context, R.style.alert_dialog);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置窗口遮罩，点击警告框之外的部分对话框不消失</span></span><br><span class="line">        lDialog.setCanceledOnTouchOutside(<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置不可以用“返回键”取消</span></span><br><span class="line">        lDialog.setCancelable(<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置窗口默认不显示标题栏</span></span><br><span class="line">        lDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">        </span><br><span class="line">        lDialog.setContentView(R.layout.ok_cancel_activity);</span><br><span class="line"></span><br><span class="line">        ((TextView) lDialog.findViewById(R.id.dialog_title)).setText(pTitle);</span><br><span class="line">        ((TextView) lDialog.findViewById(R.id.dialog_message)).setText(pMsg);</span><br><span class="line"></span><br><span class="line">        ((Button) lDialog.findViewById(R.id.cancel))</span><br><span class="line">                .setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() {</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line">                        lDialog.dismiss();</span><br><span class="line">                    }</span><br><span class="line">                });</span><br><span class="line"></span><br><span class="line">        ((Button) lDialog.findViewById(R.id.ok)).setText(<span class="string">"确  定"</span>);</span><br><span class="line">        ((Button) lDialog.findViewById(R.id.ok))</span><br><span class="line">                .setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() {</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line">                        lDialog.dismiss();</span><br><span class="line">                    }</span><br><span class="line">                });</span><br><span class="line">        lDialog.show();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * it will show the OK dialog like iphone, make sure no keyboard is visible</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pTitle title for dialog</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pMsg   msg for body</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showCustomMessageOK</span><span class="params">(Context context, String pTitle, <span class="keyword">final</span> String pMsg)</span> {</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Dialog</span> <span class="variable">lDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dialog</span>(context, R.style.alert_dialog);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口遮罩，点击警告框之外的部分对话框不消失</span></span><br><span class="line">        lDialog.setCanceledOnTouchOutside(<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置不可以用“返回键”取消</span></span><br><span class="line">        lDialog.setCancelable(<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置窗口默认不显示标题栏</span></span><br><span class="line"></span><br><span class="line">        lDialog.setContentView(R.layout.simple_ok_activity);</span><br><span class="line"></span><br><span class="line">        ((TextView) lDialog.findViewById(R.id.dialog_title)).setText(pTitle);</span><br><span class="line">        ((TextView) lDialog.findViewById(R.id.dialog_message)).setText(pMsg);</span><br><span class="line"></span><br><span class="line">        ((Button) lDialog.findViewById(R.id.ok)).setText(<span class="string">"确  定"</span>);</span><br><span class="line">        ((Button) lDialog.findViewById(R.id.ok))</span><br><span class="line">                .setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() {</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line">                        lDialog.dismiss();</span><br><span class="line">                    }</span><br><span class="line">                });</span><br><span class="line">        lDialog.show();</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h3 id="在Style-xml中设置自定义的alert-dialog-xml"><a class="header-anchor" href="#在Style-xml中设置自定义的alert-dialog-xml">¶</a>在Style.xml中设置自定义的alert_dialog.xml</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 自定义alert dialog --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"alert_dialog"</span> <span class="attr">parent</span>=<span class="string">"android:style/Theme.Dialog"</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowFrame"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowNoTitle"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowBackground"</span>&gt;</span>@drawable/corners_white_bg<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowIsFloating"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowContentOverlay"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="警告框主布局simple-ok-activity-xml文件："><a class="header-anchor" href="#警告框主布局simple-ok-activity-xml文件：">¶</a>警告框主布局simple_ok_activity.xml文件：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal|center_vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">"20dp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"15dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"About to call 323"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/dialog_title"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">"16sp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"Are you sure you want to proceed?"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/dialog_message"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"40dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">"@drawable/login_btn_select_bg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"确定"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">"16dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/ok"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="警告框2-ok-cancel-activity-xml文件如下："><a class="header-anchor" href="#警告框2-ok-cancel-activity-xml文件如下：">¶</a>警告框2 ok_cancel_activity.xml文件如下：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal|center_vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">"20dp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"17dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"About to call 323"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/dialog_title"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">"16sp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"Are you sure you want to proceed?"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/dialog_message"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"40dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">"@drawable/login_btn_select_bg"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_weight</span>=<span class="string">"0.5"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_gravity</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">"取  消"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/cancel"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"40dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">"@drawable/login_btn_select_bg"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">"确  定"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_weight</span>=<span class="string">"0.5"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginRight</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginBottom</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/ok"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="还差一个自定义的样式corners-white-bg-xml"><a class="header-anchor" href="#还差一个自定义的样式corners-white-bg-xml">¶</a>还差一个自定义的样式corners_white_bg.xml:</h3><p><em>放在drawable文件夹下，没有的话新建。</em></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#FFFFFF"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:width</span>=<span class="string">"0.01dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:color</span>=<span class="string">"#e3e3e3"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:topLeftRadius</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:topRightRadius</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:bottomRightRadius</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:bottomLeftRadius</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span>   </span><br></pre></td></tr></tbody></table></figure><p><em><strong>这样警告框1，2 基本上就完成了，下篇文章中将介绍一下进度条自定义dialog的实现！</strong></em></p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android 中几款自定义Dialog的实现(一)</title>
      <link href="/2015/06/28/Android-%E4%B8%AD%E5%87%A0%E6%AC%BE%E8%87%AA%E5%AE%9A%E4%B9%89Dialog%E7%9A%84%E5%AE%9E%E7%8E%B0-%E4%B8%80/"/>
      <url>/2015/06/28/Android-%E4%B8%AD%E5%87%A0%E6%AC%BE%E8%87%AA%E5%AE%9A%E4%B9%89Dialog%E7%9A%84%E5%AE%9E%E7%8E%B0-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>本文中，将会介绍几款自定义样式的Dialog的实现，包括（单个“确认”按钮的警告框1，含取消和确认按钮的警告框2，），预览样式如下：</p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Dialog-Demo.png" alt="Dialog-Demo"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Dialog-alert1.png" alt="Dialog-alert1"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Dialog-alert2.png" alt="Dialog-alert2"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Dialog-process.png" alt="Dialog-process"></p><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Dialog-select.png" alt="Dialog-select"></p><hr><h2 id="Demo主界面的实现："><a class="header-anchor" href="#Demo主界面的实现：">¶</a>Demo主界面的实现：</h2><p>由第1张图片可见：主界面的实现很简单，四个按钮Button，设置No Title, 间隔和按钮的background！</p><h3 id="主界面的activity-main-xml内容如下："><a class="header-anchor" href="#主界面的activity-main-xml内容如下：">¶</a>主界面的activity_main.xml内容如下：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@color/seashell"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">"@layout/mul_style_content"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ScrollView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>添加ScrollView的目的很明显，只是想在之后的工作中再多些一些Demo集成到一块，那么：mul_style_content.xml的详情如下：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/button1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"警告框 1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/login_btn_select_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/button2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"警告框 2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/login_btn_select_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/button1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/button3"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"进度条"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/login_btn_select_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/button2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/button4"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"选择框"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/login_btn_select_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/button3"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/imageview1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"200dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">"invisible"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/corners_harf_transparent_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/button4"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="其中，使用到的color-xml如下，请添加到values文件下的color-xml文件中："><a class="header-anchor" href="#其中，使用到的color-xml如下，请添加到values文件下的color-xml文件中：">¶</a>其中，使用到的color.xml如下，请添加到values文件下的color.xml文件中：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"white"</span>&gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"ivory"</span>&gt;</span>#FFFFF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--象牙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightyellow"</span>&gt;</span>#FFFFE0<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"yellow"</span>&gt;</span>#FFFF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"snow"</span>&gt;</span>#FFFAFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--雪白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"floralwhite"</span>&gt;</span>#FFFAF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--花白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lemonchiffon"</span>&gt;</span>#FFFACD<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--柠檬绸色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cornsilk"</span>&gt;</span>#FFF8DC<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--米绸色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"seashell"</span>&gt;</span>#FFF5EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--海贝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lavenderblush"</span>&gt;</span>#FFF0F5<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--淡紫红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"papayawhip"</span>&gt;</span>#FFEFD5<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--番木色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blanchedalmond"</span>&gt;</span>#FFEBCD<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--白杏色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mistyrose"</span>&gt;</span>#FFE4E1<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--浅玫瑰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"bisque"</span>&gt;</span>#FFE4C4<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--桔黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"moccasin"</span>&gt;</span>#FFE4B5<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--鹿皮色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"navajowhite"</span>&gt;</span>#FFDEAD<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--纳瓦白 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"peachpuff"</span>&gt;</span>#FFDAB9<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--桃色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gold"</span>&gt;</span>#FFD700<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--金色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"pink"</span>&gt;</span>#FFC0CB<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightpink"</span>&gt;</span>#FFB6C1<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orange"</span>&gt;</span>#FFA500<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--橙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightsalmon"</span>&gt;</span>#FFA07A<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮肉色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkorange"</span>&gt;</span>#FF8C00<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗桔黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"coral"</span>&gt;</span>#FF7F50<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--珊瑚色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"hotpink"</span>&gt;</span>#FF69B4<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--热粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"tomato"</span>&gt;</span>#FF6347<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--西红柿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orangered"</span>&gt;</span>#FF4500<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--红橙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"deeppink"</span>&gt;</span>#FF1493<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--深粉红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"fuchsia"</span>&gt;</span>#FF00FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--紫红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"magenta"</span>&gt;</span>#FF00FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--红紫色 --&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"red"</span>&gt;</span>#FF0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"oldlace"</span>&gt;</span>#FDF5E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--老花色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightgoldenyellow"</span>&gt;</span>#FAFAD2<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮金黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"linen"</span>&gt;</span>#FAF0E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亚麻色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"antiquewhite"</span>&gt;</span>#FAEBD7<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--古董白 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"salmon"</span>&gt;</span>#FA8072<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--鲜肉色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"ghostwhite"</span>&gt;</span>#F8F8FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--幽灵白 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mintcream"</span>&gt;</span>#F5FFFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--薄荷色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"whitesmoke"</span>&gt;</span>#F5F5F5<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--烟白色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"beige"</span>&gt;</span>#F5F5DC<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--米色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"wheat"</span>&gt;</span>#F5DEB3<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--浅黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sandybrown"</span>&gt;</span>#F4A460<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--沙褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"azure"</span>&gt;</span>#F0FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--天蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"honeydew"</span>&gt;</span>#F0FFF0<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--蜜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"aliceblue"</span>&gt;</span>#F0F8FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--艾利斯兰 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"khaki"</span>&gt;</span>#F0E68C<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--黄褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightcoral"</span>&gt;</span>#F08080<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮珊瑚色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"palegoldenrod"</span>&gt;</span>#EEE8AA<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--苍麒麟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"violet"</span>&gt;</span>#EE82EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--紫罗兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darksalmon"</span>&gt;</span>#E9967A<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗肉色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lavender"</span>&gt;</span>#E6E6FA<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--淡紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightcyan"</span>&gt;</span>#E0FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"burlywood"</span>&gt;</span>#DEB887<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--实木色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"plum"</span>&gt;</span>#DDA0DD<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--洋李色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gainsboro"</span>&gt;</span>#DCDCDC<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--淡灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"crimson"</span>&gt;</span>#DC143C<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗深红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"palevioletred"</span>&gt;</span>#DB7093<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--苍紫罗兰色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"goldenrod"</span>&gt;</span>#DAA520<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--金麒麟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orchid"</span>&gt;</span>#DA70D6<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--淡紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"thistle"</span>&gt;</span>#D8BFD8<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--蓟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightgrey"</span>&gt;</span>#D3D3D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"tan"</span>&gt;</span>#D2B48C<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--茶色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"chocolate"</span>&gt;</span>#D2691E<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--巧可力色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"peru"</span>&gt;</span>#CD853F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--秘鲁色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"indianred"</span>&gt;</span>#CD5C5C<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--印第安红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumvioletred"</span>&gt;</span>#C71585<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中紫罗兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"silver"</span>&gt;</span>#C0C0C0<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--银色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkkhaki"</span>&gt;</span>#BDB76B<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!-- 暗黄褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"rosybrown"</span>&gt;</span>#BC8F8F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--褐玫瑰红--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumorchid"</span>&gt;</span>#BA55D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中粉紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkgoldenrod"</span>&gt;</span>#B8860B<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗金黄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"firebrick"</span>&gt;</span>#B22222<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--火砖色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"powderblue"</span>&gt;</span>#B0E0E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--粉蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightsteelblue"</span>&gt;</span>#B0C4DE<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮钢兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"paleturquoise"</span>&gt;</span>#AFEEEE<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--苍宝石绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"greenyellow"</span>&gt;</span>#ADFF2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--黄绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightblue"</span>&gt;</span>#ADD8E6<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkgray"</span>&gt;</span>#A9A9A9<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"brown"</span>&gt;</span>#A52A2A<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sienna"</span>&gt;</span>#A0522D<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--赭色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkorchid"</span>&gt;</span>#9932CC<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"palegreen"</span>&gt;</span>#98FB98<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--苍绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkviolet"</span>&gt;</span>#9400D3<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗紫罗兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumpurple"</span>&gt;</span>#9370DB<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightgreen"</span>&gt;</span>#90EE90<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkseagreen"</span>&gt;</span>#8FBC8F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗海兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"saddlebrown"</span>&gt;</span>#8B4513<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--重褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkmagenta"</span>&gt;</span>#8B008B<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗洋红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkred"</span>&gt;</span>#8B0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗红色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blueviolet"</span>&gt;</span>#8A2BE2<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--紫罗兰蓝色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightskyblue"</span>&gt;</span>#87CEFA<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮天蓝色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"skyblue"</span>&gt;</span>#87CEEB<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--天蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray"</span>&gt;</span>#808080<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"olive"</span>&gt;</span>#808000<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--橄榄色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"purple"</span>&gt;</span>#800080<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--紫色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"maroon"</span>&gt;</span>#800000<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--粟色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"aquamarine"</span>&gt;</span>#7FFFD4<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--碧绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"chartreuse"</span>&gt;</span>#7FFF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--黄绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lawngreen"</span>&gt;</span>#7CFC00<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--草绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumslateblue"</span>&gt;</span>#7B68EE<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中暗蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightslategray"</span>&gt;</span>#778899<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮蓝灰 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightslategrey"</span>&gt;</span>#778899<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮蓝灰 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"slategray"</span>&gt;</span>#708090<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--灰石色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"slategrey"</span>&gt;</span>#708090<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--灰石色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"olivedrab"</span>&gt;</span>#6B8E23<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--深绿褐色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"slateblue"</span>&gt;</span>#6A5ACD<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--石蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"dimgray"</span>&gt;</span>#696969<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumaquamarine"</span>&gt;</span>#66CDAA<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中绿色--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cornflowerblue"</span>&gt;</span>#6495ED<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--菊兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cadetblue"</span>&gt;</span>#5F9EA0<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--军兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkolivegreen"</span>&gt;</span>#556B2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗橄榄绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"indigo"</span>&gt;</span>#4B0082<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--靛青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumturquoise"</span>&gt;</span>#48D1CC<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中绿宝石--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkslateblue"</span>&gt;</span>#483D8B<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗灰蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"steelblue"</span>&gt;</span>#4682B4<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--钢兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"royalblue"</span>&gt;</span>#4169E1<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--皇家蓝 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"turquoise"</span>&gt;</span>#40E0D0<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--青绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumseagreen"</span>&gt;</span>#3CB371<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中海蓝 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"limegreen"</span>&gt;</span>#32CD32<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--橙绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkslategray"</span>&gt;</span>#2F4F4F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗瓦灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkslategrey"</span>&gt;</span>#2F4F4F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗瓦灰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"seagreen"</span>&gt;</span>#2E8B57<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--海绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"forestgreen"</span>&gt;</span>#228B22<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--森林绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lightseagreen"</span>&gt;</span>#20B2AA<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--亮海蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"dodgerblue"</span>&gt;</span>#1E90FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--闪兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"midnightblue"</span>&gt;</span>#191970<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中灰兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"aqua"</span>&gt;</span>#00FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--浅绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"cyan"</span>&gt;</span>#00FFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"springgreen"</span>&gt;</span>#00FF7F<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--春绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"lime"</span>&gt;</span>#00FF00<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--酸橙色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumspringgreen"</span>&gt;</span>#00FA9A<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中春绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkturquoise"</span>&gt;</span>#00CED1<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗宝石绿 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"deepskyblue"</span>&gt;</span>#00BFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--深天蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkcyan"</span>&gt;</span>#008B8B<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗青色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"teal"</span>&gt;</span>#008080<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--水鸭色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"green"</span>&gt;</span>#008000<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkgreen"</span>&gt;</span>#006400<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗绿色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blue"</span>&gt;</span>#0000FF<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"mediumblue"</span>&gt;</span>#0000CD<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--中兰色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"darkblue"</span>&gt;</span>#00008B<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--暗蓝色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"navy"</span>&gt;</span>#000080<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--海军色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"black"</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--黑色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"bantuming"</span>&gt;</span>#b0000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span><span class="comment">&lt;!--ban黑色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"light_bantuming"</span>&gt;</span>#50000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"bg_color"</span>&gt;</span>#EDEDED<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"contents_text"</span>&gt;</span>#ff000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"encode_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"help_button_view"</span>&gt;</span>#ffcccccc<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"help_view"</span>&gt;</span>#ff404040<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"possible_result_points"</span>&gt;</span>#c0ffff00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_image_border"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_minor_text"</span>&gt;</span>#ffc0c0c0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_points"</span>&gt;</span>#c000ff00<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_text"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"result_view"</span>&gt;</span>#b0000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_header_text"</span>&gt;</span>#ff808080<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_header_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_list_item"</span>&gt;</span>#fffff0e0<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_layout_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_page_number_text"</span>&gt;</span>#ff000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"sbc_snippet_text"</span>&gt;</span>#ff4b4b4b<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"share_text"</span>&gt;</span>#ff000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"share_view"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"status_view"</span>&gt;</span>#50000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"status_text"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"transparent"</span>&gt;</span>#00000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"viewfinder_frame"</span>&gt;</span>#ffffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"viewfinder_laser"</span>&gt;</span>#ffff0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"viewfinder_mask"</span>&gt;</span>#60000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"header"</span>&gt;</span>#58567D<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"grgray"</span>&gt;</span>#686868<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="还有一个login-btn-select-bg-xml是按钮的背景样式，将以下内容放到drawable文件夹下："><a class="header-anchor" href="#还有一个login-btn-select-bg-xml是按钮的背景样式，将以下内容放到drawable文件夹下：">¶</a>还有一个login_btn_select_bg.xml是按钮的背景样式，将以下内容放到drawable文件夹下：</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 未单击时的背景图片 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_pressed</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:bottomLeftRadius</span>=<span class="string">"10dp"</span> <span class="attr">android:bottomRightRadius</span>=<span class="string">"10dp"</span> <span class="attr">android:radius</span>=<span class="string">"30dp"</span> <span class="attr">android:topLeftRadius</span>=<span class="string">"10dp"</span> <span class="attr">android:topRightRadius</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:endColor</span>=<span class="string">"#000000"</span> <span class="attr">android:startColor</span>=<span class="string">"#FFFFFF"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 实心， 且有填充色 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#87CEEB"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 和CSS中的padding应该是一个道理 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">padding</span> <span class="attr">android:bottom</span>=<span class="string">"7dp"</span> <span class="attr">android:left</span>=<span class="string">"7dp"</span> <span class="attr">android:right</span>=<span class="string">"7dp"</span> <span class="attr">android:top</span>=<span class="string">"7dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 单击时的背景图片 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:bottomLeftRadius</span>=<span class="string">"10dp"</span> <span class="attr">android:bottomRightRadius</span>=<span class="string">"10dp"</span> <span class="attr">android:radius</span>=<span class="string">"30dp"</span> <span class="attr">android:topLeftRadius</span>=<span class="string">"10dp"</span> <span class="attr">android:topRightRadius</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:endColor</span>=<span class="string">"#000000"</span> <span class="attr">android:startColor</span>=<span class="string">"#FFFFFF"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 实心， 且有填充色 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#90EE90"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 和CSS中的padding应该是一个道理 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">padding</span> <span class="attr">android:bottom</span>=<span class="string">"7dp"</span> <span class="attr">android:left</span>=<span class="string">"7dp"</span> <span class="attr">android:right</span>=<span class="string">"7dp"</span> <span class="attr">android:top</span>=<span class="string">"7dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>这样主界面的设计就完成，只需在MainActivity设置相应的按钮监听事件即可。</p><p><em><strong>由于篇幅所限，下面每一部分的实现，将会在下一篇文章中讲述！</strong></em></p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android SwipeRefreshLayout 官方下拉刷新控件介绍</title>
      <link href="/2015/05/20/Android-SwipeRefreshLayout-%E5%AE%98%E6%96%B9%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E6%8E%A7%E4%BB%B6%E4%BB%8B%E7%BB%8D/"/>
      <url>/2015/05/20/Android-SwipeRefreshLayout-%E5%AE%98%E6%96%B9%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E6%8E%A7%E4%BB%B6%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p><strong>摘要：</strong></p><pre><code>Android SwipeRefreshLayout是Google官方给出的下拉刷新控件，特别的炫酷！相应的介绍网上也一大堆的内容。</code></pre><p>推荐参考地址：<br>1： <a href="http://www.cnblogs.com/JinyaoLi/p/3852424.html">SwipeRefreshLayout使用的简单介绍</a><br>2： <a href="http://developer.android.com/reference/android/support/v4/widget/SwipeRefreshLayout.html">API doc</a></p><hr><h2 id="使用中注意的问题："><a class="header-anchor" href="#使用中注意的问题：">¶</a>使用中注意的问题：</h2><p>1: 首先须把你的support library v4的版本升级到19.1或更新</p><p>2: 在实际使用过程中，发现刷新时并不是在界面顶部的炫酷多彩变换横条，而变成了小圆圈形状，没那么的炫酷：这是由于你更新了Google最新的 support library v4 版本造成，若要实现多彩横条，请使用旧版support library v4！</p><p>3: 使用示例可参看本博得前一篇文章。<a href="https://absentm.github.io/2015/05/20/Android-SwipeRefreshLayout-%E5%AE%98%E6%96%B9%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E6%8E%A7%E4%BB%B6%E4%BB%8B%E7%BB%8D/">SwipeRefreshLayout 下拉刷新控件使用示例</a></p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android 使用Thread+Handler实现非UI线程更新UI界面</title>
      <link href="/2015/04/20/Android-%E4%BD%BF%E7%94%A8Thread-Handler%E5%AE%9E%E7%8E%B0%E9%9D%9EUI%E7%BA%BF%E7%A8%8B%E6%9B%B4%E6%96%B0UI%E7%95%8C%E9%9D%A2/"/>
      <url>/2015/04/20/Android-%E4%BD%BF%E7%94%A8Thread-Handler%E5%AE%9E%E7%8E%B0%E9%9D%9EUI%E7%BA%BF%E7%A8%8B%E6%9B%B4%E6%96%B0UI%E7%95%8C%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>**摘要：**每个Android应用程序都运行在一个dalvik虚拟机进程中，进程开始的时候会启动一个主线程(MainThread)，主线程负责处理和ui相关的事件，因此主线程通常又叫UI线程。而由于Android采用UI单线程模型，所以只能在主线程中对UI元素进行操作。如果在非UI线程直接对UI进行了操作，则会报错：CalledFromWrongThreadException:only the original thread that created a view hierarchy can touch its views。</p><p>Android为我们提供了消息循环的机制，我们可以利用这个机制来实现线程间的通信。那么，我们就可以在非UI线程发送消息到UI线程，最终让Ui线程来进行ui的操作。</p><p>对于运算量较大的操作和IO操作，我们需要新开线程来处理这些繁重的工作，以免阻塞ui线程。在发送http等网络请求时，会经常使用！</p><hr><h2 id="实例讲解"><a class="header-anchor" href="#实例讲解">¶</a>实例讲解</h2><p>下面承接前几篇文章中对天气情况(Weather)的一些详细说明，继续完善，实现在Android客户端的一个天气预报功能的开发：</p><h3 id="WeatherActivity主程序代码："><a class="header-anchor" href="#WeatherActivity主程序代码：">¶</a>WeatherActivity主程序代码：</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dm.weather;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.annotation.TargetApi;</span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.widget.SwipeRefreshLayout;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dm.CommonData.RetData;</span><br><span class="line"><span class="keyword">import</span> com.dm.CommonData.Weather;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.NameValuePair;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.ClientProtocolException;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.entity.UrlEncodedFormEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.DefaultHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.message.BasicNameValuePair;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.protocol.HTTP;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Thread + Handler 实例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeatherActivity</span> <span class="keyword">extends</span> <span class="title class_">Activity</span> {</span><br><span class="line">    <span class="keyword">private</span> SwipeRefreshLayout swipeRefreshLayout;</span><br><span class="line">    <span class="keyword">private</span> TextView refreshTv;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LOG_TAG</span> <span class="operator">=</span> <span class="string">"WeatherActivity"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MSG_SUCCESS</span> <span class="operator">=</span> <span class="number">1</span>;         <span class="comment">// 成功标识</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MSG_FAILURE</span> <span class="operator">=</span> <span class="number">0</span>;         <span class="comment">// 失败标识</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REQUEST_URL</span> <span class="operator">=</span> <span class="string">"http://apistore.baidu.com/microservice/weather?cityname=郑州"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REQUEST_BASE_URL</span> <span class="operator">=</span> <span class="string">"http://apistore.baidu.com/microservice/weather"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ImageView weatherIcon;</span><br><span class="line">    <span class="keyword">private</span> TextView weatherDateTv;</span><br><span class="line">    <span class="keyword">private</span> TextView weatherTimeTv;</span><br><span class="line">    <span class="keyword">private</span> TextView weatherStatusTv;</span><br><span class="line">    <span class="keyword">private</span> TextView windDirectionTv;</span><br><span class="line">    <span class="keyword">private</span> TextView windSpeedTv;</span><br><span class="line">    <span class="keyword">private</span> TextView weatherCurrentTmpTv;</span><br><span class="line">    <span class="keyword">private</span> TextView weatherLowTmpTv;</span><br><span class="line">    <span class="keyword">private</span> TextView weatherHighTmpTv;</span><br><span class="line">    <span class="keyword">private</span> TextView sunRiseTimeTv;</span><br><span class="line">    <span class="keyword">private</span> TextView sunSetTimeTv;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Thread</span> <span class="variable">mThread</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Handler</span> <span class="variable">weatherHander</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span><span class="params">(Message msg)</span> {</span><br><span class="line">            <span class="keyword">switch</span> (msg.what) {</span><br><span class="line">                <span class="keyword">case</span> MSG_SUCCESS:</span><br><span class="line">                <span class="comment">// 使用Gson对Json数据的解析，请翻看之前的文章：[Java中使用Gson解析json数据](http://blog.csdn.net/mduanfire/article/details/44703059%20+ "Java中使用Gson解析json数据")</span></span><br><span class="line">                    <span class="type">Gson</span> <span class="variable">weatherGson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">                    Log.i(LOG_TAG, msg.obj.toString());</span><br><span class="line"></span><br><span class="line">                    <span class="type">Weather</span> <span class="variable">weather</span> <span class="operator">=</span> weatherGson.fromJson(msg.obj.toString(), Weather.class);</span><br><span class="line">                    <span class="type">RetData</span> <span class="variable">retData</span> <span class="operator">=</span> weather.getRetData();</span><br><span class="line"></span><br><span class="line">                    weatherDateTv.setText(retData.getDate() + <span class="string">"  "</span>);</span><br><span class="line">                    weatherTimeTv.setText(retData.getTime());</span><br><span class="line">                    windDirectionTv.setText(retData.getWD());</span><br><span class="line">                    windSpeedTv.setText(retData.getWS());</span><br><span class="line">                    weatherStatusTv.setText(retData.getWeather());</span><br><span class="line">                    weatherCurrentTmpTv.setText(retData.getTemp());</span><br><span class="line">                    weatherLowTmpTv.setText(retData.getL_tmp());</span><br><span class="line">                    weatherHighTmpTv.setText(retData.getH_tmp());</span><br><span class="line">                    sunRiseTimeTv.setText(retData.getSunrise());</span><br><span class="line">                    sunSetTimeTv.setText(retData.getSunset());</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">switch</span> (retData.getWeather()) {</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"晴"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.qing);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"多云"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.duoyun);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"阴"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.yin);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"阵雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.zhengyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"雷阵雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.leizhengyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"雷阵雨伴有冰雹"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.leizhengyubanyoubingbao);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"雨夹雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.yujiaxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"小雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.xiaoyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"中雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.zhongyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"大雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.dayu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"暴雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.baoyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"大暴雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.dabaoyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"特大暴雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.tedabaoyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"阵雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.zhengxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"小雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.xiaoxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"中雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.zhongxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"大雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.daxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"暴雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.baoxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"雾"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.wu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"冻雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.dongyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"沙尘暴"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.shachenbao);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"浮尘"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.fuchen);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"扬沙"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.yangsha);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"强沙尘暴"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.qiangshachenbao);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"霾"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.mai);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"小到中雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.zhongyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"中到大雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.dayu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"大到暴雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.baoyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"暴雨到大暴雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.dabaoyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"大暴雨到特大暴雨"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.tedabaoyu);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"小到中雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.zhongxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"中到大雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.daxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"大到暴雪"</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.baoxue);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">default</span>:</span><br><span class="line">                            weatherIcon.setImageResource(R.drawable.qita);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                    refreshTv.setText(<span class="string">"刷新成功"</span>);</span><br><span class="line">                    swipeRefreshLayout.setRefreshing(<span class="literal">false</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> MSG_FAILURE:</span><br><span class="line">                    Toast.makeText(getApplicationContext(), <span class="string">"FAILURE, 网络繁忙！"</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> {</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.weather_activity);</span><br><span class="line"></span><br><span class="line">        initTitleView();</span><br><span class="line">        initWeatherView();</span><br><span class="line">        initBaseView();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initBaseView</span><span class="params">()</span> {</span><br><span class="line">        refreshTv = (TextView) findViewById(R.id.refresh_tv);</span><br><span class="line">        swipeRefreshLayout = (SwipeRefreshLayout) findViewById(R.id.swipe_container);</span><br><span class="line">        swipeRefreshLayout.setColorSchemeResources(android.R.color.holo_blue_light, android.R.color.holo_red_light, android.R.color.holo_orange_light, android.R.color.holo_green_light);</span><br><span class="line">        swipeRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> <span class="title class_">SwipeRefreshLayout</span>.OnRefreshListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefresh</span><span class="params">()</span> {</span><br><span class="line">                refreshTv.setText(<span class="string">"正在刷新"</span>);</span><br><span class="line">                <span class="comment">// 开启新的线程，请求网络数据，返回json数据</span></span><br><span class="line">                mThread = <span class="keyword">new</span> <span class="title class_">Thread</span>(runnable);</span><br><span class="line">                mThread.start();</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Http get</span></span><br><span class="line"><span class="comment">//            String requestUrl = REQUEST_URL;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            HttpGet httpGet = new HttpGet(requestUrl);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            try {</span></span><br><span class="line"><span class="comment">//                HttpResponse httpResponse = new DefaultHttpClient().execute(httpGet);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                if (httpResponse.getStatusLine().getStatusCode() == 200) {</span></span><br><span class="line"><span class="comment">//                    String requestResult = EntityUtils.toString(httpResponse.getEntity());</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                    Log.i(LOG_TAG, "requestResult = " + requestResult);</span></span><br><span class="line"><span class="comment">//                    </span></span><br><span class="line"><span class="comment">// 使用定义的weatherHander的obtainMessage()方法将成功标志和请求成功得到的json字符串传递过去，之后在Hander中进行解析</span></span><br><span class="line">weatherHander.obtainMessage(MSG_SUCCESS, requestResult).sendToTarget();</span><br><span class="line"><span class="comment">//                } else {</span></span><br><span class="line"><span class="comment">//                    Log.i(LOG_TAG, "requestError = " + httpResponse.getStatusLine());</span></span><br><span class="line"><span class="comment">//                    Toast.makeText(getApplicationContext(), "Response Error!!" + httpResponse.getStatusLine(), Toast.LENGTH_SHORT).show();</span></span><br><span class="line"><span class="comment">//                }</span></span><br><span class="line"><span class="comment">//            } catch (IOException e) {</span></span><br><span class="line"><span class="comment">//                Log.i(LOG_TAG, e.getMessage());</span></span><br><span class="line"><span class="comment">//                e.printStackTrace();</span></span><br><span class="line"><span class="comment">//            }</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// Http post</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> REQUEST_URL;</span><br><span class="line">            <span class="type">HttpPost</span> <span class="variable">httpPost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(url);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="type">HttpResponse</span> <span class="variable">httpResponse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultHttpClient</span>().execute(httpPost);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (httpResponse.getStatusLine().getStatusCode() == <span class="number">200</span>) {</span><br><span class="line">                    <span class="type">String</span> <span class="variable">requestResult</span> <span class="operator">=</span> EntityUtils.toString(httpResponse.getEntity());</span><br><span class="line"></span><br><span class="line">                    Log.i(LOG_TAG, <span class="string">"requestResult = "</span> + requestResult);</span><br><span class="line">                    weatherHander.obtainMessage(MSG_SUCCESS, requestResult).sendToTarget();</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    Log.i(LOG_TAG, <span class="string">"requestError = "</span> + httpResponse.getStatusLine());</span><br><span class="line">                    Toast.makeText(getApplicationContext(), <span class="string">"Response Error!!"</span> + httpResponse.getStatusLine(), Toast.LENGTH_SHORT).show();</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                Log.i(LOG_TAG, <span class="string">"+++++: "</span> + e.getMessage());</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initTitleView</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">titleBackImv</span> <span class="operator">=</span> (ImageView) findViewById(R.id.titleBack_iv);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">titleTextTv</span> <span class="operator">=</span> (TextView) findViewById(R.id.titleText_tv);</span><br><span class="line"></span><br><span class="line">        titleTextTv.setText(<span class="string">"天气状况"</span>);</span><br><span class="line">        titleBackImv.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> {</span><br><span class="line">                finish();</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initWeatherView</span><span class="params">()</span> {</span><br><span class="line">        weatherIcon = (ImageView) findViewById(R.id.weather_icon);</span><br><span class="line">        weatherDateTv = (TextView) findViewById(R.id.weather_date);</span><br><span class="line">        weatherTimeTv = (TextView) findViewById(R.id.weather_time);</span><br><span class="line">        windDirectionTv = (TextView) findViewById(R.id.weather_windstatus);</span><br><span class="line">        windSpeedTv = (TextView) findViewById(R.id.weather_windspeed);</span><br><span class="line">        weatherStatusTv = (TextView) findViewById(R.id.weather_status);</span><br><span class="line">        weatherCurrentTmpTv = (TextView) findViewById(R.id.weather_curent_tmp);</span><br><span class="line">        weatherLowTmpTv = (TextView) findViewById(R.id.weather_low_tmp);</span><br><span class="line">        weatherHighTmpTv = (TextView) findViewById(R.id.weather_high_tmp);</span><br><span class="line">        sunRiseTimeTv = (TextView) findViewById(R.id.weather_sunrise_time);</span><br><span class="line">        sunSetTimeTv = (TextView) findViewById(R.id.weather_sunset_time);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="weather-activity界面布局代码"><a class="header-anchor" href="#weather-activity界面布局代码">¶</a>weather_activity界面布局代码</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@color/seashell"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_include"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">"@layout/title_layout"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.SwipeRefreshLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/swipe_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignTop</span>=<span class="string">"@+id/weather_icon"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/refresh_tv"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"Refresh?"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:padding</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.SwipeRefreshLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_icon"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"120dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"120dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@color/powderblue"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">"15dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"15dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_include"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@drawable/qita"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_city"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"郑州"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"24sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentRight</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">"15dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">"15dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_include"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignRight</span>=<span class="string">"@+id/weather_icon"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_status"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~~~~"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"22sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignBottom</span>=<span class="string">"@+id/weather_icon"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_windspeed"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~ "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_windstatus"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignRight</span>=<span class="string">"@+id/weather_city"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignEnd</span>=<span class="string">"@+id/weather_city"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_windstatus"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~~~~"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_above</span>=<span class="string">"@+id/weather_status"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignRight</span>=<span class="string">"@+id/weather_windspeed"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignEnd</span>=<span class="string">"@+id/weather_windspeed"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_date"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~~~~  "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toLeftOf</span>=<span class="string">"@+id/weather_time"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_city"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_time"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~  "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_city"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/weather_city"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">"@+id/weather_city"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_curent_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"当前气温: "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">"15dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_icon"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/weather_icon"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">"@+id/weather_icon"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_curent_tmp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignTop</span>=<span class="string">"@+id/weather_curent_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toRightOf</span>=<span class="string">"@+id/weather_curent_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">"@+id/weather_curent_tmp_hint"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_low_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"最低气温: "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_curent_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toLeftOf</span>=<span class="string">"@+id/weather_curent_tmp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toStartOf</span>=<span class="string">"@+id/weather_curent_tmp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_low_tmp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignTop</span>=<span class="string">"@+id/weather_low_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toRightOf</span>=<span class="string">"@+id/weather_low_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">"@+id/weather_low_tmp_hint"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_high_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"最高气温: "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_low_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toLeftOf</span>=<span class="string">"@+id/weather_high_tmp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toStartOf</span>=<span class="string">"@+id/weather_high_tmp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_high_tmp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_low_tmp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toRightOf</span>=<span class="string">"@+id/weather_low_tmp_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">"@+id/weather_low_tmp_hint"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_sunrise_time_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"日出时间: "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignTop</span>=<span class="string">"@+id/weather_low_tmp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignRight</span>=<span class="string">"@+id/weather_date"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignEnd</span>=<span class="string">"@+id/weather_date"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_sunrise_time"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignTop</span>=<span class="string">"@+id/weather_sunrise_time_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/weather_time"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">"@+id/weather_time"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_sunset_time_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"日落时间: "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_sunrise_time_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/weather_sunrise_time_hint"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">"@+id/weather_sunrise_time_hint"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/weather_sunset_time"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"~~~"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"@color/black"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/weather_sunrise_time"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/weather_sunrise_time"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">"@+id/weather_sunrise_time"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>{ 布局代码中使用到的SwipeRefreshLayout Google官方下拉刷新控件将在下篇文章中介绍 }</strong></p><hr><h3 id="在AndroidManifest-xml中添加获取网络的权限"><a class="header-anchor" href="#在AndroidManifest-xml中添加获取网络的权限">¶</a>在AndroidManifest.xml中添加获取网络的权限</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span><span class="comment">&lt;!--不要忘记设置网络访问权限--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="最终效果预览："><a class="header-anchor" href="#最终效果预览：">¶</a>最终效果预览：</h3><p><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Handler-no-fresh.png" alt="Handler-no-fresh"><br><img src="https://gitee.com/absentm/gitRes/raw/master/NotePics/Handler-fresh-show.png" alt="Handler-fresh-show"></p><h2 id="总结："><a class="header-anchor" href="#总结：">¶</a>总结：</h2><p><em><strong>非UI线程发送消息到UI线程分为两个步骤</strong></em></p><p>1 发送消息到UI线程的消息队列:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Message <span class="title function_">obtainMessage</span><span class="params">(<span class="type">int</span> what,Object object)</span></span><br></pre></td></tr></tbody></table></figure><p>通过使用Handler, 构造一个Message对象，这个对象存储了是否成功标识what和json字符串，然后通过message.sendToTarget()方法把这条message放到消息队列中去。</p><hr><p>2 处理发送到UI线程的消息：</p><p>ui线程中，我们覆盖了handleMessage</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span> <span class="params">(Message msg)</span>   </span><br></pre></td></tr></tbody></table></figure><p>这个方法是处理分发给ui线程的消息，判断msg.what的值可以知道mThread是否成功获取数据，如果json字符串数据成功获取，那么可以通过msg.obj获取到这个对象，之后开始解析。</p><hr><p>最后在使用布局中相应的TextView将数据填充，实现更新。</p>]]></content>
      
      
      <categories>
          
          <category> Android Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java中使用Gson解析json数据</title>
      <link href="/2015/03/28/Java%E4%B8%AD%E4%BD%BF%E7%94%A8Gson%E8%A7%A3%E6%9E%90json%E6%95%B0%E6%8D%AE/"/>
      <url>/2015/03/28/Java%E4%B8%AD%E4%BD%BF%E7%94%A8Gson%E8%A7%A3%E6%9E%90json%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>承接上篇文中，讲到eclipse开发环境中Gson的引入和基本使用；下面将讲述java中的网络编程和Gson对json字符串的解析：</p><ul><li>**java 发送Http Get请求 **</li><li><strong>java 发送Http send请求</strong></li><li><strong>请求返回json数据的类构造</strong></li></ul><hr><h2 id="发送Http-Get请求"><a class="header-anchor" href="#发送Http-Get请求">¶</a>发送Http Get请求</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向指定URL发送GET方法的请求</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url   发送请求的URL</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param 请求参数，请求参数应该是 name1=value1&amp;name2=value2 的形式。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> URL 所代表远程资源的响应结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">sendGet</span><span class="params">(String url, String param)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">""</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">String</span> <span class="variable">urlNameString</span> <span class="operator">=</span> url + <span class="string">"?"</span> + param;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">realUrl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(urlNameString);</span><br><span class="line">            <span class="comment">// 打开和URL之间的连接</span></span><br><span class="line">            <span class="type">URLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> realUrl.openConnection();</span><br><span class="line">            <span class="comment">// 设置通用的请求属性</span></span><br><span class="line">            connection.setRequestProperty(<span class="string">"accept"</span>, <span class="string">"*/*"</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">"connection"</span>, <span class="string">"Keep-Alive"</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">"user-agent"</span>,</span><br><span class="line">                    <span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1;SV1)"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 建立实际的连接</span></span><br><span class="line">            connection.connect();</span><br><span class="line">            <span class="comment">// 获取所有响应头字段</span></span><br><span class="line">            Map&lt;String, List&lt;String&gt;&gt; map = connection.getHeaderFields();</span><br><span class="line">            <span class="comment">// 遍历所有的响应头字段</span></span><br><span class="line">            <span class="keyword">for</span> (String key : map.keySet()) {</span><br><span class="line"><span class="comment">//                System.out.println(key + "---&gt;" + map.get(key));</span></span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// 定义 BufferedReader输入流来读取URL的响应</span></span><br><span class="line">            in = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(</span><br><span class="line">                    connection.getInputStream()));</span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = in.readLine()) != <span class="literal">null</span>) {</span><br><span class="line">                result += line;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            System.out.println(<span class="string">"发送GET请求出现异常！"</span> + e);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 使用finally块来关闭输入流</span></span><br><span class="line">        <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="keyword">if</span> (in != <span class="literal">null</span>) {</span><br><span class="line">                    in.close();</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">catch</span> (Exception e2) {</span><br><span class="line">                e2.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h2 id="发送Http-send请求"><a class="header-anchor" href="#发送Http-send请求">¶</a>发送Http send请求</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向指定 URL 发送POST方法的请求</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url   发送请求的 URL</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param 请求参数，请求参数应该是 name1=value1&amp;name2=value2 的形式。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 所代表远程资源的响应结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">sendPost</span><span class="params">(String baseUrl, String md5, String jsonStr)</span> {</span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">URL</span> <span class="variable">realUrl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(baseUrl + <span class="string">"?sign="</span> + md5);</span><br><span class="line">            <span class="comment">// 打开和URL之间的连接</span></span><br><span class="line">            <span class="comment">// URLConnection conn = realUrl.openConnection();</span></span><br><span class="line">            <span class="type">HttpURLConnection</span> <span class="variable">conn</span> <span class="operator">=</span> (HttpURLConnection) realUrl</span><br><span class="line">                    .openConnection();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 发送POST请求必须设置如下两行</span></span><br><span class="line">            conn.setDoOutput(<span class="literal">true</span>);</span><br><span class="line">            conn.setDoInput(<span class="literal">true</span>);</span><br><span class="line">            conn.setInstanceFollowRedirects(<span class="literal">true</span>);</span><br><span class="line">            conn.setUseCaches(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            conn.setRequestMethod(<span class="string">"POST"</span>);</span><br><span class="line">            conn.setConnectTimeout(<span class="number">18000</span>);</span><br><span class="line">            conn.setInstanceFollowRedirects(<span class="literal">true</span>);</span><br><span class="line">            conn.setRequestProperty(<span class="string">"Accept"</span>, <span class="string">"application/json"</span>);<span class="comment">// 设置接受报文的格式</span></span><br><span class="line">            conn.setRequestProperty(<span class="string">"Content-Type"</span>, <span class="string">"text/plain"</span>);<span class="comment">// 设置发送的格式</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取URLConnection对象对应的输出流</span></span><br><span class="line">            conn.connect();</span><br><span class="line"></span><br><span class="line">            out = <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(conn.getOutputStream());</span><br><span class="line">            out.write(jsonStr);</span><br><span class="line">            out.flush();</span><br><span class="line"></span><br><span class="line">            in = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(</span><br><span class="line">                    conn.getInputStream(), <span class="string">"UTF-8"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span> ((line = in.readLine()) != <span class="literal">null</span>) {</span><br><span class="line">                result += line;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            System.out.println(<span class="string">"发送 POST 请求出现异常！"</span> + e);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 使用finally块来关闭输出流、输入流</span></span><br><span class="line">        <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="keyword">if</span> (out != <span class="literal">null</span>) {</span><br><span class="line">                    out.close();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (in != <span class="literal">null</span>) {</span><br><span class="line">                    in.close();</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h2 id="实例测试"><a class="header-anchor" href="#实例测试">¶</a>实例测试</h2><p>可以在百度API Store中请求一些天气状况数据，返回json字符串；<br>eg:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainTest</span> {</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line"><span class="comment">// api store随便查找的请求的天气数据</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">baseUrl</span> <span class="operator">=</span> <span class="string">"http://apistore.baidu.com/microservice/weather"</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">"citypinyin=zhengzhou"</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">jsonStr</span> <span class="operator">=</span> HttpUtil.sendGet(baseUrl, param);</span><br><span class="line"></span><br><span class="line">        System.out.println(jsonStr);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>返回得到的是json字符串：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">errNum<span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">errMsg<span class="punctuation">:</span> <span class="string">"success"</span><span class="punctuation">,</span></span><br><span class="line">retData<span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">   city<span class="punctuation">:</span> <span class="string">"北京"</span><span class="punctuation">,</span> <span class="comment">//城市</span></span><br><span class="line">   pinyin<span class="punctuation">:</span> <span class="string">"beijing"</span><span class="punctuation">,</span> <span class="comment">//城市拼音</span></span><br><span class="line">   citycode<span class="punctuation">:</span> <span class="string">"101010100"</span><span class="punctuation">,</span>  <span class="comment">//城市编码</span></span><br><span class="line">   date<span class="punctuation">:</span> <span class="string">"15-02-11"</span><span class="punctuation">,</span> <span class="comment">//日期</span></span><br><span class="line">   time<span class="punctuation">:</span> <span class="string">"11:00"</span><span class="punctuation">,</span> <span class="comment">//发布时间</span></span><br><span class="line">   postCode<span class="punctuation">:</span> <span class="string">"100000"</span><span class="punctuation">,</span> <span class="comment">//邮编</span></span><br><span class="line">   longitude<span class="punctuation">:</span> <span class="number">116.391</span><span class="punctuation">,</span> <span class="comment">//经度</span></span><br><span class="line">   latitude<span class="punctuation">:</span> <span class="number">39.904</span><span class="punctuation">,</span> <span class="comment">//维度</span></span><br><span class="line">   altitude<span class="punctuation">:</span> <span class="string">"33"</span><span class="punctuation">,</span> <span class="comment">//海拔</span></span><br><span class="line">   weather<span class="punctuation">:</span> <span class="string">"晴"</span><span class="punctuation">,</span>  <span class="comment">//天气情况</span></span><br><span class="line">   temp<span class="punctuation">:</span> <span class="string">"10"</span><span class="punctuation">,</span> <span class="comment">//气温</span></span><br><span class="line">   l_tmp<span class="punctuation">:</span> <span class="string">"-4"</span><span class="punctuation">,</span> <span class="comment">//最低气温</span></span><br><span class="line">   h_tmp<span class="punctuation">:</span> <span class="string">"10"</span><span class="punctuation">,</span> <span class="comment">//最高气温</span></span><br><span class="line">   WD<span class="punctuation">:</span> <span class="string">"无持续风向"</span><span class="punctuation">,</span> <span class="comment">//风向</span></span><br><span class="line">   WS<span class="punctuation">:</span> <span class="string">"微风(&lt;10m/h)"</span><span class="punctuation">,</span> <span class="comment">//风力</span></span><br><span class="line">   sunrise<span class="punctuation">:</span> <span class="string">"07:12"</span><span class="punctuation">,</span> <span class="comment">//日出时间</span></span><br><span class="line">   sunset<span class="punctuation">:</span> <span class="string">"17:44"</span> <span class="comment">//日落时间</span></span><br><span class="line">  <span class="punctuation">}</span>    </span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h2 id="json字符串转java对象的类构造"><a class="header-anchor" href="#json字符串转java对象的类构造">¶</a>json字符串转java对象的类构造</h2><p>我们需要构造相应结构的java类，并生成相应的对象，方可使用Gson进行相应的解析，根据上述请求的得到的json字符串，具体构造方法如下：</p><p>&lt;1&gt; 将json字符串中的单一键值对（key-value）表示成类的属性；<br>&lt;2&gt; 将json字符串中的“{}”包围的结构，构造成另一个类；<br>&lt;3&gt; 将json字符串中的"[]"包围的结构，构造成数组，通常使用List&lt;&gt;。<br>&lt;4&gt; 构造类中的属性名称，一定要与json字符串中的名称一致（<em><strong>特别重要， 由Gson的方法所限制</strong></em>）</p><p>那么，对于上述的天气json字符串，我们的构造过程如下所示：</p><h3 id="构造整体类结构"><a class="header-anchor" href="#构造整体类结构">¶</a>构造整体类结构</h3><p>(1) 构造一个Weather类，含有3个私有属性：(<em><strong>注意：属性名称和json字符串中的key的名称一样</strong></em>)；<br>(2) 添加相应的构造方法、Getter和Setter方法;</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> errNum;             <span class="comment">// 错误标志</span></span><br><span class="line">   <span class="keyword">private</span> String errMsg;          <span class="comment">// 错误信息</span></span><br><span class="line">   <span class="keyword">private</span> RetData retData;        <span class="comment">// 对象类型的请求具体数据</span></span><br></pre></td></tr></tbody></table></figure><p>具体结构如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Weather</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> errNum;             <span class="comment">// 错误标志</span></span><br><span class="line">    <span class="keyword">private</span> String errMsg;          <span class="comment">// 错误信息</span></span><br><span class="line">    <span class="keyword">private</span> RetData retData;        <span class="comment">// 请求具体数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Weather</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Weather</span><span class="params">(<span class="type">int</span> errNum, String errMsg, RetData retData)</span> {</span><br><span class="line">        <span class="built_in">this</span>.errNum = errNum;</span><br><span class="line">        <span class="built_in">this</span>.errMsg = errMsg;</span><br><span class="line">        <span class="built_in">this</span>.retData = retData;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getErrNum</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> errNum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setErrNum</span><span class="params">(<span class="type">int</span> errNum)</span> {</span><br><span class="line">        <span class="built_in">this</span>.errNum = errNum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getErrMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> errMsg;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setErrMsg</span><span class="params">(String errMsg)</span> {</span><br><span class="line">        <span class="built_in">this</span>.errMsg = errMsg;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RetData <span class="title function_">getRetData</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> retData;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRetData</span><span class="params">(RetData retData)</span> {</span><br><span class="line">        <span class="built_in">this</span>.retData = retData;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>同理，json字符串中的retData天气数据的构造如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RetData</span> {</span><br><span class="line">    <span class="keyword">private</span> String city;            <span class="comment">// 城市名称</span></span><br><span class="line">    <span class="keyword">private</span> String pinyin;          <span class="comment">// 城市拼音</span></span><br><span class="line">    <span class="keyword">private</span> String citycode;        <span class="comment">// 城市编号</span></span><br><span class="line">    <span class="keyword">private</span> String date;            <span class="comment">// 日期</span></span><br><span class="line">    <span class="keyword">private</span> String time;            <span class="comment">// 时间</span></span><br><span class="line">    <span class="keyword">private</span> String postCode;        <span class="comment">// 邮编</span></span><br><span class="line">    <span class="keyword">private</span> String longitude;       <span class="comment">// 经度</span></span><br><span class="line">    <span class="keyword">private</span> String latitude;        <span class="comment">// 纬度</span></span><br><span class="line">    <span class="keyword">private</span> String altitude;        <span class="comment">// 海拔</span></span><br><span class="line">    <span class="keyword">private</span> String weather;         <span class="comment">// 天气状况</span></span><br><span class="line">    <span class="keyword">private</span> String temp;            <span class="comment">// 温度</span></span><br><span class="line">    <span class="keyword">private</span> String l_tmp;           <span class="comment">// 低温</span></span><br><span class="line">    <span class="keyword">private</span> String h_tmp;           <span class="comment">// 高温</span></span><br><span class="line">    <span class="keyword">private</span> String WD;              <span class="comment">// 风向</span></span><br><span class="line">    <span class="keyword">private</span> String WS;              <span class="comment">// 风速</span></span><br><span class="line">    <span class="keyword">private</span> String sunrise;         <span class="comment">// 日出时间</span></span><br><span class="line">    <span class="keyword">private</span> String sunset;          <span class="comment">// 日落时间</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RetData</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RetData</span><span class="params">(String city, String pinyin, String citycode, String date, String time, String postCode, String longitude, String latitude, String altitude, String weather, String temp, String l_tmp, String h_tmp, String WD, String WS, String sunrise, String sunset)</span> {</span><br><span class="line">        <span class="built_in">this</span>.city = city;</span><br><span class="line">        <span class="built_in">this</span>.pinyin = pinyin;</span><br><span class="line">        <span class="built_in">this</span>.citycode = citycode;</span><br><span class="line">        <span class="built_in">this</span>.date = date;</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">        <span class="built_in">this</span>.postCode = postCode;</span><br><span class="line">        <span class="built_in">this</span>.longitude = longitude;</span><br><span class="line">        <span class="built_in">this</span>.latitude = latitude;</span><br><span class="line">        <span class="built_in">this</span>.altitude = altitude;</span><br><span class="line">        <span class="built_in">this</span>.weather = weather;</span><br><span class="line">        <span class="built_in">this</span>.temp = temp;</span><br><span class="line">        <span class="built_in">this</span>.l_tmp = l_tmp;</span><br><span class="line">        <span class="built_in">this</span>.h_tmp = h_tmp;</span><br><span class="line">        <span class="built_in">this</span>.WD = WD;</span><br><span class="line">        <span class="built_in">this</span>.WS = WS;</span><br><span class="line">        <span class="built_in">this</span>.sunrise = sunrise;</span><br><span class="line">        <span class="built_in">this</span>.sunset = sunset;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCity</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> city;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCity</span><span class="params">(String city)</span> {</span><br><span class="line">        <span class="built_in">this</span>.city = city;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPinyin</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> pinyin;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPinyin</span><span class="params">(String pinyin)</span> {</span><br><span class="line">        <span class="built_in">this</span>.pinyin = pinyin;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCitycode</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> citycode;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCitycode</span><span class="params">(String citycode)</span> {</span><br><span class="line">        <span class="built_in">this</span>.citycode = citycode;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDate</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDate</span><span class="params">(String date)</span> {</span><br><span class="line">        <span class="built_in">this</span>.date = date;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTime</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTime</span><span class="params">(String time)</span> {</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPostCode</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> postCode;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPostCode</span><span class="params">(String postCode)</span> {</span><br><span class="line">        <span class="built_in">this</span>.postCode = postCode;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLongitude</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> longitude;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLongitude</span><span class="params">(String longitude)</span> {</span><br><span class="line">        <span class="built_in">this</span>.longitude = longitude;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLatitude</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> latitude;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLatitude</span><span class="params">(String latitude)</span> {</span><br><span class="line">        <span class="built_in">this</span>.latitude = latitude;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAltitude</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> altitude;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAltitude</span><span class="params">(String altitude)</span> {</span><br><span class="line">        <span class="built_in">this</span>.altitude = altitude;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWeather</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> weather;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeather</span><span class="params">(String weather)</span> {</span><br><span class="line">        <span class="built_in">this</span>.weather = weather;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTemp</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTemp</span><span class="params">(String temp)</span> {</span><br><span class="line">        <span class="built_in">this</span>.temp = temp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getL_tmp</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> l_tmp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setL_tmp</span><span class="params">(String l_tmp)</span> {</span><br><span class="line">        <span class="built_in">this</span>.l_tmp = l_tmp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getH_tmp</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> h_tmp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setH_tmp</span><span class="params">(String h_tmp)</span> {</span><br><span class="line">        <span class="built_in">this</span>.h_tmp = h_tmp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWD</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> WD;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWD</span><span class="params">(String WD)</span> {</span><br><span class="line">        <span class="built_in">this</span>.WD = WD;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWS</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> WS;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWS</span><span class="params">(String WS)</span> {</span><br><span class="line">        <span class="built_in">this</span>.WS = WS;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSunrise</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> sunrise;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSunrise</span><span class="params">(String sunrise)</span> {</span><br><span class="line">        <span class="built_in">this</span>.sunrise = sunrise;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSunset</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> sunset;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSunset</span><span class="params">(String sunset)</span> {</span><br><span class="line">        <span class="built_in">this</span>.sunset = sunset;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>至此，我们的类结构的构造定义完成了，下面调用Gson的<code>fromJson（）方法</code>（具体原理是java的反射机制）便可以生成相应的变量在内存中使用。</p><h2 id="综合测试"><a class="header-anchor" href="#综合测试">¶</a>综合测试</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// api store随便查找的请求的天气数据</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">baseUrl</span> <span class="operator">=</span> <span class="string">"http://apistore.baidu.com/microservice/weather"</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">"citypinyin=zhengzhou"</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">jsonStr</span> <span class="operator">=</span> HttpUtil.sendGet(baseUrl, param);</span><br><span class="line"></span><br><span class="line">        System.out.println(jsonStr);</span><br><span class="line"></span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">        <span class="type">Weather</span> <span class="variable">weather</span> <span class="operator">=</span> gson.fromJson(jsonStr, Weather.class);</span><br><span class="line">        <span class="type">RetData</span> <span class="variable">retData</span> <span class="operator">=</span> weather.getRetData();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"weather = "</span> + weather.getErrNum());</span><br><span class="line">        System.out.println(<span class="string">"weather = "</span> + weather.getErrMsg());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"retData = "</span> + retData.getH_tmp());</span><br><span class="line">        System.out.println(<span class="string">"retData = "</span> + retData.getL_tmp());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"retData = "</span> + retData.getTemp());</span><br><span class="line">        System.out.println(<span class="string">"retData = "</span> + retData.getWD());</span><br><span class="line">        System.out.println(<span class="string">"retData = "</span> + retData.getWeather());</span><br><span class="line">        System.out.println(<span class="string">"retData = "</span> + retData.getWeather());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java中Gson的使用</title>
      <link href="/2015/03/24/Java%E4%B8%ADGson%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2015/03/24/Java%E4%B8%ADGson%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><p>近日项目中用到了json，在网上搜罗了好久，发现google开源的Gson使用起来很是方便，记录如下：</p><hr><h2 id="使用前准备工作"><a class="header-anchor" href="#使用前准备工作">¶</a>使用前准备工作</h2><ol><li>开发工具（IDE）: Eclipse;</li><li>需下载google的gson,文件名：gson-2.3.1.jar;</li><li>将下载后的文件导入eclipse: 在eclipse中右键单击当前工程名—&gt;Build Path—&gt;Add Extenal Archives—&gt;选择下载好的gson-2.3.1.jar文件，导入Ok;</li><li>至此，基本准备工作完成，只需在项目import包就行了;</li><li>这里给出了下载地址： <a href="http://search.maven.org/remotecontent?filepath=com/google/code/gson/gson/2.3.1/gson-2.3.1.jar" target="_blank"> [ Gson官方下载地址 ]</a></li><a href="http://search.maven.org/remotecontent?filepath=com/google/code/gson/gson/2.3.1/gson-2.3.1.jar" target="_blank"></a></ol><a href="http://search.maven.org/remotecontent?filepath=com/google/code/gson/gson/2.3.1/gson-2.3.1.jar" target="_blank"></a><h2 id="将java对象转化为json字符串"><a href="http://search.maven.org/remotecontent?filepath=com/google/code/gson/gson/2.3.1/gson-2.3.1.jar" target="_blank"></a><a class="header-anchor" href="#将java对象转化为json字符串">¶</a>将java对象转化为json字符串</h2><p>在java文件中导包：<code>import com.google.gson.Gson;</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将java对象转化为json字符串</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> obj</span></span><br><span class="line"><span class="comment"> *            java对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 转化后的json字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJsonStr</span><span class="params">(Object obj)</span> {</span><br><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"><span class="keyword">return</span> gson.toJson(obj);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="将json字符串转成对象"><a class="header-anchor" href="#将json字符串转成对象">¶</a>将json字符串转成对象</h2><blockquote><p>1、 通用泛型：</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * json字符串转成对象</span></span><br><span class="line"><span class="comment">  *  </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">  *            json字符串</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">  *            泛型</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">fromJson</span><span class="params">(String str, Type type)</span> {</span><br><span class="line">  <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">  <span class="keyword">return</span> gson.fromJson(str, type);</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><blockquote><p>2、使用类：</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * json字符串转成对象</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment"> *            json字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment"> *            Class&lt;T&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">fromJson</span><span class="params">(String str, Class&lt;T&gt; type)</span> {</span><br><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"><span class="keyword">return</span> gson.fromJson(str, type);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="实例测试"><a class="header-anchor" href="#实例测试">¶</a>实例测试</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> {</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line"><span class="comment">// 创建java对象</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">"1001"</span>, <span class="string">"zhang"</span>, <span class="string">"98.5"</span>);</span><br><span class="line"><span class="comment">// 调用getJsonStr()方法，转化为json字符串</span></span><br><span class="line">System.out.println(JsonUtil.getJsonStr(stu));                                          </span><br><span class="line"></span><br><span class="line"><span class="comment">// 将json字符串转化为java对象时，首先要根据json的格式构造相应的类结构，之后在调用fromJson()方法</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonStr</span> <span class="operator">=</span><span class="string">"{\"ch\":\"X\",\"r\":\"J\",\"t\":\"1421\"}"</span>;</span><br><span class="line">        <span class="type">ReceiveMessage</span> <span class="variable">receive</span> <span class="operator">=</span> JsonUtil</span><br><span class="line">.fromJson(getStr, ReceiveMessage.class);</span><br><span class="line">System.out.println(receive);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>更为详尽的方法使用请移步：<a href="http://blog.csdn.net/tkwxty/article/details/34474501">使用Gson解析复杂的json数据</a></p>]]></content>
      
      
      <categories>
          
          <category> Java Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
